<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Yeefun | Feed]]></title><description><![CDATA[👨🏻‍💻👁📚...]]></description><link>https://yeefun.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 11 Oct 2020 10:08:50 GMT</lastBuildDate><item><title><![CDATA[關掉 no-var——決定變數宣告關鍵字的良好方法]]></title><description><![CDATA[搭配 let，遵守最小暴露原則，var 其實很有用。]]></description><link>https://yeefun.github.io/turn-off-no-var/</link><guid isPermaLink="false">https://yeefun.github.io/turn-off-no-var/</guid><pubDate>Sun, 11 Oct 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;大家平時都是怎麼決定該用哪個關鍵字（&lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt;、&lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt;、&lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;）宣告變數的呢？受到 &lt;a href=&quot;https://eslint.org/docs/rules/no-var&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ESlint 建議規範&lt;/a&gt;的影響，我猜很多人跟我一樣，決定方式很簡單：會被再賦值（reassign）的就用 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt;，不會的就用 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;。&lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 完全不在我們的選項，畢竟，&lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 有很多缺點，它的好處完全可以由 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 來代替，是吧？&lt;/p&gt;
&lt;p&gt;我承認我並沒有很認真探討過這個問題，只是照著 ESlint 規範走，直到在讀書會看了頗知名的 &lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/scope-closures/README.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;You Don&apos;t Know JS Yet: Scope &amp;#x26; Closures&lt;/a&gt;（是的，它出第二版了），發現作者 Kyle Simpson 並不派斥 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt;，&lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/scope-closures/apA.md#the-case-for-var&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;甚至認為 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的好處無法取代&lt;/a&gt;，這才讓我重新思考並質疑自己不使用 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的理由。&lt;/p&gt;
&lt;h2 id=&quot;var-很有用&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#var-%E5%BE%88%E6%9C%89%E7%94%A8&quot; aria-label=&quot;var 很有用 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 很有用&lt;/h2&gt;
&lt;p&gt;Simpson 認為，&lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 跟 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 都很有用（他沒有很喜歡 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;，後面會說原因），前者為函數作用域（function scope），後者為區塊作用域（block scope），因此，當一個變數在整個函數中都會用到，那就該用 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt;，並宣告在&lt;strong&gt;函數最外層&lt;/strong&gt;（top-level，也可以說是頂層）；反之，如果一個變數只會在函數中的某個區塊用到，那就該用 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt;，並宣告在&lt;strong&gt;這個區塊內&lt;/strong&gt;，讓外層的作用域取用不到。&lt;/p&gt;
&lt;p&gt;比方說，假如我現在要寫一個能判斷使用者網頁捲動方向的函數，按照 ESlint 建議的寫法，會是這樣：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;logScrollDirection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; beforeScrollY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageYOffset&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;scroll&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; currentScrollY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageYOffset&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; delta &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; currentScrollY &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; beforeScrollY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;scroll down!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;scroll up!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    beforeScrollY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; currentScrollY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;但 Simpson 會建議這樣：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;logScrollDirection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 變成 `var` 了&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; beforeScrollY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageYOffset&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;scroll&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 變成 `var` 了&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; currentScrollY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageYOffset&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;token comment&quot;&gt;// 多了大括號&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// 變成 `let` 了&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; delta &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; currentScrollY &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; beforeScrollY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;scroll down!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;scroll up!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
    beforeScrollY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; currentScrollY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;你可能會想說，&lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 其實也是函數作用域，為什麼不乾脆把上面的 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 都改成 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 呢？&lt;/p&gt;
&lt;p&gt;理由有兩個：第一，就語義上來說，&lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 比 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 更適合扮演「這個變數是作用在整個函數中」的角色，畢竟在 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 出現前的 20 幾年，&lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 就一直都是如此。&lt;/p&gt;
&lt;p&gt;第二，如果你在任何地方都使用 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt;，那你可能會不好判斷這個 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 所宣告的變數是作用在整個函數中，還是只在某個區塊內。&lt;/p&gt;
&lt;p&gt;你可能還會注意到，在黃線處有個奇怪的大括號 &lt;code class=&quot;language-text&quot;&gt;{..}&lt;/code&gt;。這個括號能確保 &lt;code class=&quot;language-text&quot;&gt;delta&lt;/code&gt; 不被函數內的其它地方取用到，讓它成為名副其實的區塊變數。&lt;/p&gt;
&lt;p&gt;一般來說，我們在函數內創建區塊變數，是在遇到 &lt;code class=&quot;language-text&quot;&gt;if..else&lt;/code&gt; 或 &lt;code class=&quot;language-text&quot;&gt;for&lt;/code&gt; 迴圈的時候。但其實你可以不靠這些陳述語句（statement）來創建區塊變數，那就是直接用單獨的 &lt;code class=&quot;language-text&quot;&gt;{..}&lt;/code&gt; 大括號。&lt;/p&gt;
&lt;p&gt;這個大括號看來有點奇怪又累贅，但它事實上是讓 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 與 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 的搭配發揮最大效用的關鍵，而且它還體現了軟體工程的一個原則：最小暴露原則（The Principle of Least Exposure, POLE）。&lt;/p&gt;
&lt;h2 id=&quot;最小暴露原則&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E6%9C%80%E5%B0%8F%E6%9A%B4%E9%9C%B2%E5%8E%9F%E5%89%87&quot; aria-label=&quot;最小暴露原則 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;最小暴露原則&lt;/h2&gt;
&lt;p&gt;最小暴露原則與&lt;a href=&quot;https://en.wikipedia.org/wiki/Principle_of_least_privilege&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;最小權限原則（The Principle of Least Privilege, POLP）&lt;/a&gt;有關，但它關注的層次較低。就變數而言，它想最小化暴露的是&lt;strong&gt;變數的作用域&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;為什麼？想想一個極端的問題：為什麼我們不把所有變數都宣告在全局作用域（global scope）？命名衝突、被他人非預期或惡意修改、非意圖依賴導致重構困難（詳細說明可見&lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/scope-closures/ch6.md#least-exposure&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;這裡&lt;/a&gt;）——當我們把區域（local）變數非必要地暴露給程式其它部分使用，這三個危險便會浮現，在日後絆你一跤。&lt;/p&gt;
&lt;p&gt;因此，我們應遵守最小暴露原則，&lt;strong&gt;這意味著我們應盡可能地保持變數私有（private），也就是將變數宣告在盡可能深的嵌套作用域內&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;說來容易，但這其實並不是一個很直覺的作法。我常需要在寫完函數的內容後，再回過頭來重新檢視程式碼，以找出哪些變數是函數中的區域變數（或甚至是區塊中的區域變數），再用 &lt;code class=&quot;language-text&quot;&gt;{..}&lt;/code&gt; 括起。&lt;/p&gt;
&lt;p&gt;聽來有點麻煩，但這種作法不僅能避免上述危險，還意外地擁有兩個好處。&lt;/p&gt;
&lt;p&gt;第一個是當你不小心寫出一個肥大的函數，&lt;code class=&quot;language-text&quot;&gt;{..}&lt;/code&gt; 有助於你判斷哪些程式碼是彼此相關，從而讓你更容易理解整個函數在幹嘛。&lt;/p&gt;
&lt;p&gt;當然，我們應盡可能避免寫出這樣的函數，但即使寫出來了，當我們在重構（refactoring），也可以相對容易判斷出哪些區塊可以&lt;a href=&quot;https://refactoring.com/catalog/extractFunction.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;提取成函數&lt;/a&gt;，以提升可讀性（readability）。&lt;/p&gt;
&lt;p&gt;同時，提取函數的過程也變得容易，因為你可以很快地判斷出變數的來源，知道現在要提取的區塊裡有哪些全局變數和區域變數。比如下面這段程式碼（請想像它是一個內容很長的函數）：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt; * 此處範例借用自 Martin Fowler 的著作 Refactoring: Improving the Design of Existing Code (2nd Edition)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt; * 第六章 Extract Fucntion 一節的程式碼&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt; */&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printOwing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;invoice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; outstanding &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; today &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token function&quot;&gt;printBanner&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  
  &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; order &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;orders&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    outstanding &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;amount&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dueDate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFullYear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMonth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;  
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  
  &lt;span class=&quot;token function&quot;&gt;printDetails&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;invoice&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outstanding&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printBanner&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printDetails&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;假設你想重構被黃線劃起來的區塊，把它提取成一個名為 &lt;code class=&quot;language-text&quot;&gt;recordDueDate&lt;/code&gt; 的函數，但由於你不知道 &lt;code class=&quot;language-text&quot;&gt;today&lt;/code&gt; 這個變數還有在這個函數中的哪些地方用到，因此你必須一行一行檢查，還必須進到內嵌函數去看有無使用到 &lt;code class=&quot;language-text&quot;&gt;today&lt;/code&gt;，相當麻煩。&lt;/p&gt;
&lt;p&gt;如果現在程式碼變成這樣：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printOwing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;invoice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; outstanding &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token function&quot;&gt;printBanner&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  
  &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; order &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;orders&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    outstanding &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;amount&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; today &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    invoice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dueDate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFullYear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMonth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;  
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  
  &lt;span class=&quot;token function&quot;&gt;printDetails&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;invoice&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outstanding&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printBanner&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printDetails&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;清楚多了吧！現在你可以很篤定 &lt;code class=&quot;language-text&quot;&gt;today&lt;/code&gt; 絕對不會被這個區塊以外的地方用到，可以放心又快速地把這兩行程式碼提取成 &lt;code class=&quot;language-text&quot;&gt;recordDueDate&lt;/code&gt; 函數了。&lt;/p&gt;
&lt;h2 id=&quot;取捨：評估-var-的缺點&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E5%8F%96%E6%8D%A8%EF%BC%9A%E8%A9%95%E4%BC%B0-var-%E7%9A%84%E7%BC%BA%E9%BB%9E&quot; aria-label=&quot;取捨：評估 var 的缺點 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;取捨：評估 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的缺點&lt;/h2&gt;
&lt;p&gt;前面說了 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的優點以及它該怎麼跟 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 搭配，這裡來談談 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的缺點。&lt;/p&gt;
&lt;p&gt;先從建議禁用 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的 ESlint 看起。為什麼不用 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt;？&lt;a href=&quot;https://eslint.org/docs/rules/no-var&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;ESlint 文件說&lt;/a&gt;，因為在&lt;strong&gt;區塊中&lt;/strong&gt;宣告 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 可能會意外地改變其外同名的變數。注意「區塊中」這三個字。沒錯，這點與我們前面說的一樣，&lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的確不應該宣告在區塊內，那是 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 發揮作用的地方。因此，前述原則已避免掉了這個缺點（Simpson 在&lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/scope-closures/apA.md#the-case-for-var&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;這篇&lt;/a&gt;講述了他覺得可以在區塊內宣告 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的狀況，雖然我仍覺得宣告在外頭比較好，但值得看看）。&lt;/p&gt;
&lt;p&gt;再來，應該就是所謂重新宣告（redeclare）的問題。&lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 跟 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt; 將重新宣告的問題澈底消除。但，重新宣告真的是一個嚴重的問題嗎？更確切地問，這個缺點有辦法抵銷甚至壓過前述 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的優點嗎？&lt;/p&gt;
&lt;p&gt;至少我自己是幾乎沒有碰過重新宣告的問題。即便你的函數都寫得很長，但當你很有意識地在區分變數的作用域範圍，要出錯的機率可說是微乎其微。如果你真的很擔心程式壞掉，那你可以將所有用 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 宣告的變數都寫在函數開始處，總不會在這短短幾行中也有同名的問題吧？&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;doBigThing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; first &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;watch movies&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; second &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;shopping&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; third &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;sleep&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; first &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;lt;-- 哦哦抓到了，太明顯了吧！&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// ..&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;同樣地，重新賦值的問題也是如此。想想看，你會在什麼情況下，不小心將一個不該被重新賦值的變數重新賦值？想不太到吧！大多數情況下，都是你想重新賦值，但卻發現這個變數被宣告成 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;，於是你只好回過頭把它改成 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt;，再重新賦值。而且，即便你真的不小心犯錯了，會很難察覺嗎？會很難追蹤嗎？會很難改回來嗎？&lt;/p&gt;
&lt;p&gt;我認為這兩個缺點並不足以說服我放棄前面所說的宣告方法。而且相對地，這兩個缺點也給予開發者更大的彈性，只要你謹慎使用（同樣地在&lt;a href=&quot;Simpson&quot;&gt;這篇&lt;/a&gt;，Simpson 簡單示範了重新宣告作為一種註解的功用，雖然我不怎麼喜歡）。&lt;/p&gt;
&lt;h2 id=&quot;什麼時候該用-const？&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E4%BB%80%E9%BA%BC%E6%99%82%E5%80%99%E8%A9%B2%E7%94%A8-const%EF%BC%9F&quot; aria-label=&quot;什麼時候該用 const？ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;什麼時候該用 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;？&lt;/h2&gt;
&lt;p&gt;你可能會發現，在上面範例中，即使我是在區塊內宣告不會再被賦值的變數，我也是用 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt;。為什麼不用 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;？這樣語義上不是更清晰嗎？&lt;/p&gt;
&lt;p&gt;好吧，其實我也是傾向用 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;，但因為我介紹的是 Simpson 的論點，所以在宣告變數的寫法上就把他對 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt; 的意見也一併納入了。&lt;/p&gt;
&lt;p&gt;Simpson 認為，&lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt; 是一個有點讓人困惑的關鍵字：你不是說這個變數是常數（constant）嗎？那為什麼它又可以被修改（mutate）呢？這個誤解的確常在 JS 新手身上發生（至少我在公司面試前端的經驗是如此）。&lt;/p&gt;
&lt;p&gt;那該在什麼時候用 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt; 呢？只有當你宣告的變數已經是個不可變（immutable）的值（即基本型別值，詳情可見&lt;a href=&quot;https://github.com/getify/Functional-Light-JS/blob/master/manuscript/ch6.md/#primitive-immutability&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;這篇&lt;/a&gt;），而且它在語義上顯然是個常數時，才該用 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;POSTS_PAGE_SIZE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 每次要從資料庫取得的文章數量&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;DEGREE_TO_PI&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;180&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;DEFAULT_THEME&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;dark&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 其內容之後能被修改，不建議用 `const`&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHARE_LINK_NAMES&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;fb&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;line&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;那重新賦值的問題呢？如同上一節所說，這個錯誤很難出現，即使出現也很好察覺並修復。而且當你會用 &lt;code class=&quot;language-text&quot;&gt;{..}&lt;/code&gt; 把區塊變數包起來，這個代碼塊通常不會太長，在這短短的十幾行中要出錯實在是不太可能。&lt;/p&gt;
&lt;p&gt;以上是 Simpson 的論點。對我來說，我認同重新賦值的問題並不大，但考量到非 JS 新手應該都能明白 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt; 的「不變」意指為何，我還是會繼續照一般規範走，只是要稍微忍受當看到一個由 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt; 宣告的變數，其內容在之後被修改時所引發的不適感。&lt;/p&gt;
&lt;h2 id=&quot;總結：一個原則，兩個問題&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E7%B8%BD%E7%B5%90%EF%BC%9A%E4%B8%80%E5%80%8B%E5%8E%9F%E5%89%87%EF%BC%8C%E5%85%A9%E5%80%8B%E5%95%8F%E9%A1%8C&quot; aria-label=&quot;總結：一個原則，兩個問題 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;總結：一個原則，兩個問題&lt;/h2&gt;
&lt;p&gt;當我在與別人協作，我會採用由團隊討論出來的代碼規範，或直接引入主流規範（如 &lt;a href=&quot;https://github.com/airbnb/javascript&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Airbnb&lt;/a&gt; 或 &lt;a href=&quot;https://standardjs.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Standard&lt;/a&gt;）。畢竟，我所喜愛的宣告方式，它的好處還無法勝過降低團隊溝通成本所帶來的優勢。但我仍會在程式碼中盡可能地用 &lt;code class=&quot;language-text&quot;&gt;{..}&lt;/code&gt; 縮小變數的作用域。&lt;/p&gt;
&lt;p&gt;如果是我獨立開發的專案，當我碰到要宣告變數，我會問自己兩個問題。第一個：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; 這是整個函數內都會使用到的變數嗎？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;是，就用 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 宣告在函數開始處；不是，遵循最小暴露原則，先用 &lt;code class=&quot;language-text&quot;&gt;{..}&lt;/code&gt; 括起，再問：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;這個變數會被重新賦值嗎？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;會，就用 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt;；不會，就用 &lt;code class=&quot;language-text&quot;&gt;const&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;整個決策過程並不複雜，至少我最近在開發瀏覽器擴充套件 &lt;a href=&quot;https://github.com/yeefun/notion-mark-manager&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Notion+ 標記管理器&lt;/a&gt;，是使用得挺愉快的，除了程式碼變得更易讀，修改起來也較容易。&lt;/p&gt;
&lt;p&gt;你是怎麼決定該用哪個關鍵字宣告變數的呢？你對我上面所說的一切，有什麼看法？歡迎留言給我！&lt;/p&gt;
&lt;p&gt;（有讀者回饋，覺得將作用於整個函數的變數都用 &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; 宣告在函數開頭，並記得將區塊變數都用 &lt;code class=&quot;language-text&quot;&gt;{..}&lt;/code&gt; 括起來，也能達到同樣的效果，並能避免掉 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的缺點。我同意這個看法，如果你真的覺得 &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt; 的缺陷不容忽視，那可以這麼做。總之，本篇最重要的觀念是&lt;strong&gt;最小暴露原則&lt;/strong&gt;，遵守這個原則，其它差異都非大事，只要你有深思熟慮過自己這麼做的原因就好）&lt;/p&gt;
&lt;h2 id=&quot;相關資料&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E7%9B%B8%E9%97%9C%E8%B3%87%E6%96%99&quot; aria-label=&quot;相關資料 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;相關資料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/scope-closures/README.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;You Don&apos;t Know JS Yet: Scope &amp;#x26; Closures (2nd Edition)&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/scope-closures/ch6.md&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Chapter 6: Limiting Scope Exposure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/scope-closures/apA.md#the-case-for-var&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Appendix A: Exploring Further - The Case for &lt;code class=&quot;language-text&quot;&gt;var&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[在 Nuxt.js 共用 GraphQL Fragments]]></title><description><![CDATA[GraphQL fragments 是什麼？要怎麼在 Nuxt.js 不同檔案間共用？]]></description><link>https://yeefun.github.io/how-to-use-graphql-fragments-in-nuxt/</link><guid isPermaLink="false">https://yeefun.github.io/how-to-use-graphql-fragments-in-nuxt/</guid><pubDate>Thu, 01 Oct 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;最近公司打 API 的方式換成 &lt;a href=&quot;https://graphql.org/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;GraphQL&lt;/a&gt;，這邊紀錄一下怎麼在 &lt;a href=&quot;https://nuxtjs.org/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Nuxt.js&lt;/a&gt; 用 GraphQL 的 &lt;a href=&quot;https://graphql.org/learn/queries/#fragments&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;fragments&lt;/a&gt; 特性，來達到重複使用程式碼查詢（query）的效果。&lt;/p&gt;
&lt;h2 id=&quot;fragments-是什麼&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#fragments-%E6%98%AF%E4%BB%80%E9%BA%BC&quot; aria-label=&quot;fragments 是什麼 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Fragments 是什麼&lt;/h2&gt;
&lt;p&gt;fragments 是什麼？簡單來說，就是一個可重用的欄位（fields）片段，你可以在裡頭放好幾個查詢欄位，接著就可以拿這個片段放到不同的查詢物件中。&lt;/p&gt;
&lt;p&gt;最簡單的範例長這樣：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;query&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;rightPosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; allPosts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token fragment function&quot;&gt;postFields&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  
  &lt;span class=&quot;token attr-name&quot;&gt;leftPosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; allPosts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token fragment function&quot;&gt;postFields&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fragment&lt;/span&gt; &lt;span class=&quot;token fragment function&quot;&gt;postFields&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  id
  title
  heroImage &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    title
    urlMobileSized
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以 JavaScript 來類比，你可以想像 &lt;code class=&quot;language-text&quot;&gt;postFields&lt;/code&gt; 就是物件，而 &lt;code class=&quot;language-text&quot;&gt;...postFields&lt;/code&gt; 就像是把&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;物件展開（spread）&lt;/a&gt;一樣，能將 &lt;code class=&quot;language-text&quot;&gt;postFields&lt;/code&gt; 內聯到 &lt;code class=&quot;language-text&quot;&gt;rightPosts&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;leftPosts&lt;/code&gt; 物件中，所以最後 &lt;code class=&quot;language-text&quot;&gt;rightPosts&lt;/code&gt; 實際上是長這樣：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;query&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;rightPosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; allPosts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id
    title
    heroImage &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      title
      urlMobileSized
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;情境闡述&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E6%83%85%E5%A2%83%E9%97%A1%E8%BF%B0&quot; aria-label=&quot;情境闡述 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;情境闡述&lt;/h2&gt;
&lt;p&gt;這是我在專案碰到的情況：我需要在網站的不同頁面去取得最新文章，它們的查詢欄位大致相同，但仍有些欄位不是每個查詢都需要的。&lt;/p&gt;
&lt;p&gt;最簡單的做法當然就是每個查詢都寫好自己的欄位。這個方法很快，但缺點就是重複，之後修改共同欄位需要一次改好幾個地方。&lt;/p&gt;
&lt;p&gt;另一個方法是使用指令（&lt;a href=&quot;https://graphql.org/learn/queries/#directives&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;directives&lt;/a&gt;），藉由變數（&lt;a href=&quot;https://graphql.org/learn/queries/#variables&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;variables&lt;/a&gt;）來動態地更改欄位，比如這樣：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;query&lt;/span&gt; posts&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$shouldQueryTitle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Boolean&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  allPosts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id
    title &lt;span class=&quot;token directive function&quot;&gt;@include&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token attr-name&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$shouldQueryTitle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;若 &lt;code class=&quot;language-text&quot;&gt;shouldQueryTitle&lt;/code&gt; 為 &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt;，就會查詢 &lt;code class=&quot;language-text&quot;&gt;title&lt;/code&gt; 這個欄位，反之則不會。這個方法可行，但若需要客製化的欄位不少，實作起來會相當麻煩。&lt;/p&gt;
&lt;p&gt;fragments 能怎麼解決這個問題呢？很簡單，看共用欄位有哪些，把它們抽取成 fragment，再用 &lt;code class=&quot;language-text&quot;&gt;...&lt;/code&gt; 內聯。&lt;/p&gt;
&lt;p&gt;這個方法還有一個好處，就是它能&lt;strong&gt;內聯嵌套查詢&lt;/strong&gt;，而非在第一層就整個覆蓋。比方說，下面這塊程式碼，&lt;code class=&quot;language-text&quot;&gt;allPosts&lt;/code&gt; 有兩個 &lt;code class=&quot;language-text&quot;&gt;heroImage&lt;/code&gt; 欄位，但裡頭查詢的欄位並不同：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;query&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  allPosts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token fragment function&quot;&gt;postFields&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    heroImage &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;      urlTabletSized
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fragment&lt;/span&gt; &lt;span class=&quot;token fragment function&quot;&gt;postFields&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  id
  title
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  heroImage &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;    title
    urlMobileSized
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最後，&lt;code class=&quot;language-text&quot;&gt;heroImage&lt;/code&gt; 實際上是長這樣：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;heroImage &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  title
  urlMobileSized
  urlTabletSized
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;這可以讓我們在享受共用欄位的同時，還能客製化出不同的查詢內容。很方便吧！&lt;/p&gt;
&lt;h2 id=&quot;在多個檔案間共用-fragments&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E5%9C%A8%E5%A4%9A%E5%80%8B%E6%AA%94%E6%A1%88%E9%96%93%E5%85%B1%E7%94%A8-fragments&quot; aria-label=&quot;在多個檔案間共用 fragments permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;在多個檔案間共用 Fragments&lt;/h2&gt;
&lt;p&gt;如果你是在 Nuxt 中使用 GraphQL，可以參考 &lt;a href=&quot;https://github.com/nuxt-community/apollo-module&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;@nuxtjs/apollo&lt;/a&gt; 這個套件，它裡頭包著 &lt;a href=&quot;https://github.com/vuejs/vue-apollo&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;vue-apollo&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;要創建一個查詢，可以&lt;a href=&quot;https://apollo.vuejs.org/guide/apollo/queries.html#simple-query&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;利用 &lt;code class=&quot;language-text&quot;&gt;gql&lt;/code&gt; 標籤直接寫在 &lt;code class=&quot;language-text&quot;&gt;apollo&lt;/code&gt; 物件裡&lt;/a&gt;，也可以&lt;a href=&quot;https://github.com/apollographql/graphql-tag#importing-graphql-files&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;另開一個 &lt;code class=&quot;language-text&quot;&gt;.graphql&lt;/code&gt; 或 &lt;code class=&quot;language-text&quot;&gt;.gql&lt;/code&gt; 檔&lt;/a&gt;。我偏好後者，因為比較好管理。&lt;/p&gt;
&lt;p&gt;回到 fragments。若是用檔案管理的方法，fragments 一般來說會放在使用它的檔案中。但如果我要在多個檔案間共用一個 fragment，那該怎麼做？&lt;/p&gt;
&lt;p&gt;具體情境是這樣的：我有好幾個不同的查詢物件，它們都會去查詢 &lt;code class=&quot;language-text&quot;&gt;heroImage&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;ogImage&lt;/code&gt;，而這兩個欄位也都是物件，會去查詢 tiny、mobile、tablet、desktop、original 這五種尺寸的圖片。每次查詢都要寫這 5 * 2 個欄位，實在是有點麻煩——有沒有辦法把它們抽取成一個 fragment 呢？&lt;/p&gt;
&lt;p&gt;在單一檔案中很簡單，就直接放在下面：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;query&lt;/span&gt; latestPosts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;latestPosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; allPosts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id
    title
    heroImage &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token fragment function&quot;&gt;urls&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    ogImage &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token fragment function&quot;&gt;urls&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fragment&lt;/span&gt; &lt;span class=&quot;token fragment function&quot;&gt;urls&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Image&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  urlTinySized
  urlMobileSized
  urlTabletSized
  urlDesktopSized
  urlOriginal
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;但若要在多個檔案間共用，可以把這個 fragment 移入一個獨立的檔案。假設檔案結構長這樣：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;apollo
├─fragments
   └─image-urls.gql &amp;lt;-- `urls` fragment is here!
└─queries
   ├─editor-choices.gql
   ├─collaborations.gql
   └─posts.gql&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;要怎麼把 &lt;code class=&quot;language-text&quot;&gt;image-urls.gql&lt;/code&gt; 導入到查詢檔案中使用呢？你可能會想說直接 &lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt;，但電腦會噴錯，因為 &lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt; 是 JS 語法，GraphQL 無法辨識。&lt;/p&gt;
&lt;p&gt;那該怎麼辦？經過我一番搜索，其實你可以這麼做：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;#import &apos;../fragments/image-urls.gql&apos;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;query&lt;/span&gt; latestPosts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;latestPosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; allPosts &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id
    title
    heroImage &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token fragment function&quot;&gt;urls&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    ogImage &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token fragment function&quot;&gt;urls&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;只要在 &lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt; 前加上 &lt;code class=&quot;language-text&quot;&gt;#&lt;/code&gt; 變成註解，就能成功把 fragments 導進來囉（我猜這應該是 &lt;a href=&quot;https://github.com/creditkarma/graphql-loader&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;graphql-loader&lt;/a&gt; 的功勞，但詳細怎麼做的就不清楚了）。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[區塊鏈溯源能否打擊假照片？紐約時報架了一個社群網站來驗證這件事]]></title><description><![CDATA[透過區塊鏈技術揭露新聞更動源流，來讓大眾更好地區辨訊息真假或好壞——紐約時報發起的「新聞溯源計畫」究竟想做什麼？]]></description><link>https://yeefun.github.io/what-is-the-news-provenance-project/</link><guid isPermaLink="false">https://yeefun.github.io/what-is-the-news-provenance-project/</guid><pubDate>Tue, 04 Feb 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;向假新聞宣戰早已不是什麼新鮮事了。獨立檢證、協力查核、智能辨識⋯⋯無論手段新穎或傳統，在假訊息竄增的速度面前，似乎都顯得蒼白無力，一不小心還會惹禍上身。這不禁讓人想問：還有什麼辦法？難道真理終究戰不勝謊言？人類還有救嗎？&lt;/p&gt;
&lt;p&gt;如果你已經對於當今所有防堵假訊息的手法都感到失望，準備當個極端的懷疑論者（這也不失為一個辦法），那你也許可以稍停一下，看看我底下將要介紹的計畫，也許它能帶給你一絲希望。&lt;/p&gt;
&lt;p&gt;去年 7 月，媒體界龍頭紐約時報（The New York Times，以下簡稱紐時）發起&lt;a href=&quot;https://www.newsprovenanceproject.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;「新聞溯源計畫」（The News Provenance Project）&lt;/a&gt;，期待透過區塊鏈技術揭露新聞更動源流，來讓大眾更好地區辨訊息真假或好壞。其矛頭第一個對準的就是假照片。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;為什麼是假照片？區塊鏈在這整個計畫中的作用是什麼？「揭露新聞更動源流」是什麼意思？它能怎樣幫助我們辨別資訊？要達成這個目標，需要完成哪些事？&lt;/strong&gt;以下將一一回答。&lt;/p&gt;
&lt;h2 id=&quot;假照片破壞力強&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E5%81%87%E7%85%A7%E7%89%87%E7%A0%B4%E5%A3%9E%E5%8A%9B%E5%BC%B7&quot; aria-label=&quot;假照片破壞力強 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;假照片破壞力強&lt;/h2&gt;
&lt;p&gt;為什麼選擇假照片？理由似乎很直觀：照片比文字更容易傳播，且具有更高的可信度，因此破壞力也就愈強。據&lt;a href=&quot;https://www.niemanlab.org/2020/01/heres-how-the-new-york-times-tested-blockchain-to-help-you-identify-faked-photos-on-your-timeline/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;美國獨立智庫研究&lt;/a&gt;顯示，相較於其它形式的假訊息，美國人民對於大眾辨識假圖片或影片的信心和責任都更少。換言之，他們既覺得&lt;strong&gt;大眾沒有能力辨識，也沒有義務辨識&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;低落的防衛意識，使得假照片有大行其道的空間。隨著&lt;a href=&quot;https://opinion.cw.com.tw/blog/profile/51/article/8316&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;「深假」（deepfake）技術的進步&lt;/a&gt;，製造出高水準視覺效果的成本愈來愈低。如何在資訊生態系統崩壞之前，從結構上防制假照片的危害，顯然是當務之急。&lt;/p&gt;
&lt;h2 id=&quot;區塊鏈如何溯源&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E5%8D%80%E5%A1%8A%E9%8F%88%E5%A6%82%E4%BD%95%E6%BA%AF%E6%BA%90&quot; aria-label=&quot;區塊鏈如何溯源 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;區塊鏈如何溯源&lt;/h2&gt;
&lt;p&gt;從結構上防制？紐時究竟想怎麼做？最初的想法，是為照片加上一些&lt;strong&gt;元數據（metadata）及編輯紀錄&lt;/strong&gt;。前者如拍攝時間、地點、發布者等；後者則可想像有一條時間軸，上面記錄著誰在何時取用、發布，並做了哪些更動。&lt;/p&gt;
&lt;p&gt;舉例來說，假設阿帆今天在巴西拍到一張火噬雨林的照片，公布到臉書，並寫下：「天啊，地球之肺在燃燒！貪婪的人類終自食惡果！」阿昱看到了，順手把它載入自己的電腦。四個月後，澳洲森林發生大火，阿昱上傳這張照片，文字卻改為：「極端氣候正在吞噬澳洲！人類何時才要醒悟！」&lt;/p&gt;
&lt;p&gt;此時悠遊於臉書河道的你，猝不及防地滑到這則貼文。怵目驚心的照片使你的手指停了下來，各種情緒頓時湧上心頭——擔憂、憤怒、恐懼、羞愧——「這麼嚴重的事情，大家應該要知道啊」，你一邊想著，一邊按下分享。&lt;/p&gt;
&lt;p&gt;「欸？這是什麼？」你看到浮在照片下方的訊息區塊，裡頭有一行被黃色標起的文字：「四個月前拍攝」。&lt;/p&gt;
&lt;p&gt;「四個月前？什麼鬼？這不是現在正在發生的事嗎？」你點開區塊，看見這張照片最初拍攝的時間、地點，以及發布者（阿帆）當時的貼文內容。&lt;/p&gt;
&lt;p&gt;「殺小，該不會這是假照片吧？」你愈想愈不對勁，決定先將剛才分享貼文的隱私權限設為「只限本人」，並上網搜尋「澳洲大火」。最終你也許會發現：澳洲是真的有發生大火，但那張照片也是錯的。你不願做假訊息的幫兇，於是刪了貼文。&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1f0cc767f732d707bf90f711048f9e0c/0d0e4/macron-twitter.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 74.40677966101696%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAADlUlEQVQoz2P4+v3HlcuXX71+c//R4wePntx78Ojhk2c3Xn198+HLm/efXr//9Pbjl09ffwDZL958AJJff/z68+//tx+/vv34yfD63YeOusp7t2+dv3Tt9LkL5y9dPnvh0pnr9y5cvnbj9r0rN25dvXH79r0HV67fun7z7q2796/euHXr9r0nz14CDWEAmvH+4+dnL16ePnvhzPmLp86ev3jl2plz54GMsxcunzl/6er1m0BxoFkXLl8FCp44febUmXO3797//PUbw/efv3/8/vv+wycg//qNm1fvP7vx/OPN55+uP/986/mH9+/fv33/Aeipd++A9McPHz99+Pj50+cvb96+B/oXaPPPf//+H794Jby0Piyr0Cslv3TyitkrNk6es6B3+tyFExs2b92xfteR2UvXzV22dueJa6uO3Fqy50Lf6kOX7z1n+Pr95////zcdOS3qGChp6aHqERVdO6mqqaWypqagpKSxuWnJijUrt+yvnboio77HuniCRnqHVmqLRGDRmn2nGIChB9S87+x1g/hK9dB864SS8Myi+Kysuoa6stKCpu6Jk6ZO7e7tauyZ4Jtbz6vjwSlpxCtlyMQmvXz5eqjm/eduOOZ2BdTNjWtZkFg3xSkuN78gr6mto6x1QkN7b3trXVljW2BuE5+IlgiPohiPPAcD34rla6DO3r7/iH9BW0HPosLK5tKOOYkVnX1dbf2Tp+Q0T26fvmjeoiWTZi+t6Jhu7OHDqyQpLCrNzsC5fPkqqObNO3c7plUltc33C/UNi48sKCpduHj59o07V8xb3dLVm1ZfHl6TaxHjLeugw60vJqAmzsbJsWIFSPMPoOZ1G9fbBkUmNvS5JcSYhLo4xXhlNlWmN1YGFsYYRdoJ+igz24uymghzqgrzygsLSAuz8LAtX7kSqnnLjp3KWqr6rnZ6joZiJrK8huI8xiKslqLMliJc5lIirmqCVvL8prICRtICyqLC8mIcPBwrVsFsXrthPQMDAxMXEyM7I4MoE4MMC6M6F4M2D6M2N4MOF7MpH4MuN4MyJ4MaB4MYK5MQK1DxksVLGL7/+PX7z7/bd+43trQ0dbZ19na39XQ29XfUTm9vmNLRuqC3aWZ349yu6smtLbN62yZ1t0zoap/Y3dLWdvPmbYYv339+/PL9y/df3379BSZVoCv+/f//8+//z19///z1B8j98/f/95//Pn75+Q8sBcpTYPDz9x8AyyQfENvMdAUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;去年 8 月亞馬遜森林大火，便有許多錯誤照片在網路上瘋傳，連法國總統馬克宏都搞錯：他所分享的照片至少攝於 16 年前。圖擷自[馬克宏推特](https://twitter.com/EmmanuelMacron/status/1164617008962527232?s=20)&quot;
        title=&quot;去年 8 月亞馬遜森林大火，便有許多錯誤照片在網路上瘋傳，連法國總統馬克宏都搞錯：他所分享的照片至少攝於 16 年前。圖擷自[馬克宏推特](https://twitter.com/EmmanuelMacron/status/1164617008962527232?s=20)&quot;
        src=&quot;/static/1f0cc767f732d707bf90f711048f9e0c/fcda8/macron-twitter.png&quot;
        srcset=&quot;/static/1f0cc767f732d707bf90f711048f9e0c/fcda8/macron-twitter.png 590w,
/static/1f0cc767f732d707bf90f711048f9e0c/c83ae/macron-twitter.png 1180w,
/static/1f0cc767f732d707bf90f711048f9e0c/0d0e4/macron-twitter.png 1230w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;&lt;p&gt;去年 8 月亞馬遜森林大火，便有許多錯誤照片在網路上瘋傳，連法國總統馬克宏都搞錯：他所分享的照片至少攝於 16 年前。圖擷自&lt;a href=&quot;https://twitter.com/EmmanuelMacron/status/1164617008962527232?s=20&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;馬克宏推特&lt;/a&gt;&lt;/p&gt;&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;謝天謝地！一場錯誤內容被轉發上萬次的災難被阻止了。&lt;strong&gt;它靠的不是事後通知，也非事前審查，而是在訊息產生（或發布）當下，便在某處烙下一條不可更改的紀錄。它不做判斷，只呈現每次編輯的事實，讓讀者根據這些紀錄，自行決定要多相信這則訊息。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;「聽起來真是不錯，」你可能會問：「但我要怎麼知道這些紀錄沒有被惡意更改過？」這就是區塊鏈發揮作用的地方了。區塊鏈是一種記錄資料的技術，一旦資料「上鏈」，便&lt;strong&gt;難以被竄改&lt;/strong&gt;；同時它也是&lt;strong&gt;透明&lt;/strong&gt;的，任何更改都會被記錄，且可被看見。它能確保照片元數據和編輯紀錄的真實性。&lt;/p&gt;
&lt;h2 id=&quot;概念驗證&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E6%A6%82%E5%BF%B5%E9%A9%97%E8%AD%89&quot; aria-label=&quot;概念驗證 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;概念驗證&lt;/h2&gt;
&lt;p&gt;一個看似簡單的概念，實作起來往往有許多複雜微妙之處。&lt;/p&gt;
&lt;p&gt;比方說，我們知道這個計畫要在照片旁邊附上一些資訊，但要放哪些資訊？更深入點問：&lt;strong&gt;平常人們在社群媒體上是如何決定一張照片可不可信的？不同背景的人，在判斷資訊方面又有什麼差異？我們所設想的方案，是否真的能幫助民眾更好地辨識新聞品質？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;為了回答上述關鍵問題，紐時找了 34 位政治傾向、媒體偏好各異的成年人進行深度訪談和原型測試，從中歸納出了幾個值得參考的洞見。&lt;/p&gt;
&lt;p&gt;首先，關於民眾在社群平台上如何接收、判斷新聞資訊，紐時從「對於貼文脈絡的意識程度」（只看最顯眼的照片和標題？還是也會看發文日期、來源或網友反應？）和「對於主流媒體的信任程度」這兩條軸線，將民眾分成四種類型（來看看你比較偏向哪一種類型吧）：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;高意識、低信任——不信任媒體的懷疑者（Distrustful news skeptic）&lt;/strong&gt;：認為主流媒體都是有偏見的，並會試圖從一些線索去證明，很難與特定媒體建立信任關係。值得注意的是，這些人多半是質疑媒體的報導方式，而非事實細節。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;高意識、高信任——充滿自信的數位訂戶（Confident digital news subscriber）&lt;/strong&gt;：悠游於網路世界，樂意辨識自己信任的媒體所提供的訊息真假。他們不想與時事脫節或遭到誤導。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;低意識、低信任——討厭媒體的庶民（Media-jaded localist）&lt;/strong&gt;：覺得自己的聲音遭到主流媒體所排擠，毫不遲疑地接受非正式的激昂評論（hot takes）。他們希望新聞能夠既真實又接地氣。當自己信任的非正式來源提供錯誤訊息時，他們需要更清晰的線索才能判定。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;低意識、高信任——傳統的數位移民（Late-adopter media traditionalist）&lt;/strong&gt;：相較於網路媒體的喧囂，他們更喜歡透過電視、報紙等舊媒體來接收資訊。這類人需要學習更多的判斷技巧及明確的提示，才有辦法自己區辨訊息是否可信。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;紐時認為，照片溯源計畫至少能讓信任媒體的人受益（即 2、4 類人）。接著，他們測試多種能表示照片來源的設計，發現：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;認證標章（如臉書或 Instagram 的藍勾勾）並不足以讓照片變得可信。&lt;/li&gt;
&lt;li&gt;關於標示術語，讀者喜愛「附有來源」（sourced）更勝於「已驗證」（verified）。這代表大眾不只想知道照片已被他人驗證，&lt;strong&gt;也希望有可讓自己探索的資訊&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;陳列同一個事件的多張照片，能使讀者相信事件確實發生了。&lt;/li&gt;
&lt;li&gt;強調為人熟知的照片元數據（如圖說、發布歷史），而非會造成混亂的術語（如加密、存儲於不可更動的資料庫）。&lt;/li&gt;
&lt;li&gt;展示監督與問責的機制，有助於提升讀者信心。&lt;/li&gt;
&lt;li&gt;只需清楚呈現照片的編輯歷史，避免使用可能會失準的詞彙，如「真實」、「假」，&lt;strong&gt;因為只要出錯一次，讀者就不會再完全信任這套機制&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;紐時將這些發現整合進一個模擬社群網站的原型，經過兩輪測試，確認了來源資訊確實有效，而且即使是質疑新聞立場的讀者，也沒有懷疑來源資訊的真實性。&lt;/p&gt;
&lt;p&gt;不過仍有要改善的地方，包括有許多人根本沒注意到錯誤訊息、讀者很難理解為什麼來源訊息與照片描述不符。最有趣的是，對於照片編輯的歷史紀錄，讀者並不怎麼感興趣；反之，他們想瞭解照片所描述事件的相關新聞。這引出了一個洞見：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;民眾上社群網站不是為了查核事實，而是為了娛樂和建立聯繫。他們之所以願意停下來考察更多資訊，不是因為他們想證明這張照片是錯的，而是因為他們被與照片相連的故事引起了興趣。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;紐時認知到，這種傾向雖造成民眾容易為網路圖片所騙，但他們也能利用這點，讓溯源的過程不只有驗證的功能，還可以幫助讀者對自己關心的事情形成更準確、細緻的認識。&lt;/p&gt;
&lt;p&gt;吸取以上教訓，最終紐時建出了這個&lt;a href=&quot;https://poc.newsprovenanceproject.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;概念原型&lt;/a&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;來源資訊區塊變大了，裡頭增加了一些可引人注意的細節（如照片拍攝距今已多久）。&lt;/li&gt;
&lt;li&gt;展開資訊區塊，你可以看見上面有一塊醒目的提示，它能喚起讀者對於假照片的警戒。&lt;/li&gt;
&lt;li&gt;區塊下方列出關於同一事件的其它照片與文章連結，供讀者進一步探索。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/191e1690a5e7a0b0d4cea66aa80eb18d/0d0e4/poc-1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 105.08474576271185%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsSAAALEgHS3X78AAAEWUlEQVQ4y4VUe0yTVxTv3F/DjJciUGRzMDpLVwoykEeBQqFUXjNGMA5WWh5GpDjfU1EXIWMsMS4bjEXYBBnEtYgrUEpbGIQFdKPUxQm0tGa40RelT7D9vj6+dvcT8I9ly05Ofvndm/u7j3POPRgIghxO1NzAEBTA8B/u3EKny7XhLrcbgmAMmJVIn2i1eqPRpNWumM1W7/8Z2MNmhx2wAwOj6FyzrmmBdEW3qtebjUbD6orZaLCYTRazYd1qsq1ZrOZVxAVvyT3A4Q0xGNnskMFotTx3WGxOk82pM8N6E6TTQ6oVSGVyPVt1KXVOhc4j03rnVJ7ZPzxzy15UDN4MxL/NSju+ap0Qjz9VmRc1a5I5zfiUjMeb5gqWObPeb6eRGyJP/YD3eI/naDuS0ogcbUHskANjt9uBWMzrq6ImdF9mCVuvDLQ1d3z6ydCdjv7b7SLRzMRjZETu4T72fjOJfC7yXOJ5GLc9V/o9INAYyG4DYslgV1uhT0cJtr047E5V7DlaQju7SNrTMCUWCkYeCCcVY4sOwVNvtxT5csJ9aQD5YvyFGIZQsXG2U9b06mJz4O/1AVN1vhwG9iZtR1d1yvlqNvNI1THGSRbzs+/uySb+9AiXvLd+QXokyIuAQei1DY+4g+wQRbO/8JjPfFPweO2On8/4T7C3N9KiKpPj6TGkeFJeZm7TR9cfdo5px565Z3Re6OWbJ4c4Z+lRrcz97WXE/uNR/HOE4cvEwfOEAVZII+0txr7I9zOyabln0rKuhhPqUw938qaWQbFsiqcF909l4y4UJTeUpLcUx7YUx906iGs7SPi6IPJGVuj1QlLVoYJDhYezsxlxqRd2x179oI7rcGyJf+X3XKTu/Dg3/BottIke1pCDbTwQfu3Anot5b5/M31uSHZ2TTkhPeZdCfi8jg0KMI7OqT6PlabOhYi73Lg4XmpmKp6fh6WRcXto7+RRCfhaJRiHmZsbnURMyyaTUJFJSYkzy/hj83ojS0iMw/FLMuYvHhZGT8OkpBEoKPictmpZBpGfG0igkahoxi0xMToxOSiTG7yOQSNERkW+WlZXCL05GU9XV1bltGyZop29wkB82xC8MG/BGeGDEnl27sQEhwb67gl7393stMMDHzw/49lcwGCo1A03Vxsm9vb0FRUUVlZXlTBaTVfFhOZNRzgSEwWQBUs6sqDlRW8uuA1Bzgl3KrGHXnbJaLCBgaG0PDw8/kj7RaPUa7Yparf1rWa1SaZdVGkAAarQ6i9W29twJwW7YidgcXv6wUKPRbEb7Xn/fdLd6Sa6WyeeVCqVSoZDL5Qvz87KFBeAK5dK8dPTh/dMP+s9qlD/BDldfH0etVm/+KolkhvNDn1gkFowI+HxwD4FQKERRJBSPisWjY2IRf2SwZ+jH70UCHhjz+fz19fXN/4wgiMFgBHkHFzEYTCaTBXCAoPP8Vz9xONDyhMA6wEBjAhsBDghoNIBvzIBi+Fe32e1/AzpoXX5hHt1iAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;概念原型：展開前。圖擷自[新聞溯源概念原型網頁](https://poc.newsprovenanceproject.com/)&quot;
        title=&quot;概念原型：展開前。圖擷自[新聞溯源概念原型網頁](https://poc.newsprovenanceproject.com/)&quot;
        src=&quot;/static/191e1690a5e7a0b0d4cea66aa80eb18d/fcda8/poc-1.png&quot;
        srcset=&quot;/static/191e1690a5e7a0b0d4cea66aa80eb18d/fcda8/poc-1.png 590w,
/static/191e1690a5e7a0b0d4cea66aa80eb18d/c83ae/poc-1.png 1180w,
/static/191e1690a5e7a0b0d4cea66aa80eb18d/0d0e4/poc-1.png 1230w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;&lt;p&gt;概念原型：展開前。圖擷自&lt;a href=&quot;https://poc.newsprovenanceproject.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;新聞溯源概念原型網頁&lt;/a&gt;&lt;/p&gt;&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/78cc90cb492d690d33aae3b16fd64206/0d0e4/poc-2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 126.10169491525424%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsSAAALEgHS3X78AAAEh0lEQVQ4y3VUXWxTZRiuXMiFLrIhEgY4QxYlIzIMidERNsMY4sh+cOIgsgs0XBgvjYl6A9HAlV55wQ0yXLfVubrunNF2Y5ERliWuW9uNruv6/39OT7ue/7+e9vT4no5l1eCbJ2++Nt9z3vd5vvf7DIIgapo2NmY6+ubB1pamtlPH2lqOdrQ2fdh2/PwHzefamttbj59tbW55r+n9d98+efLYOyeaGhsbBgauSrJsEAQByEND93e/+ML+/Xvq62sPH9rT8HrdkTf2vtV44EjDq4cP1tYfeGXf3pde21dTV/dybW3Nrl2Gjo52WS4YtiobjcaWU6d7LvZ1917U0aPn3o/7unp6u7p7u2F1qf+TTy9fAvRf6ezq+/yL6yzLGkRRAvLU1NT8k8fRaDARD8WiwUjYH40E4GcsGoiEYBEiyU2GoRiapKnNbJ43TyAYhgFZr4yiD6iAkQr+EVubSa5PJ7z2mMcW99gS3mlsw57xW9NeFPehybXJlBfRqAU7OpLCMs8qoyiaiy8VaB9D6KAyPjKzQeIbedzP5XwyuSaRXpn0Svk1gCaFbQ/M6TT+jIwgKE1ToqIRdDnHaIKsCgIniCLYyQtiuVzWtmNrbZ+eTqXT25Wn0PUZisop+CaLZ9lNkqFpmqSoPElSNM1VguXAI5aiKNg/PTOzQ0ZQJPmUS8Uwp2vJ41ldWXG7XO7FxUWXy+V0Ot1u9zLEksPh+BvH0jq5ujKCIPBVHM84HED2OoHqdgcCgXA4DNnv9wdDkVA0HYlnonHsOWSaYkAhQeD5zVwuR4AFpVKpWImSWlYkkk3MkmFUyK3qmu32Ks0oCmLAC4ZXOEkFw6RCsagohYICSSmqMp9jY1YyZBZzK88hkxUneLFIs3KO5ERZ0StvAYqXSkpJ42WN4WQIm82WTmM7bTOM7jCO47Fo1O/zJZNJ6EU3mWVpBhTxksBXFGVhrqxWazUZhSOBVimuSPMluQDVFAAULKklFaKs/u8564bRdEESaIrkeJEVRHBpZzDUslbWiqqmqBp87b9uWyYRRaTNC9K3d4nbt3/5+ZtrzvmZ0JLV8QidX6cnPFowX34UL/wVkX/1qlMJzWafTleRJ4syNz6XutJ/7ce+Q3cGapyzRsuNj+707P6yt/3q1/f8hBwgmNkFz9CTwBIOhtmryBYLiPtt8G7n2RNfXb/wWf+Zhw+tP9z4vv/C6cu9ZzrPn3Ovro6Y79366ebNW9+h6LDNbv+X27rmQiGT3SRyJA8HXS5TNINlsmmckCQJTjuVSuBYMhGPgvMz1bMN50xks2BqxeGiqpZgd+UuMJIkqrr3MDTwv1qqGFlpe/sxMJvN6JRt1eNbcnkdzrVKfgp52eV1rqwvu70Ah9OzvhFOYQRO5EdMY2lsu+25ubnBwft/TiBDI5ZhEzL8OzpssgyNTgKMJh1DoxbjKGIas0xMWMbHJ4zGYZgcAzyCQAZV/kAQOsdxLBQMhSNhmKVIOAwjJYq8wHP62wDgOZ7Xp06pjL1BlCTQqN8csKgSoEq/R2UNklr1hlQHbIN6/wCpILhrQ8BlzAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;概念原型：照片概觀。圖擷自[新聞溯源概念原型網頁](https://poc.newsprovenanceproject.com/)&quot;
        title=&quot;概念原型：照片概觀。圖擷自[新聞溯源概念原型網頁](https://poc.newsprovenanceproject.com/)&quot;
        src=&quot;/static/78cc90cb492d690d33aae3b16fd64206/fcda8/poc-2.png&quot;
        srcset=&quot;/static/78cc90cb492d690d33aae3b16fd64206/fcda8/poc-2.png 590w,
/static/78cc90cb492d690d33aae3b16fd64206/c83ae/poc-2.png 1180w,
/static/78cc90cb492d690d33aae3b16fd64206/0d0e4/poc-2.png 1230w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;&lt;p&gt;概念原型：照片概觀。圖擷自&lt;a href=&quot;https://poc.newsprovenanceproject.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;新聞溯源概念原型網頁&lt;/a&gt;&lt;/p&gt;&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f58348e4363a5d89f7608be67216f9b0/0d0e4/poc-3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.59322033898305%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABp0lEQVQoz3WRXVPaQBSG/f//oR2VltEh2CEgcCVFsTeC9Ko3LViEfIHZkGS/N5vTkwanVcczz7xzdnfefffjiHMBAK7biaNfpQxltkY09RUNNQtRESv+UfAAbDy47Hief1SbO66b7BNtbJqLjAomCy8Gn8AmhiABW0IJz5QoMBgMPc87mHsDdzkl4gmYpDmljLM8p3meZ1m2T/eMMaiqNMZIqV6buz03WJFCgpCCCyHkc6lCKiu1LQrQBRS21Ma8Se67q3kiCSYzzMVsxnBFClVyCRUKl94zdy9X4U9lqVZGKaWNRsHGGKsNVBSVKgMGz/D62G5vEy2FYcGW72IWPgmScs6ZkJYKQJiAnKOWuOkbc9cNt8nShyCKgyjBPojILk4JIXm2h/+qfu3h8IW5u93uMmYXj2S53i9WBHnYZJQro/Gah8LrSFW9dr/fr/+Z46DlOC3ny930+/h2htx8m48n0/FkNrqZXd/ef53g5P3V9d10/mPxsP796Dc+NX0/OCRfjUYfPh6fty5OP7drGs1KT/42jWY9f9E8a7ec9tm5c3xymqbpH0JbUgyGRrNnAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;概念原型：照片歷史紀錄。圖擷自[新聞溯源概念原型網頁](https://poc.newsprovenanceproject.com/)&quot;
        title=&quot;概念原型：照片歷史紀錄。圖擷自[新聞溯源概念原型網頁](https://poc.newsprovenanceproject.com/)&quot;
        src=&quot;/static/f58348e4363a5d89f7608be67216f9b0/fcda8/poc-3.png&quot;
        srcset=&quot;/static/f58348e4363a5d89f7608be67216f9b0/fcda8/poc-3.png 590w,
/static/f58348e4363a5d89f7608be67216f9b0/c83ae/poc-3.png 1180w,
/static/f58348e4363a5d89f7608be67216f9b0/0d0e4/poc-3.png 1230w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;&lt;p&gt;概念原型：照片歷史紀錄。圖擷自&lt;a href=&quot;https://poc.newsprovenanceproject.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;新聞溯源概念原型網頁&lt;/a&gt;&lt;/p&gt;&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;大家可以自己點進&lt;a href=&quot;https://poc.newsprovenanceproject.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;網頁&lt;/a&gt;玩玩，看這樣的來源標示是否有助於你判斷貼文內容的真假或好壞。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;這是個令人振奮的開始——但也只是開始。目前的原型僅僅是最末端的呈現，要達到預期中的效果，紐時需要跨界合作，&lt;strong&gt;建立一套從拍攝到發布的體系&lt;/strong&gt;，且其運作流程還要好上手，以免排擠較小的新聞機構。這顯然是一項極為艱難的任務。&lt;/p&gt;
&lt;p&gt;「當前的工作是確保大家以一致的方式來紀錄元數據，並讓這些資料能被其它組織（如社群平台）負責任地使用。」紐時研發團隊執行長 Marc Lavallee 說。他們在&lt;a href=&quot;https://www.newsprovenanceproject.com/whats-next&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;官網&lt;/a&gt;公開徵求三種合作夥伴——社群平台、新聞編輯室、事實查核組織——來一起把計畫推展到下一階段：執行。&lt;/p&gt;
&lt;p&gt;一個更好的網際網路會是什麼樣子？這是紐時對於這個大哉問的初步回答。即使它最終失敗了，整個設計過程——從問題定義、用戶研究、概念發想到原型測試——仍有許多值得我們深思和借鏡的地方。&lt;/p&gt;
&lt;h2 id=&quot;相關資料&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E7%9B%B8%E9%97%9C%E8%B3%87%E6%96%99&quot; aria-label=&quot;相關資料 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;相關資料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.newsprovenanceproject.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;The News Provenance Project&lt;/a&gt;——新聞溯源計畫官網，裡頭將計畫目前的成果與潛力做了一個清楚且頗具啟發性的闡述，推薦你把它從頭到尾看完。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://poc.newsprovenanceproject.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Proof of Concept&lt;/a&gt;——新聞溯源的概念原型，來玩看看吧！&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://open.nytimes.com/how-do-people-decide-whether-to-trust-a-photo-on-social-media-e0016b6080ae&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;How Do People Decide Whether to Trust a Photo on Social Media?&lt;/a&gt;——社群媒體上的讀者是怎麼判斷一張照片可不可信的？這是紐時訪談後的發現。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://open.nytimes.com/what-if-every-news-photo-on-social-media-showed-contextual-information-8936cf4e8c45&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;What If Every News Photo on Social Media Showed Contextual Information?&lt;/a&gt;——紐時測試原型的過程。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://open.nytimes.com/can-publishers-use-metadata-to-regain-the-publics-trust-in-visual-journalism-ee32707c5662&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Can Publishers Use Metadata to Regain the Public’s Trust in Visual Journalism?&lt;/a&gt;——簡單描述了整個新聞溯源計畫及未來展望。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.niemanlab.org/2020/01/heres-how-the-new-york-times-tested-blockchain-to-help-you-identify-faked-photos-on-your-timeline/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Here’s how The New York Times tested blockchain to help you identify faked photos on your timeline&lt;/a&gt;——尼曼新聞實驗室對這個計畫的報導。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://open.nytimes.com/introducing-the-news-provenance-project-723dbaf07c44&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Introducing the News Provenance Project&lt;/a&gt;——去年 7 月，紐時在 Medium 上介紹了這個計畫。&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item></channel></rss>