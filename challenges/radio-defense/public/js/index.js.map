{"version":3,"sources":["index.js"],"names":["updateFPS","time","globalColor","red","orange","blue","blueDark","white","startBtn","document","getElementById","cover","gameInfo","addEventListener","game","startGame","once","gui","dat","GUI","Vec2","x","y","v","s","Math","sqrt","newVal","newLength","unit","mul","set","atan2","length","canvas","ctx","getContext","ww","wh","gameW","gameH","$triLineTo","r","angle","angleAdd","lineTo","cos","degToPi","sin","initCanvas","width","height","documentElement","clientWidth","clientHeight","PI","coverCircle","coverTriangle","coverPolygon","circles","triangles","subTriangles","polygons","Game","args","def","isGameStart","shooter","currentLevel","isInLevel1","Object","assign","render","update","fillStyle","fillRect","draw","forEach","circle","triangle","polygon","subTriangle","drawCover","requestAnimationFrame","setLevelOne","circleIdx","shooterBullets","bullet","bulletIdx","anglePan","asin","rotationAxisR","shotAngleRange","rotateAngle","rotationAxisAngle","shotRRange","splice","hP","setTimeout","save","translate","beginPath","arc","strokeStyle","stroke","globalAlpha","restore","drawBattery","rotate","moveTo","closePath","fill","style","display","Shooter","cursor","push","Circle","rotationAxisPos","rotationAxisRV","rotationAxisAngleV","rotateV","color","bullets","beforeShootTime","Date","beforeRotateTime","isRotating","circleBigR","circleSmallR","subRotationAxisR","originalPos","shootTime","CircleBullet","p","rotateTime","TweenLite","to","ease","Power2","easeOut","onComplete","Triangle","isReproduce","triangleOuterBigR","triangleInnerBigR","triangleInnerSmallR","TriangleBullet","i","TriangleSub","order","Polygon","isSplited","drawLightning","shadowColor","shadowBlur","lineWidth","outerR","x1","y1","x2","y2","shieldR","shoot","mouseMoveAngle","ShooterBullet","isReproduceMoving","scale","Power1","easeIn","movePos","add","handleLoad","init","window","mouseMovePos","handleMouseMove","evt","handleClick"],"mappings":"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","file":"index.js","sourcesContent":["/* Environment Variable */\r\nconst updateFPS = 30;\r\n// const showMouse = true;\r\n// const bgColor = 'black';\r\nlet time = 0;\r\n\r\nconst globalColor = {\r\n  red: \"#e7465d\",\r\n  orange: \"#f5af5f\",\r\n  blue: \"#3676bb\",\r\n  blueDark: \"#001d2e\",\r\n  white: \"#fff\",\r\n};\r\n\r\nconst startBtn = document.getElementById('start-btn');\r\nconst cover = document.getElementById('cover');\r\nconst gameInfo = document.getElementById('info');\r\nstartBtn.addEventListener('click',\r\n  function() {\r\n    game.startGame();\r\n  },\r\n  {\r\n    once: true,\r\n  }\r\n);\r\n\r\n\r\n/* GUI Controls */\r\n// const controls = {\r\n//   value: 0,\r\n// }\r\n\r\nconst gui = new dat.GUI();\r\n// gui.add(controls, 'value', -2, 2).step(0.01).onChange((value) => {});\r\n\r\n\r\n\r\n\r\n\r\n/* 2D Vector Class */\r\nclass Vec2 {\r\n  constructor(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  set(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n  move(x, y) {\r\n    this.x += x;\r\n    this.y += y;\r\n  }\r\n  add(v) {\r\n    return new Vec2(this.x + v.x, this.y + v.y);\r\n  }\r\n  sub(v) {\r\n    return new Vec2(this.x - v.x, this.y - v.y);\r\n  }\r\n  mul(s) {\r\n    return new Vec2(this.x * s, this.y * s);\r\n  }\r\n  clone() {\r\n    return new Vec2(this.x, this.y);\r\n  }\r\n  equal(v) {\r\n    return this.x === v.x && this.y === v.y;\r\n  }\r\n  // toString() {\r\n  //   return `(${this.x}, ${this.y})`;\r\n  // }\r\n\r\n  get length() {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y);\r\n  }\r\n  set length(newVal) {\r\n    const newLength = this.unit.mul(newVal);\r\n    this.set(newLength.x, newLength.y);\r\n  }\r\n  get angle() {\r\n    return Math.atan2(this.y, this.x);\r\n  }\r\n  get unit() {\r\n    return this.mul(1 / this.length);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/* Initialize Canvas Settings */\r\nconst canvas = document.getElementById('game');\r\nconst ctx = canvas.getContext('2d');\r\nlet ww;\r\nlet wh;\r\nlet gameW;\r\nlet gameH;\r\n\r\n// ctx.circle = function (v, r) {\r\n//   this.arc(v.x, v.y, r, 0, Math.PI * 2);\r\n// }\r\n// ctx.line = function (v1, v2) {\r\n//   this.moveTo(v1.x, v1.y);\r\n//   this.lineTo(v2.x, v2.y);\r\n// }\r\n\r\nctx.$triLineTo = function(r, angle, angleAdd = 0) {\r\n  return ctx.lineTo(r * Math.cos(angle * degToPi + angleAdd), r * Math.sin(angle * degToPi + angleAdd));\r\n}\r\n\r\nfunction initCanvas() {\r\n  gameW = canvas.width;\r\n  gameH = canvas.height;\r\n  ww = document.documentElement.clientWidth;\r\n  wh = document.documentElement.clientHeight;\r\n}\r\n// initCanvas();\r\n\r\n\r\n\r\n\r\n\r\nconst degToPi = Math.PI / 180;\r\n// let circles = [];\r\nlet coverCircle;\r\nlet coverTriangle;\r\nlet coverPolygon;\r\nlet game;\r\n\r\nlet circles = [];\r\nlet triangles = [];\r\nlet subTriangles = [];\r\nlet polygons = [];\r\n\r\nclass Game {\r\n  constructor(args) {\r\n    const def = {\r\n      isGameStart: true,\r\n      // isGameStart: false,\r\n      shooter: null,\r\n      currentLevel: 1,\r\n      isInLevel1: false,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  init() {\r\n    // coverCircle = new Circle({\r\n    //   rotationAxisR: 380,\r\n    //   rotationAxisAngle: -36,\r\n    //   r: 39,\r\n    // });\r\n    // coverTriangle = new Triangle({\r\n    //   rotationAxisR: {\r\n    //     x: 320,\r\n    //     y: 320,\r\n    //   },\r\n    //   rotationAxisAngle: 40,\r\n    //   rotate: 32,\r\n    //   r: 44,\r\n    // });\r\n    // coverPolygon = new Polygon({\r\n    //   p: {\r\n    //     x: 72,\r\n    //     y: 96,\r\n    //   },\r\n    //   scale: 1.25,\r\n    // });\r\n    this.startGame();\r\n    this.render();\r\n    this.update();\r\n  }\r\n  render() {\r\n    ctx.fillStyle = globalColor.blueDark;\r\n    // ctx.fillStyle = \"rgba(0, 0, 255, 0.1)\"\r\n    ctx.fillRect(0, 0, gameW, gameH);\r\n    if (this.isGameStart) {\r\n      // 繪製 shooter\r\n      this.shooter.draw();\r\n      // 繪製 circles\r\n      circles.forEach((circle) => {\r\n        circle.draw();\r\n      });\r\n      // 繪製 triangles\r\n      triangles.forEach((triangle) => {\r\n        triangle.draw();\r\n      });\r\n      // 繪製 polygons\r\n      polygons.forEach((polygon) => {\r\n        polygon.draw();\r\n      });\r\n      // 繪製 sub triangles\r\n      subTriangles.forEach((subTriangle) => {\r\n        subTriangle.draw();\r\n      });\r\n    } else {\r\n      // this.startGame();\r\n      this.drawCover();\r\n    }\r\n    requestAnimationFrame(() => { this.render() });\r\n  }\r\n  update() {\r\n    time += 1;\r\n    if (this.isGameStart) {\r\n      // 判斷現在是第幾關\r\n      if (this.currentLevel === 1 && !this.isInLevel1) {\r\n        this.setLevelOne();\r\n        this.isInLevel1 = true;\r\n      }\r\n      // 更新 shooter\r\n      this.shooter.update();\r\n      // 更新 circle\r\n      circles.forEach((circle, circleIdx) => {\r\n        circle.update();\r\n        \r\n        shooterBullets.forEach((bullet, bulletIdx) => {\r\n          // 取兩個外切線所構成角度的一半\r\n          const anglePan = Math.asin(circle.r / circle.rotationAxisR);\r\n          // 設中角度範圍\r\n          const shotAngleRange = bullet.rotateAngle >= (circle.rotationAxisAngle * degToPi - anglePan) && bullet.rotateAngle <= (circle.rotationAxisAngle * degToPi + anglePan);\r\n          // 設中距離範圍\r\n          const shotRRange = (bullet.rotationAxisR + 15 + 11) >= circle.rotationAxisR && bullet.rotationAxisR + 15 - 11 <= circle.rotationAxisR;\r\n\r\n          // 判斷子彈有無射中圓形\r\n          if (shotAngleRange && shotRRange) {\r\n            // 移除子彈\r\n            shooterBullets.splice(bulletIdx, 1);\r\n            // 扣 1 生命值\r\n            circle.hP -= 1;\r\n            if (circle.hP === 0) {\r\n              // 若生命值 0，移除圓形\r\n              circles.splice(circleIdx, 1);\r\n            }\r\n          }\r\n        });\r\n      });\r\n      // 更新 triangles\r\n      triangles.forEach((triangle) => {\r\n        triangle.update();\r\n      });\r\n      // 更新 polygons\r\n      polygons.forEach((polygon) => {\r\n        polygon.update();\r\n      });\r\n      // 更新 sub triangles\r\n      subTriangles.forEach((subTriangle) => {\r\n        subTriangle.update();\r\n      });\r\n    }\r\n    setTimeout(() => { this.update() }, 1000 / updateFPS);\r\n  }\r\n  drawCover() {\r\n    // 中央兩白圈\r\n    ctx.save();\r\n      ctx.translate(gameW / 2, gameH / 2);\r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, 180, 0, Math.PI * 2);\r\n      ctx.strokeStyle = globalColor.white;\r\n      ctx.stroke();\r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, 264, 0, Math.PI * 2);\r\n      ctx.globalAlpha = 0.3;\r\n      ctx.stroke();\r\n    ctx.restore();\r\n    // 黃圓\r\n    coverCircle.draw();\r\n    coverCircle.update();\r\n    // 藍三角\r\n    coverTriangle.draw();\r\n    coverTriangle.update();\r\n    // 紅多邊形\r\n    coverPolygon.draw();\r\n    coverPolygon.update();\r\n    // 電池\r\n    drawBattery({\r\n      x: gameW / 2 - 24,\r\n      y: gameH / 2 - 51.8,\r\n    });\r\n    // R 字小角裝飾\r\n    ctx.save();\r\n      ctx.translate(gameW / 2 + 24, gameH / 2 - 30);\r\n      ctx.rotate(-132 * degToPi);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(4, 0);\r\n      ctx.lineTo(0, -8.4);\r\n      ctx.lineTo(-4.2, 0);\r\n      ctx.closePath();\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  startGame() {\r\n    this.isGameStart = true;\r\n    cover.style.display = 'none';\r\n    gameInfo.style.display = 'block';\r\n    this.shooter = new Shooter();\r\n    canvas.style.cursor = 'pointer';\r\n  }\r\n  setLevelOne() {\r\n    circles.push(new Circle({\r\n      rotationAxisR: 200,\r\n      rotationAxisAngle: 150,\r\n    }));\r\n    // triangles.push(new Triangle({\r\n    //   rotationAxisR: {\r\n    //     x: 280,\r\n    //     y: 280,\r\n    //   },\r\n    //   rotationAxisAngle: 40,\r\n    //   // rotate: 36,\r\n    // }));\r\n    // polygons.push(new Polygon({\r\n    //   rotationAxisR: 280,\r\n    //   rotationAxisAngle: 220,\r\n    //   // scale: 0.8,\r\n    // }));\r\n  }\r\n}\r\n\r\n\r\n\r\n/* Circle Class */\r\nclass Circle {\r\n  constructor(args) {\r\n    const def = {\r\n      rotationAxisPos: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      rotationAxisR: 0,\r\n      rotationAxisAngle: 0,\r\n      r: 22,\r\n      rotate: 0,\r\n      rotationAxisRV: 0.01,\r\n      rotationAxisAngleV: 0.4,\r\n      rotateV: 0.4,\r\n      color: globalColor.orange,\r\n      hP: 2,\r\n      bullets: [],\r\n      beforeShootTime: new Date(),\r\n      beforeRotateTime: new Date(),\r\n      isRotating: false,\r\n      // beforeRotateAxisAngleTime: new Date(),\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  get originalPos() {\r\n    return {\r\n      x: this.rotationAxisPos.x + this.rotationAxisR * Math.cos(this.rotationAxisAngle * degToPi),\r\n      y: this.rotationAxisPos.y + this.rotationAxisR * Math.sin(this.rotationAxisAngle * degToPi),\r\n    };\r\n  }\r\n  draw() {\r\n    const circleBigR = this.r + 5;\r\n    const circleSmallR = this.r - 10;\r\n    const subRotationAxisR = 14;\r\n    ctx.save();\r\n      ctx.translate(this.originalPos.x, this.originalPos.y);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      // 大淡圓\r\n      ctx.beginPath();\r\n      ctx.arc(-4, 0, circleBigR, 0, Math.PI * 2);\r\n      ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n      ctx.fill();\r\n      // 小淡圓\r\n      ctx.beginPath();\r\n      ctx.arc(20, 0, circleSmallR, 0, Math.PI * 2);\r\n      ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n      ctx.fill();\r\n      // 主體圓\r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n      // 小三圓\r\n      ctx.beginPath();\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.arc(subRotationAxisR, 0, 2.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.arc(subRotationAxisR * Math.cos(120 * degToPi), subRotationAxisR * Math.sin(120 * degToPi), 2.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.arc(subRotationAxisR * Math.cos(240 * degToPi), subRotationAxisR * Math.sin(240 * degToPi), 2.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // 神經\r\n      ctx.beginPath();\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.lineTo(8, 0);\r\n      ctx.$triLineTo(2, 32);\r\n      ctx.$triLineTo(12, 120);\r\n      ctx.$triLineTo(2.4, 176);\r\n      ctx.$triLineTo(8, 240);\r\n      ctx.$triLineTo(1.6, 320);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 子彈\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update() {\r\n    if (this.rotationAxisAngle >= 360) {\r\n      this.rotationAxisAngle = 0;\r\n    }\r\n    // this.rotationAxisR -= this.rotationAxisRV;\r\n    if (!this.isRotating) {\r\n      this.rotationAxisAngle += this.rotationAxisAngleV;\r\n    }\r\n    // this.rotate += this.rotateV;\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.update();\r\n    });\r\n    const shootTime = new Date();\r\n    if (shootTime - this.beforeShootTime > 1200) {\r\n      this.bullets.push(new CircleBullet({\r\n        p: {\r\n          x: this.originalPos.x,\r\n          y: this.originalPos.y,\r\n        },\r\n        rotate: this.rotate,\r\n      }));\r\n      this.beforeShootTime = shootTime;\r\n    }\r\n    const rotateTime = new Date();\r\n    if (rotateTime - this.beforeRotateTime > 4000) {\r\n      this.isRotating = true;\r\n      TweenLite.to(this, 0.8, {\r\n        // rotate: this.rotationAxisAngle - 150,\r\n        rotate: '+=40',\r\n        ease: Power2.easeOut,\r\n        onComplete: () => {\r\n          this.isRotating = false;\r\n        },\r\n      });\r\n      this.beforeRotateTime = rotateTime;\r\n    }\r\n    // const rotateAxisAngleTime = new Date();\r\n    // if (rotateAxisAngleTime - this.beforeRotateAxisAngleTime > 2000) {\r\n    //   TweenLite.to(this, 0.8, {\r\n    //     rotationAxisAngle: '+=16',\r\n    //     ease: Power2.easeOut,\r\n    //   });\r\n    //   this.beforeRotateAxisAngleTime = rotateAxisAngleTime;\r\n    // }\r\n  }\r\n}\r\n\r\n\r\n\r\n/* Triangle Class */\r\nclass Triangle {\r\n  constructor(args) {\r\n    const def = {\r\n      rotationAxisPos: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      rotationAxisR: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      rotationAxisAngle: 0,\r\n      r: 26,\r\n      rotate: 0,\r\n      v: -0.4,\r\n      color: globalColor.blue,\r\n      bullets: [],\r\n      beforeShootTime: new Date(),\r\n      hP: 4,\r\n      isReproduce: false,\r\n      // canMove: true,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  get originalPos() {\r\n    return {\r\n      x: this.rotationAxisPos.x + this.rotationAxisR.x * Math.cos(this.rotationAxisAngle * degToPi),\r\n      y: this.rotationAxisPos.y + this.rotationAxisR.y * Math.sin(this.rotationAxisAngle * degToPi),\r\n    };\r\n  }\r\n  draw() {\r\n    const triangleOuterBigR = this.r + 4;\r\n    const triangleInnerBigR = this.r - 16;\r\n    const triangleInnerSmallR = this.r - 22;\r\n    ctx.save();\r\n      // 淡三角\r\n      ctx.translate(this.originalPos.x, this.originalPos.y);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      ctx.save();\r\n        ctx.translate(2, -Math.sqrt(12));\r\n        ctx.beginPath();\r\n        ctx.moveTo(triangleOuterBigR * Math.cos(0), triangleOuterBigR * Math.sin(0));\r\n        ctx.lineTo(triangleOuterBigR * Math.cos(120 * degToPi), triangleOuterBigR * Math.sin(120 * degToPi));\r\n        ctx.lineTo(triangleOuterBigR * Math.cos(240 * degToPi), triangleOuterBigR * Math.sin(240 * degToPi));\r\n        ctx.closePath();\r\n        ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n        ctx.fill();\r\n      ctx.restore();\r\n      // 主體三角\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.r * Math.cos(0), this.r * Math.sin(0));\r\n      ctx.lineTo(this.r * Math.cos(120 * degToPi), this.r * Math.sin(120 * degToPi));\r\n      ctx.lineTo(this.r * Math.cos(240 * degToPi), this.r * Math.sin(240 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n      // 大白三角\r\n      ctx.translate(-3.2, -1.6);\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(triangleInnerBigR * Math.cos(30 * degToPi), triangleInnerBigR * Math.sin(30 * degToPi));\r\n      ctx.lineTo(triangleInnerBigR * Math.cos(90 * degToPi), triangleInnerBigR * Math.sin(90 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 小白三角\r\n      ctx.translate(0, -8.8);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(triangleInnerSmallR * Math.cos(30 * degToPi), triangleInnerSmallR * Math.sin(30 * degToPi));\r\n      ctx.lineTo(triangleInnerSmallR * Math.cos(90 * degToPi), triangleInnerSmallR * Math.sin(90 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 子彈\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update() {\r\n    // this.rotationAxisAngle += this.v;\r\n    // this.rotate += this.v;\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.update();\r\n    });\r\n    // const shootTime = new Date();\r\n    // if (shootTime - this.beforeShootTime > 1000) {\r\n    if (!this.bullets.length) {\r\n      this.bullets.push(new TriangleBullet({\r\n        p: {\r\n          x: this.originalPos.x,\r\n          y: this.originalPos.y,\r\n        },\r\n        rotate: this.rotate,\r\n      }));\r\n    }\r\n    // 派副三角形攻擊\r\n    if (this.hP === 4 && !this.isReproduce) {\r\n      for (let i = 1; i <= 2; i += 1) {\r\n        subTriangles.push(new TriangleSub({\r\n          rotationAxisR: {\r\n            x: this.rotationAxisR.x,\r\n            y: this.rotationAxisR.y,\r\n          },\r\n          rotationAxisAngle: this.rotationAxisAngle,\r\n          rotate: this.rotate,\r\n          order: i,\r\n        }));\r\n      }\r\n      this.isReproduce = true;\r\n    }\r\n      // this.beforeShootTime = shootTime;\r\n    // }\r\n    // if (this.canMove) {\r\n    //   this.canMove = false;\r\n    //   setTimeout(() => {\r\n    //     TweenLite.to(this, 0.8, {\r\n    //       // rotationAxisAngle: `${Math.random() < 0.5 ? '-=' : '+='}${Math.random() * 30 + 15}`,\r\n    //       rotationAxisAngle: '+=90',\r\n    //       ease: Sine.easeInOut,\r\n    //       // onComplete: () => {\r\n    //       //   this.canMove = true;\r\n    //       // },\r\n    //     });\r\n    //     this.canMove = true;\r\n    //   }, 1200);\r\n    // }\r\n  }\r\n  // reproduce() {\r\n  //   ctx.save();\r\n  //     ctx.scale(4, 4);\r\n  //     this.draw('red');\r\n  //   ctx.restore();\r\n  // }\r\n}\r\n\r\n\r\n\r\n/* Polygon Class */\r\nclass Polygon {\r\n  constructor(args) {\r\n    const def = {\r\n      rotationAxisPos: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      rotationAxisR: 0,\r\n      rotationAxisAngle: 0,\r\n      // p: new Vec2(0, 0),\r\n      // v: {\r\n      //   x: 1,\r\n      //   y: 0.5,\r\n      // },\r\n      v: 0.8,\r\n      rotate: 0,\r\n      // scale: 1,\r\n      // rotateV: 0.4,\r\n      color: globalColor.red,\r\n      isSplited: true,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  get originalPos() {\r\n    return {\r\n      x: this.rotationAxisPos.x + this.rotationAxisR * Math.cos(this.rotationAxisAngle * degToPi),\r\n      y: this.rotationAxisPos.y + this.rotationAxisR * Math.sin(this.rotationAxisAngle * degToPi),\r\n    };\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.originalPos.x, this.originalPos.y);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      if (this.isSplited) {\r\n        // 主體多邊形\r\n        ctx.beginPath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.moveTo(21 * Math.cos(8 * degToPi), 21 * Math.sin(8 * degToPi));\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.$triLineTo(34, 202);\r\n        ctx.$triLineTo(22, 255);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 右淡五邊形\r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n        // ctx.fillStyle = globalColor.blue;\r\n        ctx.moveTo(9.6, -2);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.$triLineTo(21, 8);\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(10, 36);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 下淡四邊形\r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n        // ctx.fillStyle = globalColor.orange;\r\n        // ctx.moveTo(8.4, 5.6);\r\n        ctx.moveTo(10 * Math.cos(36 * degToPi), 10 * Math.sin(36 * degToPi));\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.lineTo(-8, 0);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 閃電\r\n        drawLightning({ x: -0.8, y: -16 });\r\n      } else {\r\n        // 右分裂四邊形\r\n        ctx.fillStyle = this.color;\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, 0);\r\n        ctx.lineTo(18, 0);\r\n        ctx.$triLineTo(24, 36);\r\n        ctx.$triLineTo(32, 74);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 內右淡四邊形\r\n        ctx.beginPath();\r\n        // ctx.fillStyle = globalColor.blue;\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n        ctx.lineTo(18, 0);\r\n        ctx.$triLineTo(24, 36);\r\n        ctx.$triLineTo(32, 74);\r\n        ctx.$triLineTo(19, 65);;\r\n        ctx.$triLineTo(13, 42);;\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 內左淡四邊形\r\n        ctx.beginPath();\r\n        // ctx.fillStyle = globalColor.orange;\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n        ctx.$triLineTo(32, 74);\r\n        ctx.$triLineTo(16.4, 74);\r\n        ctx.$triLineTo(19, 65);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 右閃電\r\n        ctx.save();\r\n          drawLightning({ x: 12, y: 6 }, 0.5);\r\n        ctx.restore();\r\n        // 左分裂四邊形\r\n        ctx.translate(-32, 0);\r\n        ctx.fillStyle = this.color;\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(32, 36);\r\n        ctx.$triLineTo(28, 90);\r\n        ctx.$triLineTo(28, 144);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 內右淡四邊形\r\n        ctx.beginPath();\r\n        // ctx.fillStyle = globalColor.orange;\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n        ctx.$triLineTo(16, 36);\r\n        ctx.$triLineTo(32, 36);\r\n        ctx.$triLineTo(28, 90);\r\n        ctx.$triLineTo(12, 88);\r\n        ctx.fill();\r\n        // 左閃電\r\n        drawLightning({ x: 0, y: 8 }, 0.6);\r\n      }\r\n    ctx.restore();\r\n  }\r\n  update() {\r\n    // this.p.x += this.v.x;\r\n    // this.p.y += this.v.y;\r\n    // this.rotate += this.rotateV;\r\n    // if (!this.isInBoundary) {\r\n    //   this.p.x = -48;\r\n    //   this.p.y = -32;\r\n    //   this.v.x = 0.5 * Math.random() + 0.5;\r\n    //   this.v.y = 0.5 * Math.random() + 0.5;\r\n    // }\r\n  }\r\n  // get isInBoundary() {\r\n  //   const xInRange = -48 <= this.p.x && this.p.x <= gameW + 48;\r\n  //   const yInRange = -48 <= this.p.y && this.p.y <= gameH + 48;\r\n  //   return xInRange && yInRange;\r\n  // }\r\n}\r\n\r\n\r\n/* Shooter Class */\r\nlet shooterBullets = [];\r\nclass Shooter {\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      color: globalColor.white,\r\n      r: 34,\r\n      rotateAngle: 0,\r\n      bullet: null,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save(); \r\n      // 輪圍\r\n      ctx.translate(this.p.x, this.p.y);\r\n      // ctx.rotate(this.rotateAngle);\r\n      ctx.save();\r\n        ctx.beginPath();\r\n        ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n        ctx.shadowBlur = 16;\r\n        ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n        ctx.strokeStyle = this.color;\r\n        ctx.lineWidth = 6;\r\n        ctx.stroke();\r\n        // 輪軸\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(this.r, 0, this.rotateAngle);\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(this.r, 120, this.rotateAngle);\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(this.r, 240, this.rotateAngle);\r\n        ctx.lineWidth = 3;\r\n        ctx.stroke();\r\n      ctx.restore();\r\n      // 輪圍外虛線\r\n      // ctx.beginPath();\r\n      ctx.strokeStyle = this.color;\r\n      const outerR = this.r + 22;\r\n      for (let i = 0; i < 360; i += 1) {\r\n        // const angle1 = i;\r\n        // const angle2 = (i + 1);\r\n        const x1 = outerR * Math.cos(i * degToPi + this.rotateAngle);\r\n        const y1 = outerR * Math.sin(i * degToPi + this.rotateAngle);\r\n        const x2 = outerR * Math.cos((i + 1) * degToPi + this.rotateAngle);\r\n        const y2 = outerR * Math.sin((i + 1) * degToPi + this.rotateAngle);\r\n\r\n        if (i % 10 < 5) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(x1, y1);\r\n          ctx.lineTo(x2, y2);\r\n          ctx.lineWidth = 1;\r\n          ctx.stroke();\r\n        }\r\n      }\r\n      // 護盾\r\n      const shieldR = this.r + 36;\r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, shieldR, 135 * degToPi + this.rotateAngle, 225 * degToPi + this.rotateAngle);\r\n      ctx.lineWidth = 4;\r\n      ctx.stroke();\r\n      // 砲口\r\n      ctx.beginPath();\r\n      ctx.save();\r\n        ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n        ctx.shadowBlur = 16;\r\n        ctx.rotate(this.rotateAngle);\r\n        // ctx.translate(0, -this.r - 8);\r\n        ctx.translate(this.r + 8, 0);\r\n        ctx.moveTo(0, 0);\r\n        // 下方長方形長 16、寬（高） 12\r\n        // 上方梯形高 14、上邊寬 8\r\n        // ctx.lineTo(8, 0);\r\n        // ctx.lineTo(8, -12);\r\n        // ctx.lineTo(4, -26);\r\n        // ctx.lineTo(-4, -26);\r\n        // ctx.lineTo(-8, -12);\r\n        // ctx.lineTo(-8, 0);\r\n        ctx.lineTo(0, 8);\r\n        ctx.lineTo(12, 8);\r\n        ctx.lineTo(26, 4);\r\n        ctx.lineTo(26, -4);\r\n        ctx.lineTo(12, -8);\r\n        ctx.lineTo(0, -8);\r\n        ctx.closePath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.fill();\r\n      ctx.restore();\r\n    ctx.restore();\r\n\r\n    this.shoot();\r\n  }\r\n  update() {\r\n    this.rotateAngle = mouseMoveAngle;\r\n    shooterBullets.forEach((bullet) => {\r\n      bullet.update();\r\n    });\r\n  }\r\n  shoot() {\r\n    shooterBullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n}\r\n\r\nclass ShooterBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      // p: new Vec2(0, 0),\r\n      rotationAxisR: 0,\r\n      // shootInterval: 0.4,\r\n      color: globalColor.white,\r\n      // v: new Vec2(6, 0),\r\n      v: 4,\r\n      rotateAngle: 0,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.beginPath();\r\n      ctx.translate(gameW / 2, gameH / 2);\r\n      ctx.rotate(this.rotateAngle);\r\n      // ctx.translate(this.p.x, this.p.y);\r\n      // 殘影\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\r\n      ctx.arc(-7 + this.rotationAxisR, 0, 3, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\r\n      ctx.arc(-12 + this.rotationAxisR, 0, 2, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\r\n      ctx.arc(-15 + this.rotationAxisR, 0, 1, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // 園底\r\n      ctx.beginPath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.arc(0 + this.rotationAxisR, 0, 4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // 尖頭\r\n      ctx.beginPath();\r\n      ctx.moveTo(3 + this.rotationAxisR, 3);\r\n      ctx.lineTo(15 + this.rotationAxisR, 0);\r\n      ctx.lineTo(3 + this.rotationAxisR, -3);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update() {\r\n    // this.p = this.p.add(this.v);\r\n    this.rotationAxisR += this.v;\r\n  }\r\n}\r\n\r\n/* Sub Triangle Class */\r\nclass TriangleSub {;\r\n  constructor(args) {\r\n    const def = {\r\n      rotationAxisPos: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      rotationAxisR: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      rotationAxisAngle: 0,\r\n      r: 26 * 0.4,\r\n      rotate: 0,\r\n      rotateV: 4,\r\n      // v: -0.4,\r\n      // v: 0,\r\n      color: globalColor.blue,\r\n      hP: 2,\r\n      // isReproduce: false,\r\n      isReproduceMoving: false,\r\n      order: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  get originalPos() {\r\n    return {\r\n      x: this.rotationAxisPos.x + this.rotationAxisR.x * Math.cos(this.rotationAxisAngle * degToPi),\r\n      y: this.rotationAxisPos.y + this.rotationAxisR.y * Math.sin(this.rotationAxisAngle * degToPi),\r\n    };\r\n  }\r\n  draw() {\r\n    const scale = 0.4;\r\n    const triangleOuterBigR = this.r + 4 * scale;\r\n    const triangleInnerBigR = this.r - 16 * scale;\r\n    const triangleInnerSmallR = this.r - 22 * scale;\r\n    ctx.save();\r\n      // 淡三角\r\n      ctx.translate(this.originalPos.x, this.originalPos.y);\r\n      // ctx.scale(0.4, 0.4);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      ctx.save();\r\n        ctx.translate(2 * scale, -Math.sqrt(12) * scale);\r\n        ctx.beginPath();\r\n        ctx.moveTo(triangleOuterBigR * Math.cos(0), triangleOuterBigR * Math.sin(0));\r\n        ctx.lineTo(triangleOuterBigR * Math.cos(120 * degToPi), triangleOuterBigR * Math.sin(120 * degToPi));\r\n        ctx.lineTo(triangleOuterBigR * Math.cos(240 * degToPi), triangleOuterBigR * Math.sin(240 * degToPi));\r\n        ctx.closePath();\r\n        ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n        ctx.fill();\r\n      ctx.restore();\r\n      // 主體三角\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.r * Math.cos(0), this.r * Math.sin(0));\r\n      ctx.lineTo(this.r * Math.cos(120 * degToPi), this.r * Math.sin(120 * degToPi));\r\n      ctx.lineTo(this.r * Math.cos(240 * degToPi), this.r * Math.sin(240 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n      // 大白三角\r\n      ctx.translate(-3.2 * scale, -1.6 * scale);\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(triangleInnerBigR * Math.cos(30 * degToPi), triangleInnerBigR * Math.sin(30 * degToPi));\r\n      ctx.lineTo(triangleInnerBigR * Math.cos(90 * degToPi), triangleInnerBigR * Math.sin(90 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 小白三角\r\n      ctx.translate(0, -8.8 * scale);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(triangleInnerSmallR * Math.cos(30 * degToPi), triangleInnerSmallR * Math.sin(30 * degToPi));\r\n      ctx.lineTo(triangleInnerSmallR * Math.cos(90 * degToPi), triangleInnerSmallR * Math.sin(90 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update() {\r\n    this.rotate += this.rotateV;\r\n    if (!this.isReproduceMoving) {\r\n      if (this.order === 1) {\r\n        TweenLite.to(this, 0.8, {\r\n          rotationAxisAngle: '+=10',\r\n          ease: Power2.easeOut,\r\n          onComplete: () => {\r\n            TweenLite.to(this.rotationAxisR, 1.6, {\r\n              x: 0,\r\n              y: 0,\r\n              ease: Power1.easeIn,\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        TweenLite.to(this, 0.8, {\r\n          rotationAxisAngle: '-=10',\r\n          ease: Power2.easeOut,\r\n          onComplete: () => {\r\n            TweenLite.to(this.rotationAxisR, 1.6, {\r\n              x: 0,\r\n              y: 0,\r\n              ease: Power1.easeIn,\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n    this.isReproduceMoving = true;\r\n  }\r\n}\r\n\r\n\r\nclass CircleBullet {;\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      movePos: new Vec2(0, 0),\r\n      color: globalColor.orange,\r\n      v: new Vec2(4, 0),\r\n      rotate: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.beginPath();\r\n    ctx.save();\r\n      ctx.translate(this.p.x, this.p.y);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      ctx.scale(1.6, 0.68);\r\n      // ctx.scale(1, 0.9);\r\n      ctx.arc(this.movePos.x + 16, this.movePos.y, 4, 0, Math.PI * 2);\r\n      // ctx.arc(this.movePos.x + 32, this.movePos.y, 4, 0, Math.PI * 2);\r\n    ctx.restore();\r\n    ctx.fillStyle = this.color;\r\n    // ctx.fillStyle = 'red';\r\n    ctx.fill();\r\n  }\r\n  update() {\r\n    // this.movePos = this.movePos.add(this.v);\r\n  }\r\n}\r\n\r\nclass TriangleBullet {;\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      movePos: new Vec2(0, 0),\r\n      color: globalColor.blue,\r\n      v: new Vec2(-1.5, 1.5 * Math.sqrt(3)),\r\n      rotate: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.p.x, this.p.y);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      ctx.translate(this.movePos.x + 28 * Math.cos(120 * degToPi), this.movePos.y + 28 * Math.sin(120 * degToPi));\r\n      // 淡三角子彈\r\n      ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(18.8 * Math.cos(-45 * degToPi), 18.8 * Math.sin(-45 * degToPi));\r\n      ctx.lineTo(18 * Math.cos(-52 * degToPi), 18 * Math.sin(-52 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 主體三角子彈\r\n      ctx.fillStyle = this.color;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(18 * Math.cos(-52 * degToPi), 18 * Math.sin(-52 * degToPi));\r\n      ctx.lineTo(19.6 * Math.cos(-72 * degToPi), 19.6 * Math.sin(-72 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update() {\r\n    this.movePos = this.movePos.add(this.v);\r\n    // this.reproduce();\r\n  }\r\n}\r\n\r\n// draw battery\r\nfunction drawBattery(p) {\r\n  ctx.save();\r\n    ctx.translate(p.x, p.y);\r\n    ctx.fillStyle = globalColor.orange;\r\n    // 瓶身\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(-24, 0);\r\n    ctx.lineTo(-24, 42);\r\n    ctx.lineTo(0, 42);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // 瓶底\r\n    ctx.save();\r\n      ctx.translate(0, 44);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(-24, 0);\r\n      ctx.lineTo(-24, 3);\r\n      ctx.lineTo(0, 3);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 瓶蓋\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.save();\r\n      ctx.translate(-6.75, 0);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, -3);\r\n      ctx.lineTo(-10.5, -3);\r\n      ctx.lineTo(-10.5, -0);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 閃電\r\n    // ctx.strokeStyle = globalColor.white;\r\n    drawLightning({ x: -11, y: -9 });\r\n    // ctx.translate(-11, 9);\r\n    // ctx.beginPath();\r\n    // ctx.moveTo(0, 0);\r\n    // ctx.rotate(18 * degToPi);\r\n    // ctx.lineTo(0, 10);\r\n    // ctx.translate(0, 10);\r\n    // ctx.rotate(-18 * degToPi);\r\n\r\n    // ctx.lineTo(10, 0);\r\n    // ctx.translate(10, 0);\r\n\r\n    // ctx.rotate(28 * degToPi);\r\n    // ctx.lineTo(0, 16);\r\n    // ctx.translate(0, 16);\r\n    // ctx.rotate(-28 * degToPi);\r\n\r\n    // ctx.rotate(3.6 * degToPi);\r\n    // ctx.lineTo(0, -10);\r\n    // ctx.translate(0, -10);\r\n    // ctx.rotate(-3.6 * degToPi);\r\n\r\n    // ctx.lineTo(-8, 0);\r\n    // ctx.closePath();\r\n    // ctx.fill();\r\n  ctx.restore();\r\n}\r\n\r\n// 繪製閃電\r\nfunction drawLightning(translate =  { x: 0, y: 0 }, scale = 1 ) {\r\n  ctx.fillStyle = globalColor.white;\r\n  ctx.translate(translate.x, translate.y);\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, 0);\r\n  ctx.rotate(18 * degToPi);\r\n  ctx.lineTo(0, 10 * scale);\r\n  ctx.translate(0, 10 * scale);\r\n  ctx.rotate(-18 * degToPi);\r\n\r\n  ctx.lineTo(10 * scale, 0);\r\n  ctx.translate(10 * scale, 0);\r\n\r\n  ctx.rotate(28 * degToPi);\r\n  ctx.lineTo(0, 16 * scale);\r\n  ctx.translate(0, 16 * scale);\r\n  ctx.rotate(-28 * degToPi);\r\n\r\n  ctx.rotate(3.6 * degToPi);\r\n  ctx.lineTo(0, -10 * scale);\r\n  ctx.translate(0, -10 * scale);\r\n  ctx.rotate(-3.6 * degToPi);\r\n\r\n  ctx.lineTo(-8 * scale, 0);\r\n  ctx.closePath();\r\n  ctx.fill();\r\n}\r\n\r\n/* Initialize Game Logic */\r\n// function init() {\r\n\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n/* Update Game Logic */\r\n// function update() {\r\n//   time += 1;\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n/* Update Picture */\r\n// function draw() {\r\n  // clear background\r\n  // ctx.fillStyle = globalColor.blueDark;\r\n  // ctx.fillRect(0, 0, gameW, gameH);\r\n\r\n  // draw here\r\n  // ...\r\n\r\n  // draw mouse\r\n  // ctx.fillStyle = 'red';\r\n  // ctx.beginPath();\r\n  // ctx.circle(mouseMovePos, 3);\r\n  // ctx.fill();\r\n\r\n  // ctx.save();\r\n  // ctx.translate(mouseMovePos.x, mouseMovePos.y);\r\n  // ctx.strokeStyle = 'red';\r\n  // const length = 20;\r\n  // ctx.beginPath();\r\n  // ctx.fillText(mouseMovePos, 10, -10);\r\n  // ctx.line(new Vec2(-length, 0), new Vec2(length, 0));\r\n  // ctx.line(new Vec2(0, -length), new Vec2(0, length));\r\n  // ctx.stroke();\r\n  // ctx.restore();\r\n\r\n  // requestAnimationFrame(draw);\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n/* Page Loaded */\r\nfunction handleLoad() {\r\n  game = new Game();\r\n  initCanvas();\r\n  game.init();\r\n  // init();\r\n  // requestAnimationFrame(draw);\r\n  // setInterval(update, 1000 / updateFPS);\r\n}\r\n\r\n// load & resize event\r\nwindow.addEventListener('load', handleLoad);\r\nwindow.addEventListener('resize', initCanvas);\r\n\r\n\r\n\r\n\r\n\r\n/* Mouse Events & Recording */\r\n// const mouseMovePos = new Vec2(0, 0);\r\nlet mouseMovePos = {};\r\nlet mouseMoveAngle = 0;\r\n// let mouseUpPos = new Vec2(0, 0);\r\n// let mouseDownPos = new Vec2(0, 0);\r\n\r\n// window.addEventListener('mousemove', handleMouseMove);\r\n// window.addEventListener('mouseup', handleMouseUp);\r\n// window.addEventListener('mousedown', handleMouseDown);\r\ncanvas.addEventListener('mousemove', handleMouseMove);\r\n\r\nfunction handleMouseMove(evt) {\r\n  mouseMovePos.x = evt.x - ww / 2;\r\n  mouseMovePos.y = evt.y - wh / 2;\r\n  mouseMoveAngle = Math.atan2(mouseMovePos.y, mouseMovePos.x);\r\n};\r\n\r\ncanvas.addEventListener('click', handleClick);\r\n\r\nlet beforeShootTime = new Date();\r\nfunction handleClick() {\r\n  const shootTime = new Date();\r\n  if (shootTime - beforeShootTime > 200) {\r\n    shooterBullets.push(new ShooterBullet({\r\n      // 34 + 12 + 16\r\n      // p: new Vec2(62, 0),\r\n      rotationAxisR: 62,\r\n      rotateAngle: mouseMoveAngle < 0 ? mouseMoveAngle + 2 * Math.PI : mouseMoveAngle,\r\n    }));\r\n    beforeShootTime = shootTime;\r\n  }\r\n};\r\n\r\n\r\n// function handleMouseUp(evt) {\r\n//   mouseUpPos = mouseMovePos.clone();\r\n// }\r\n\r\n// function handleMouseDown(evt) {\r\n//   mouseDownPos = mouseMovePos.clone();\r\n// }"]}