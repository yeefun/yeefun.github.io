{"version":3,"sources":["index.js"],"names":["updateFPS","time","globalColor","red","orange","blue","blueDark","white","startBtn","document","getElementById","cover","gameInfo","addEventListener","game","startGame","once","controls","splited","gui","dat","GUI","Vec2","x","y","v","s","Math","sqrt","newVal","newLength","unit","mul","set","atan2","length","canvas","ctx","getContext","ww","wh","gameW","gameH","$triLineTo","r","angle","angleAdd","lineTo","cos","degToPi","sin","initCanvas","width","height","documentElement","clientWidth","clientHeight","Prop","args","def","img","Image","src","p","Object","assign","complete","drawImage","PI","coverCircle","coverTriangle","coverPolygon","circles","triangles","subTriangles","polygons","Game","isGameStart","shooter","currentLevel","isInLevel1","props","render","update","fillStyle","fillRect","draw","forEach","circle","triangle","polygon","subTriangle","prop","drawCover","requestAnimationFrame","setLevelOne","idx","generateProp","setTimeout","save","translate","beginPath","arc","strokeStyle","stroke","globalAlpha","restore","drawBattery","rotate","moveTo","closePath","fill","style","display","Shooter","cursor","push","Circle","axisRotatePos","axisRotateR","axisRotateAngle","axisRotateRV","axisRotateAngleV","rotateV","color","HP","bullets","beforeRotateTime","Date","isRotating","circleBigR","circleSmallR","subaxisRotateR","originalPos","bullet","arr","rotateTime","random","TweenLite","to","ease","Power2","easeOut","onComplete","shoot","enemyHitShooter","i","timer","CircleBullet","rotateAngle","moveX","clearTimeout","Triangle","beforeRotateAxisAngleTime","beforeShootTime","isReproduce","triangleOuterBigR","triangleInnerBigR","triangleInnerSmallR","rotateAxisAngleTime","randomRotateAngle","Power0","easeNone","easeInOut","shootTime","TriangleBullet","TriangleSub","order","Polygon","whole","big","small","isSplited","isSplitedMove","drawLightning","rotateDirection","Circ","Power4","enemies","enemyIdx","enemyAxisRotateR","enemyAxisRotateAngle","splitedPolygonHP","splitedPolygonName","shooterR","shieldR","shooterInnerCirLineW","shieldLineW","shieldAngleRange","abs","mouseMoveAngle","judgeEnemyHit","splice","shooterBullets","shadowColor","shadowBlur","lineWidth","outerR","x1","y1","x2","y2","ShooterBullet","bodyLength","bulletIdx","cirIdx","anglePan","asin","shotAngleRange","shotRRange","triIdx","lengthX","lengthY","polyIdx","polyaxisRotateAngle","polyRotate","sideA","sideB1","sideB2","sideC1","cosineFormula","sideC2","angleB1","getAngleB","angleB2","bottomJudge","topJudge","isReproduceMoving","Power1","easeIn","moveXV","triBulletLength","a","b","c","acos","scale","handleLoad","init","window","mouseMovePos","handleMouseMove","evt","handleClick"],"mappings":"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","file":"index.js","sourcesContent":["/* Environment Variable */\r\nconst updateFPS = 30;\r\n// const showMouse = true;\r\n// const bgColor = 'black';\r\nlet time = 0;\r\n\r\nconst globalColor = {\r\n  red: '#e7465d',\r\n  orange: '#f5af5f',\r\n  blue: '#3676bb',\r\n  blueDark: '#001d2e',\r\n  white: '#fff',\r\n};\r\n\r\nconst startBtn = document.getElementById('start-btn');\r\nconst cover = document.getElementById('cover');\r\nconst gameInfo = document.getElementById('info');\r\nstartBtn.addEventListener('click',\r\n  function() {\r\n    game.startGame();\r\n  },\r\n  {\r\n    once: true,\r\n  },\r\n);\r\n\r\n\r\n/* GUI Controls */\r\nconst controls = {\r\n  splited: false,\r\n}\r\n\r\nconst gui = new dat.GUI();\r\n// gui.add(controls, 'splited');\r\n// gui.add(controls, 'value', -2, 2).step(0.01).onChange((value) => {});\r\n\r\n\r\n\r\n\r\n\r\n/* 2D Vector Class */\r\nclass Vec2 {\r\n  constructor(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  set(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n  move(x, y) {\r\n    this.x += x;\r\n    this.y += y;\r\n  }\r\n  add(v) {\r\n    return new Vec2(this.x + v.x, this.y + v.y);\r\n  }\r\n  sub(v) {\r\n    return new Vec2(this.x - v.x, this.y - v.y);\r\n  }\r\n  mul(s) {\r\n    return new Vec2(this.x * s, this.y * s);\r\n  }\r\n  clone() {\r\n    return new Vec2(this.x, this.y);\r\n  }\r\n  equal(v) {\r\n    return this.x === v.x && this.y === v.y;\r\n  }\r\n  get length() {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y);\r\n  }\r\n  set length(newVal) {\r\n    const newLength = this.unit.mul(newVal);\r\n    this.set(newLength.x, newLength.y);\r\n  }\r\n  get angle() {\r\n    return Math.atan2(this.y, this.x);\r\n  }\r\n  get unit() {\r\n    return this.mul(1 / this.length);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/* Initialize Canvas Settings */\r\nconst canvas = document.getElementById('game');\r\nconst ctx = canvas.getContext('2d');\r\nlet ww;\r\nlet wh;\r\nlet gameW;\r\nlet gameH;\r\n\r\n// ctx.circle = function (v, r) {\r\n//   this.arc(v.x, v.y, r, 0, Math.PI * 2);\r\n// }\r\n// ctx.line = function (v1, v2) {\r\n//   this.moveTo(v1.x, v1.y);\r\n//   this.lineTo(v2.x, v2.y);\r\n// }\r\n\r\nctx.$triLineTo = function(r, angle, angleAdd = 0) {\r\n  return ctx.lineTo(r * Math.cos(angle * degToPi + angleAdd), r * Math.sin(angle * degToPi + angleAdd));\r\n}\r\n\r\nfunction initCanvas() {\r\n  gameW = canvas.width;\r\n  gameH = canvas.height;\r\n  ww = document.documentElement.clientWidth;\r\n  wh = document.documentElement.clientHeight;\r\n}\r\n// initCanvas();\r\n\r\n\r\n\r\n\r\n\r\n/* 道具 class */\r\nclass Prop {\r\n  constructor(args) {\r\n    const def = {\r\n      img: new Image(),\r\n      src: '',\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    if (!this.img.src) {\r\n      this.img.src = this.src;\r\n    }\r\n    if (this.img.complete) {\r\n      ctx.drawImage(this.img, this.p.x, this.p.y);\r\n    }\r\n  }\r\n  update() {\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst degToPi = Math.PI / 180;\r\nlet coverCircle;\r\nlet coverTriangle;\r\nlet coverPolygon;\r\nlet game;\r\n\r\nlet circles = [];\r\nlet triangles = [];\r\nlet subTriangles = [];\r\nlet polygons = [];\r\n// let props = [];\r\n\r\nclass Game {\r\n  constructor(args) {\r\n    const def = {\r\n      isGameStart: true,\r\n      // isGameStart: false,\r\n      shooter: null,\r\n      currentLevel: 1,\r\n      isInLevel1: false,\r\n      props: [],\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  init() {\r\n    // coverCircle = new Circle({\r\n    //   axisRotateR: 380,\r\n    //   axisRotateAngle: -36,\r\n    //   r: 39,\r\n    // });\r\n    // coverTriangle = new Triangle({\r\n    //   axisRotateR: {\r\n    //     x: 320,\r\n    //     y: 320,\r\n    //   },\r\n    //   axisRotateAngle: 40,\r\n    //   rotate: 32,\r\n    //   r: 44,\r\n    // });\r\n    // coverPolygon = new Polygon({\r\n    //   p: {\r\n    //     x: 72,\r\n    //     y: 96,\r\n    //   },\r\n    //   scale: 1.25,\r\n    // });\r\n    this.startGame();\r\n    this.render();\r\n    this.update();\r\n  }\r\n  render() {\r\n    ctx.fillStyle = globalColor.blueDark;\r\n    ctx.fillRect(0, 0, gameW, gameH);\r\n    if (this.isGameStart) {\r\n      // 繪製 shooter\r\n      this.shooter.draw();\r\n      // 繪製每個 circle\r\n      circles.forEach((circle) => {\r\n        circle.draw();\r\n      });\r\n      // 繪製每個 triangle\r\n      triangles.forEach((triangle) => {\r\n        triangle.draw();\r\n      });\r\n      // 繪製每個 polygon\r\n      polygons.forEach((polygon) => {\r\n        polygon.draw();\r\n      });\r\n      // 繪製每個 sub triangle\r\n      subTriangles.forEach((subTriangle) => {\r\n        subTriangle.draw();\r\n      });\r\n      // 繪製每個 prop\r\n      this.props.forEach((prop) => {\r\n        prop.draw();\r\n      })\r\n    } else {\r\n      // this.startGame();\r\n      this.drawCover();\r\n    }\r\n    requestAnimationFrame(() => { this.render() });\r\n  }\r\n  update() {\r\n    time += 1;\r\n    if (this.isGameStart) {\r\n      // 判斷現在是第幾關\r\n      if (this.currentLevel === 1 && !this.isInLevel1) {\r\n        this.setLevelOne();\r\n        this.isInLevel1 = true;\r\n      }\r\n      // 更新 shooter\r\n      this.shooter.update();\r\n      // 更新每個 circle\r\n      circles.forEach((circle, idx) => {\r\n        circle.update(idx);\r\n      });\r\n      // 更新每個 triangle\r\n      triangles.forEach((triangle, idx) => {\r\n        triangle.update(idx);\r\n      });\r\n      // 更新每個 polygon\r\n      polygons.forEach((polygon, idx) => {\r\n        polygon.update(idx);\r\n      });\r\n      // 更新每個 sub triangle\r\n      subTriangles.forEach((subTriangle, idx) => {\r\n        subTriangle.update(idx);\r\n      });\r\n      // 更新每個 prop\r\n      this.props.forEach((prop) => {\r\n        prop.update();\r\n      });\r\n      // 產生道具\r\n      this.generateProp();\r\n    }\r\n    setTimeout(() => { this.update() }, 1000 / updateFPS);\r\n  }\r\n  drawCover() {\r\n    // 中央兩白圈\r\n    ctx.save();\r\n      ctx.translate(gameW / 2, gameH / 2);\r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, 180, 0, Math.PI * 2);\r\n      ctx.strokeStyle = globalColor.white;\r\n      ctx.stroke();\r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, 264, 0, Math.PI * 2);\r\n      ctx.globalAlpha = 0.3;\r\n      ctx.stroke();\r\n    ctx.restore();\r\n    // 黃圓\r\n    coverCircle.draw();\r\n    coverCircle.update();\r\n    // 藍三角\r\n    coverTriangle.draw();\r\n    coverTriangle.update();\r\n    // 紅多邊形\r\n    coverPolygon.draw();\r\n    coverPolygon.update();\r\n    // 電池\r\n    drawBattery({\r\n      x: gameW / 2 - 24,\r\n      y: gameH / 2 - 51.8,\r\n    });\r\n    // R 字小角裝飾\r\n    ctx.save();\r\n      ctx.translate(gameW / 2 + 24, gameH / 2 - 30);\r\n      ctx.rotate(-132 * degToPi);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(4, 0);\r\n      ctx.lineTo(0, -8.4);\r\n      ctx.lineTo(-4.2, 0);\r\n      ctx.closePath();\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  startGame() {\r\n    this.isGameStart = true;\r\n    cover.style.display = 'none';\r\n    gameInfo.style.display = 'block';\r\n    this.shooter = new Shooter();\r\n    canvas.style.cursor = 'pointer';\r\n  }\r\n  generateProp() {\r\n\r\n  }\r\n  setLevelOne() {\r\n    this.props.push(new Prop({\r\n      src: '../../src/assets/laser.png',\r\n      p: {\r\n        x: 90,\r\n        y: 90\r\n      },\r\n    }));\r\n    // circles.push(new Circle({\r\n    //   axisRotateR: 240,\r\n    //   axisRotateAngle: 0,\r\n    // }));\r\n    // triangles.push(new Triangle({\r\n    //   axisRotateR: 280,\r\n    //   // axisRotateAngle 與 rotate 必須相同\r\n    //   axisRotateAngle: 160,\r\n    //   rotate: 160,\r\n    // }));\r\n    // polygons.push(new Polygon({\r\n    //   axisRotateR: {\r\n    //     whole: 280,\r\n    //     big: 280,\r\n    //     small: 280,\r\n    //   },\r\n    //   axisRotateAngle: {\r\n    //     whole: 180,\r\n    //     big: 180,\r\n    //     small: 180,\r\n    //   },\r\n    //   rotate: {\r\n    //     whole: 40,\r\n    //     big: 40,\r\n    //     small: 40,\r\n    //   },\r\n    // }));\r\n  }\r\n}\r\n\r\n\r\n\r\n/* Circle Class */\r\nclass Circle {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotatePos: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      r: 22,\r\n      rotate: 0,\r\n      axisRotateRV: 0.1,\r\n      axisRotateAngleV: 0.4,\r\n      rotateV: 0.4,\r\n      color: globalColor.orange,\r\n      HP: 2,\r\n      bullets: [],\r\n      beforeRotateTime: new Date(),\r\n      isRotating: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  get originalPos() {\r\n    return {\r\n      x: this.axisRotatePos.x + this.axisRotateR * Math.cos(this.axisRotateAngle * degToPi),\r\n      y: this.axisRotatePos.y + this.axisRotateR * Math.sin(this.axisRotateAngle * degToPi),\r\n    };\r\n  }\r\n  draw() {\r\n    const circleBigR = this.r + 5;\r\n    const circleSmallR = this.r - 10;\r\n    const subaxisRotateR = 14;\r\n    ctx.save();\r\n      ctx.translate(this.originalPos.x, this.originalPos.y);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      // 大淡圓\r\n      ctx.beginPath();\r\n      ctx.arc(4, 0, circleBigR, 0, Math.PI * 2);\r\n      ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n      ctx.fill();\r\n      // 小淡圓\r\n      ctx.beginPath();\r\n      ctx.arc(-20, 0, circleSmallR, 0, Math.PI * 2);\r\n      ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n      ctx.fill();\r\n      // 主體圓\r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n      // 小三圓\r\n      ctx.beginPath();\r\n      ctx.fillStyle = globalColor.white;\r\n      // ctx.arc(subaxisRotateR, 0, 2.4, 0, Math.PI * 2);\r\n      ctx.arc(subaxisRotateR * Math.cos(60 * degToPi), subaxisRotateR * Math.sin(60 * degToPi), 2.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.arc(subaxisRotateR * Math.cos(180 * degToPi), subaxisRotateR * Math.sin(180 * degToPi), 2.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.arc(subaxisRotateR * Math.cos(300 * degToPi), subaxisRotateR * Math.sin(300 * degToPi), 2.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // 神經\r\n      ctx.beginPath();\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.lineTo(-8, 0);\r\n      ctx.$triLineTo(-2, 32);\r\n      ctx.$triLineTo(-12, 120);\r\n      ctx.$triLineTo(-2.4, 176);\r\n      ctx.$triLineTo(-8, 240);\r\n      ctx.$triLineTo(-1.6, 320);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 繪製圓形子彈\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update(idx) {\r\n    // this.axisRotateR -= 3.2;\r\n    // 更新圓形子彈\r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n    // 當圓形自身在旋轉時，圓形不要移動\r\n    if (!this.isRotating) {\r\n      this.axisRotateAngle += this.axisRotateAngleV;\r\n      // this.axisRotateAngle += 2;\r\n    }\r\n    // 每 2-4 秒，自身旋轉一次\r\n    const rotateTime = new Date();\r\n    if (rotateTime - this.beforeRotateTime > 2000 * Math.random() + 2000) {\r\n      this.isRotating = true;\r\n      // console.log(this.axisRotateAngle);\r\n      TweenLite.to(this, 0.4, {\r\n        // rotate: this.axisRotateAngle - 180,\r\n        // rotate: this.axisRotateAngle % 360,\r\n        rotate: this.axisRotateAngle,\r\n        ease: Power2.easeOut,\r\n        // 自身旋轉完後射擊\r\n        onComplete: () => {\r\n          this.shoot();\r\n          this.isRotating = false;\r\n        },\r\n      });\r\n      this.beforeRotateTime = rotateTime;\r\n    }\r\n    // 當圓形撞上 shooter\r\n    enemyHitShooter(circles, idx, this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n  shoot() {\r\n    // 射 1-2 發\r\n    for (let i = 0; i < 2 * Math.random(); i += 1) {\r\n      const timer = setTimeout(() => {\r\n        this.bullets.push(new CircleBullet({\r\n          originalPos: {\r\n            x: this.originalPos.x,\r\n            y: this.originalPos.y,\r\n          },\r\n          rotateAngle: this.rotate,\r\n          moveX: -this.r - 10,\r\n          // rotateAngle: Math.sin(this.rotate * degToPi),\r\n          axisRotateR: this.axisRotateR,\r\n        }));\r\n        clearTimeout(timer);\r\n        // 間隔 0.2-0.4 秒\r\n      }, i * (200 * Math.random() + 200));\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n/* Triangle Class */\r\nclass Triangle {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotatePos: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      // axisRotateR: {\r\n      //   x: 0,\r\n      //   y: 0,\r\n      // },\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      r: 26,\r\n      rotate: 0,\r\n      axisRotateRV: 0.1,\r\n      axisRotateAngleV: 0.4,\r\n      rotateV: -2.4,\r\n      color: globalColor.blue,\r\n      bullets: [],\r\n      beforeRotateAxisAngleTime: new Date(),\r\n      beforeShootTime: new Date(),\r\n      HP: 4,\r\n      isReproduce: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  get originalPos() {\r\n    return {\r\n      x: this.axisRotatePos.x + this.axisRotateR * Math.cos(this.axisRotateAngle * degToPi),\r\n      y: this.axisRotatePos.y + this.axisRotateR * Math.sin(this.axisRotateAngle * degToPi),\r\n    };\r\n  }\r\n  draw() {\r\n    const triangleOuterBigR = this.r + 4;\r\n    const triangleInnerBigR = this.r - 16;\r\n    const triangleInnerSmallR = this.r - 22;\r\n    ctx.save();\r\n      // 淡三角\r\n      ctx.translate(this.originalPos.x, this.originalPos.y);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      ctx.save();\r\n        ctx.translate(4, 0);\r\n        ctx.beginPath();\r\n        ctx.moveTo(triangleOuterBigR * Math.cos(60 * degToPi), triangleOuterBigR * Math.sin(60 * degToPi));\r\n        ctx.$triLineTo(triangleOuterBigR, 180);\r\n        ctx.$triLineTo(triangleOuterBigR, 300);\r\n        ctx.closePath();\r\n        ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n        ctx.fill();\r\n      ctx.restore();\r\n      // 主體三角\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.r * Math.cos(60 * degToPi), this.r * Math.sin(60 * degToPi));\r\n      ctx.$triLineTo(this.r, 180);\r\n      ctx.$triLineTo(this.r, 300);\r\n      ctx.closePath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n      // 大白三角\r\n      ctx.translate(0, -2.8);\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.$triLineTo(triangleInnerBigR, 90);\r\n      ctx.$triLineTo(triangleInnerBigR, 150);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 小白三角\r\n      ctx.translate(8 * Math.cos(-40 * degToPi), 8 * Math.sin(-40 * degToPi))\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.$triLineTo(triangleInnerSmallR, 90);\r\n      ctx.$triLineTo(triangleInnerSmallR, 150);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 繪製三角子彈\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update(idx) {\r\n    // this.axisRotateR -= 2.4;\r\n    // 更新三角子彈\r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n    // 每 4-8 秒，三角移動 + 自身旋轉\r\n    const rotateAxisAngleTime = new Date();\r\n    if (rotateAxisAngleTime - this.beforeRotateAxisAngleTime > (Math.random() * 4000 + 4000)) {\r\n      const randomRotateAngle = (Math.random() > 0.25 ? -1 : 1) * (30 * Math.random() + 45);\r\n      // 以 0.8 秒移動\r\n      TweenLite.to(this, 0.8, {\r\n        axisRotateAngle: `+=${randomRotateAngle}`,\r\n        ease: Power0.easeNone,\r\n      });\r\n      // 以 1.2 秒自身旋轉\r\n      TweenLite.to(this, 1.2, {\r\n        rotate: `+=${randomRotateAngle + 360}`,\r\n        ease: Power2.easeInOut,\r\n      });\r\n      this.beforeRotateAxisAngleTime = rotateAxisAngleTime;\r\n    }\r\n    // 每 2.4-3.6 秒，發射 1 發子彈\r\n    const shootTime = new Date();\r\n    if (shootTime - this.beforeShootTime > (Math.random() * 1200 + 2400)) {\r\n    // if (!this.bullets.length) {\r\n      this.bullets.push(new TriangleBullet({\r\n        p: {\r\n          x: this.originalPos.x,\r\n          y: this.originalPos.y,\r\n        },\r\n        axisRotateR: this.axisRotateR,\r\n        rotateAngle: this.rotate,\r\n        // rotate: this.rotate,\r\n      }));\r\n      this.beforeShootTime = shootTime;\r\n    }\r\n    // 當生命值剩 2，派副三角形攻擊\r\n    if (this.HP === 2 && !this.isReproduce) {\r\n      for (let i = 1; i <= 2; i += 1) {\r\n        subTriangles.push(new TriangleSub({\r\n          // axisRotateR: {\r\n          //   x: this.axisRotateR.x,\r\n          //   y: this.axisRotateR.y,\r\n          // },\r\n          axisRotateR: this.axisRotateR,\r\n          axisRotateAngle: this.axisRotateAngle,\r\n          rotate: this.rotate,\r\n          order: i,\r\n        }));\r\n      }\r\n      this.isReproduce = true;\r\n    }\r\n    // 當三角形撞上 shooter\r\n    enemyHitShooter(triangles, idx, this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n}\r\n\r\n\r\n\r\n/* Polygon 類別 */\r\nclass Polygon {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotatePos: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      axisRotateR: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      axisRotateAngle: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      rotate: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      HP: {\r\n        whole: 1,\r\n        big: 1,\r\n        small: 1,\r\n      },\r\n      axisRotateRV: {\r\n        whole: 2.4,\r\n        big: 2.4,\r\n        small: 2.4,\r\n      },\r\n      axisRotateAngleV: {\r\n        whole: 0.4,\r\n        big: 0.4,\r\n        small: 0.4,\r\n      },\r\n      rotateV: {\r\n        whole: 0.4,\r\n        big: 0.4,\r\n        small: 0.4,\r\n      },\r\n      color: globalColor.red,\r\n      isSplited: false,\r\n      isSplitedMove: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  get originalPos() {\r\n    return {\r\n      whole: {\r\n        x: this.axisRotatePos.x + this.axisRotateR.whole * Math.cos(this.axisRotateAngle.whole * degToPi),\r\n        y: this.axisRotatePos.y + this.axisRotateR.whole * Math.sin(this.axisRotateAngle.whole * degToPi),\r\n      },\r\n      big: {\r\n        x: this.axisRotatePos.x + this.axisRotateR.big * Math.cos(this.axisRotateAngle.big * degToPi),\r\n        y: this.axisRotatePos.y + this.axisRotateR.big * Math.sin(this.axisRotateAngle.big * degToPi),\r\n      },\r\n      small: {\r\n        x: this.axisRotatePos.x + this.axisRotateR.small * Math.cos(this.axisRotateAngle.small * degToPi),\r\n        y: this.axisRotatePos.y + this.axisRotateR.small * Math.sin(this.axisRotateAngle.small * degToPi),\r\n      },\r\n    };\r\n  }\r\n  draw() {\r\n    if (!this.isSplited) {\r\n      ctx.save();\r\n        ctx.translate(this.originalPos.whole.x, this.originalPos.whole.y);\r\n        ctx.rotate(this.rotate.whole * degToPi);\r\n        // 主體多邊形\r\n        ctx.beginPath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.moveTo(21 * Math.cos(8 * degToPi), 21 * Math.sin(8 * degToPi));\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.$triLineTo(34, 202);\r\n        ctx.$triLineTo(22, 255);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 右淡五邊形\r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n        ctx.moveTo(9.6, -2);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.$triLineTo(21, 8);\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(10, 36);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 下淡四邊形\r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n        ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.lineTo(-8.8, 0);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 閃電\r\n        drawLightning({\r\n          x: -0.8,\r\n          y: -16\r\n        });\r\n      ctx.restore();\r\n    } else {\r\n      // 大分裂四邊形\r\n      if (this.HP.big) {\r\n        ctx.save();\r\n          ctx.translate(this.originalPos.big.x, this.originalPos.big.y);\r\n          ctx.rotate(this.rotate.big * degToPi);\r\n          // 大分裂主體\r\n          ctx.beginPath();\r\n          ctx.fillStyle = this.color;\r\n          ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\r\n          ctx.$triLineTo(23, 150);\r\n          ctx.$triLineTo(34, 202);\r\n          ctx.$triLineTo(22, 255);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // 大分裂內下四邊形\r\n          ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n          ctx.beginPath();\r\n          ctx.moveTo(-8.8, 0);\r\n          ctx.$triLineTo(4.8, 64);\r\n          ctx.$triLineTo(23, 70);\r\n          ctx.$triLineTo(23, 150);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // 大分裂左閃電\r\n          drawLightning({\r\n            x: -12,\r\n            y: -8\r\n          }, 0.6);\r\n        ctx.restore();\r\n      }\r\n      // 小分裂四邊形\r\n      if (this.HP.small) {\r\n        ctx.save();\r\n          ctx.translate(this.originalPos.small.x, this.originalPos.small.y);\r\n          ctx.rotate(this.rotate.small * degToPi);\r\n          // 小分裂主體\r\n          ctx.beginPath();\r\n          ctx.fillStyle = this.color;\r\n          ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\r\n          ctx.$triLineTo(22, 255);\r\n          ctx.$triLineTo(22, 324);\r\n          ctx.$triLineTo(21, 8);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // 小分裂內下三角形\r\n          ctx.beginPath();\r\n          ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n          ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\r\n          ctx.$triLineTo(4.8, 64);\r\n          ctx.$triLineTo(23, 70);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // 小分裂內右五邊形\r\n          ctx.beginPath();\r\n          ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n          ctx.moveTo(9.6, -2);\r\n          ctx.$triLineTo(22, 324);\r\n          ctx.$triLineTo(21, 8);\r\n          ctx.$triLineTo(23, 70);\r\n          ctx.$triLineTo(10, 36);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // ctx.fillStyle = 'yellow';\r\n          // ctx.beginPath();\r\n          // ctx.arc(0, 0, 2, 0, Math.PI * 2)\r\n          // ctx.fill();\r\n          // 小分裂閃電\r\n          drawLightning({\r\n            x: 10,\r\n            y: -8\r\n          }, 0.5);\r\n        ctx.restore();\r\n      }\r\n    }\r\n  }\r\n  update(idx) {\r\n    if (!this.HP.whole) {\r\n      this.isSplited = true;\r\n    }\r\n    if (!this.isSplited) {\r\n      this.axisRotateR.whole = this.axisRotateR.big = this.axisRotateR.small -= this.axisRotateRV.whole;\r\n      this.rotate.whole = this.rotate.big = this.rotate.small += this.rotateV.whole;\r\n      // 當多邊形撞上 shooter\r\n      enemyHitShooter(polygons, idx, this.axisRotateR.whole, this.axisRotateAngle.whole);\r\n    } else {\r\n      if (!this.isSplitedMove) {\r\n        // const rotateOriginPos = 90 - 70;\r\n        // const rotateDirection = (((this.rotate.whole % 360) >= rotateOriginPos) && ((this.rotate.whole % 360) < (180 + rotateOriginPos))) ? -1 : 1;\r\n        const rotateDirection = Math.random() > 0.5 ? 1 : -1;\r\n        TweenLite.to(this.axisRotateAngle, 2.4, {\r\n          big: `+=${(Math.random() * 15 + 15) * rotateDirection}`,\r\n          small: `-=${(Math.random() * 15 + 15) * rotateDirection}`,\r\n          ease: Circ.easeOut,\r\n        });\r\n        TweenLite.to(this.rotate, 3.2, {\r\n          big: `-=${Math.random() * 90 + 180}`,\r\n          small: `+=${Math.random() * 90 + 180}`,\r\n          ease: Power4.easeOut,\r\n        });\r\n        this.isSplitedMove = true;\r\n      }\r\n      // 當大分裂撞上 shooter\r\n      if (this.HP.big) {\r\n        this.axisRotateR.big -= this.axisRotateRV.big;\r\n        enemyHitShooter(polygons, idx, this.axisRotateR.small, this.axisRotateAngle.small, this.HP, 'big');\r\n      }\r\n      // 當小分裂撞上 shooter\r\n      if (this.HP.small) {\r\n        this.axisRotateR.small -= this.axisRotateRV.small;\r\n        enemyHitShooter(polygons, idx, this.axisRotateR.small, this.axisRotateAngle.small, this.HP, 'small');\r\n      }\r\n    }\r\n    // if (!this.isInBoundary) {\r\n    //   this.p.x = -48;\r\n    //   this.p.y = -32;\r\n    //   this.v.x = 0.5 * Math.random() + 0.5;\r\n    //   this.v.y = 0.5 * Math.random() + 0.5;\r\n    // }\r\n  }\r\n  // get isInBoundary() {\r\n  //   const xInRange = -48 <= this.p.x && this.p.x <= gameW + 48;\r\n  //   const yInRange = -48 <= this.p.y && this.p.y <= gameH + 48;\r\n  //   return xInRange && yInRange;\r\n  // }\r\n}\r\n\r\nfunction enemyHitShooter(enemies, enemyIdx, enemyAxisRotateR, enemyAxisRotateAngle, splitedPolygonHP, splitedPolygonName) {\r\n  const shooterR = 34;\r\n  const shieldR = shooterR + 36;\r\n  const shooterInnerCirLineW = 6;\r\n  const shieldLineW = 4;\r\n  const shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (225 * degToPi);\r\n  function judgeEnemyHit() {\r\n    if (!splitedPolygonName) {\r\n      enemies.splice(enemyIdx, 1);\r\n    } else {\r\n      splitedPolygonName === 'big' ? splitedPolygonHP.big -= 1 : splitedPolygonHP.small -= 1;\r\n      if (!splitedPolygonHP.big && !splitedPolygonHP.small) {\r\n        enemies.splice(enemyIdx, 1);\r\n      }\r\n    }\r\n  }\r\n  // 當敵人撞上 shooter 主體\r\n  if (enemyAxisRotateR <= (shooterR + (shooterInnerCirLineW / 2))) {\r\n    game.shooter.HP -= 1;\r\n    judgeEnemyHit();\r\n    // 當敵人撞上 shooter 護盾\r\n  } else if (shieldAngleRange && (enemyAxisRotateR <= (shieldR + (shieldLineW / 2)))) {\r\n    judgeEnemyHit();\r\n  }\r\n}\r\n\r\n/* Shooter 類別 */\r\nlet shooterBullets = [];\r\nclass Shooter {\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      color: globalColor.white,\r\n      r: 34,\r\n      rotateAngle: 0,\r\n      bullet: null,\r\n      HP: 9,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save(); \r\n      // 輪圍\r\n      ctx.translate(this.p.x, this.p.y);\r\n      // ctx.rotate(this.rotateAngle);\r\n      ctx.save();\r\n        ctx.beginPath();\r\n        ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n        ctx.shadowBlur = 16;\r\n        ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n        ctx.strokeStyle = this.color;\r\n        ctx.lineWidth = 6;\r\n        ctx.stroke();\r\n        // 輪軸\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(this.r, 0, this.rotateAngle);\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(this.r, 120, this.rotateAngle);\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(this.r, 240, this.rotateAngle);\r\n        ctx.lineWidth = 3;\r\n        ctx.stroke();\r\n      ctx.restore();\r\n      // 輪圍外虛線\r\n      ctx.strokeStyle = this.color;\r\n      const outerR = this.r + 22;\r\n      for (let i = 0; i < 360; i += 1) {\r\n        const x1 = outerR * Math.cos(i * degToPi + this.rotateAngle);\r\n        const y1 = outerR * Math.sin(i * degToPi + this.rotateAngle);\r\n        const x2 = outerR * Math.cos((i + 1) * degToPi + this.rotateAngle);\r\n        const y2 = outerR * Math.sin((i + 1) * degToPi + this.rotateAngle);\r\n        if (i % 10 < 5) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(x1, y1);\r\n          ctx.lineTo(x2, y2);\r\n          ctx.lineWidth = 1;\r\n          ctx.stroke();\r\n        }\r\n      }\r\n      // 護盾\r\n      const shieldR = this.r + 36;\r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, shieldR, 135 * degToPi + this.rotateAngle, 225 * degToPi + this.rotateAngle);\r\n      ctx.lineWidth = 4;\r\n      ctx.stroke();\r\n      // 砲口\r\n      ctx.beginPath();\r\n      ctx.save();\r\n        ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n        ctx.shadowBlur = 16;\r\n        ctx.rotate(this.rotateAngle);\r\n        ctx.translate(this.r + 8, 0);\r\n        ctx.moveTo(0, 0);\r\n        // 下方長方形長 16、寬（高） 12\r\n        // 上方梯形高 14、上邊寬 8\r\n        ctx.lineTo(0, 8);\r\n        ctx.lineTo(12, 8);\r\n        ctx.lineTo(26, 4);\r\n        ctx.lineTo(26, -4);\r\n        ctx.lineTo(12, -8);\r\n        ctx.lineTo(0, -8);\r\n        ctx.closePath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.fill();\r\n      ctx.restore();\r\n    ctx.restore();\r\n\r\n    this.shoot();\r\n  }\r\n  update() {\r\n    this.rotateAngle = mouseMoveAngle;\r\n    shooterBullets.forEach((bullet, idx) => {\r\n      bullet.update(idx);\r\n    });\r\n  }\r\n  shoot() {\r\n    shooterBullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n}\r\n\r\n\r\n/* Shooter 子彈 */\r\nclass ShooterBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      // p: new Vec2(0, 0),\r\n      bodyLength: 15,\r\n      axisRotateR: 0,\r\n      color: globalColor.white,\r\n      v: 8,\r\n      rotateAngle: 0,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(gameW / 2, gameH / 2);\r\n      ctx.rotate(this.rotateAngle);\r\n      // ctx.translate(this.p.x, this.p.y);\r\n      // 殘影\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\r\n      ctx.arc(-7 + this.axisRotateR, 0, 3, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\r\n      ctx.arc(-12 + this.axisRotateR, 0, 2, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\r\n      ctx.arc(-15 + this.axisRotateR, 0, 1, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // 園底\r\n      ctx.beginPath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.arc(0 + this.axisRotateR, 0, 4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // 尖頭\r\n      ctx.beginPath();\r\n      ctx.moveTo(3 + this.axisRotateR, 3);\r\n      ctx.lineTo(this.bodyLength + this.axisRotateR, 0);\r\n      ctx.lineTo(3 + this.axisRotateR, -3);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(bulletIdx) {\r\n    // 移動子彈\r\n    this.axisRotateR += this.v;\r\n    // 判斷子彈有無射中圓形\r\n    circles.forEach((circle, cirIdx) => {\r\n      // 取得兩個外切線所構成角度的一半\r\n      const anglePan = Math.asin(circle.r / circle.axisRotateR);\r\n      // 射中角度範圍\r\n      const shotAngleRange = this.rotateAngle >= ((circle.axisRotateAngle % 360) * degToPi - anglePan) && this.rotateAngle <= ((circle.axisRotateAngle % 360) * degToPi + anglePan);\r\n      // 射中距離範圍\r\n      const shotRRange = ((this.axisRotateR + this.bodyLength) >= (circle.axisRotateR - (circle.r / 2))) && ((this.axisRotateR + this.bodyLength) <= (circle.axisRotateR + (circle.r / 2)));\r\n      // 判斷子彈有無射中圓形\r\n      if (shotAngleRange && shotRRange) {\r\n        // 移除子彈\r\n        shooterBullets.splice(bulletIdx, 1);\r\n        // 扣 1 生命值\r\n        circle.HP -= 1;\r\n        if (circle.HP === 0) {\r\n          // 若生命值 0，移除圓形\r\n          circles.splice(cirIdx, 1);\r\n        }\r\n      }\r\n    });\r\n    // 判斷子彈有無射中三角形\r\n    triangles.forEach((triangle, triIdx) => {\r\n      // const lengthX = triangle.axisRotateR.x * Math.cos(triangle.axisRotateAngle * degToPi);\r\n      // const lengthY = triangle.axisRotateR.y * Math.sin(triangle.axisRotateAngle * degToPi);\r\n      // const length = Math.sqrt(lengthX * lengthX + lengthY * lengthY);\r\n\r\n      // 取得射中角度範圍的一半\r\n      const lengthX = triangle.axisRotateR + (triangle.r / 2);\r\n      const lengthY = (triangle.r / 2) * Math.sqrt(3);\r\n      const anglePan = Math.atan2(lengthY, lengthX);\r\n      // 射中角度範圍\r\n      const shotAngleRange = this.rotateAngle >= (((triangle.axisRotateAngle + 360) % 360) * degToPi - anglePan) && this.rotateAngle <= (((triangle.axisRotateAngle + 360) % 360) * degToPi + anglePan);\r\n      // 射中距離範圍\r\n      const shotRRange = ((this.axisRotateR + this.bodyLength) >= triangle.axisRotateR) && ((this.axisRotateR + this.bodyLength) <= (triangle.axisRotateR + (triangle.r / 2)))\r\n      // 判斷子彈有無射中三角形\r\n      if (shotAngleRange && shotRRange) {\r\n        // 移除子彈\r\n        shooterBullets.splice(bulletIdx, 1);\r\n        // 扣 1 生命值\r\n        triangle.HP -= 1;\r\n        if (triangle.HP === 0) {\r\n          // 若生命值 0，移除三角形\r\n          triangles.splice(triIdx, 1);\r\n        }\r\n      }\r\n    });\r\n    // 判斷子彈有無射中多邊形\r\n    // FIXME 當 polygon.axisRotateAngle 在 0° 附近時，上半部分（角度為負的地方）會出問題，因為 mouseMoveAngle（正數）恆大於負\r\n    polygons.forEach((polygon, polyIdx) => {\r\n      // 當多邊形未分裂\r\n      if (polygon.HP.whole) {\r\n        const polyaxisRotateAngle = polygon.axisRotateAngle.whole;\r\n        const polyRotate = polygon.rotate.whole;\r\n        // 取得兩側射中最大角度\r\n        const sideA = polygon.axisRotateR.whole;\r\n        const sideB1 = 34;\r\n        const sideB2 = 21;\r\n        /**\r\n         * 兩側點（8°、202°）愈靠近軸心，夾角便愈大\r\n         * 相同軸半徑下，當多邊形　axisRotateAngle 180°，rotate 75° 時，兩側點離軸心（幾乎）最近，angleB 相同\r\n         * 270 - 202 = 68\r\n         * 90 - 8 = 82\r\n         * (68 + 82) / 2 = 75\r\n         */\r\n        const sideC1 = cosineFormula(sideA, sideB1, (360 - (202 + 75)));\r\n        const sideC2 = cosineFormula(sideA, sideB2, (8 + 75));\r\n        const angleB1 = getAngleB(sideA, sideB1, sideC1);\r\n        const angleB2 = getAngleB(sideA, sideB2, sideC2);\r\n        /**\r\n         * 射中角度範圍\r\n         * 當多邊形的 axisRotateAngle、rotate 不同，要加上與減去的角度也不一樣\r\n         * 多邊形不會繞軸旋轉， axisRotateAngle 固定，不用 % 360\r\n         */\r\n        let shotAngleRange;\r\n        const bottomJudge = (polyaxisRotateAngle <= 180) && ((polyRotate % 360) < 75 || (polyRotate % 360) >= 255);\r\n        const topJudge = (polyaxisRotateAngle > 180) && ((polyRotate % 360) >= 75 || (polyRotate % 360) < 255);\r\n        if (bottomJudge || topJudge) {\r\n          shotAngleRange = (this.rotateAngle >= (polyaxisRotateAngle * degToPi - angleB2)) && (this.rotateAngle <= (polyaxisRotateAngle * degToPi + angleB1));\r\n        } else {\r\n          shotAngleRange = (this.rotateAngle >= (polyaxisRotateAngle * degToPi - angleB1)) && (this.rotateAngle <= (polyaxisRotateAngle * degToPi + angleB2));\r\n        }\r\n        // 射中距離範圍\r\n        const shotRRange = ((this.axisRotateR + this.bodyLength) >= sideA) && ((this.axisRotateR + this.bodyLength) <= (sideA + 9));\r\n        // 判斷子彈有無射中多邊形\r\n        if (shotAngleRange && shotRRange) {\r\n          // 移除子彈\r\n          shooterBullets.splice(bulletIdx, 1);\r\n          // 扣 1 生命值\r\n          polygon.HP.whole -= 1;\r\n        }\r\n      } else {\r\n        // 當多邊形分裂\r\n        // 大分裂\r\n        if (polygon.HP.big) {\r\n          const polyaxisRotateAngle = polygon.axisRotateAngle.big;\r\n          const polyRotate = polygon.rotate.big;\r\n          // 取得兩側射中最大角度\r\n          const sideA = polygon.axisRotateR.big;\r\n          const sideB1 = 34;\r\n          const sideB2 = 23;\r\n          /**\r\n           * 兩側點（70°、202°）愈靠近軸心，夾角便愈大\r\n           * 相同軸半徑下，當多邊形　axisRotateAngle 0°，rotate 44° 時，兩側點離軸心（幾乎）最近，angleB 相同\r\n           * 270 - 202 = 68\r\n           * 90 - 70 = 20\r\n           * (68 + 20) / 2 = 44\r\n           */\r\n          const sideC1 = cosineFormula(sideA, sideB1, ((202 + 44) - 180));\r\n          const sideC2 = cosineFormula(sideA, sideB2, (180 - (70 + 44)));\r\n          const angleB1 = getAngleB(sideA, sideB1, sideC1);\r\n          const angleB2 = getAngleB(sideA, sideB2, sideC2);\r\n          /**\r\n           * 射中角度範圍\r\n           * 當多邊形的 axisRotateAngle、rotate 不同，要加上與減去的角度也不一樣\r\n           * 多邊形不會繞軸旋轉， axisRotateAngle 固定，不用 % 360\r\n           */\r\n          let shotAngleRange;\r\n          const bottomJudge = (polyaxisRotateAngle <= 180) && ((polyRotate % 360) < 44 || (polyRotate % 360) >= 224);\r\n          const topJudge = (polyaxisRotateAngle > 180) && ((polyRotate % 360) >= 44 || (polyRotate % 360) < 224);\r\n          if (bottomJudge || topJudge) {\r\n            shotAngleRange = (this.rotateAngle >= (polyaxisRotateAngle * degToPi - angleB2)) && (this.rotateAngle <= (polyaxisRotateAngle * degToPi + angleB1));\r\n          } else {\r\n            shotAngleRange = (this.rotateAngle >= (polyaxisRotateAngle * degToPi - angleB1)) && (this.rotateAngle <= (polyaxisRotateAngle * degToPi + angleB2));\r\n          }\r\n          // 設中距離範圍\r\n          const shotRRange = ((this.axisRotateR + this.bodyLength) >= sideA + 8) && ((this.axisRotateR + this.bodyLength) <= (sideA + 16));\r\n          // 判斷子彈有無射中大分裂\r\n          if (shotAngleRange && shotRRange) {\r\n            // 移除子彈\r\n            shooterBullets.splice(bulletIdx, 1);\r\n            // 扣 1 生命值\r\n            polygon.HP.big -= 1;\r\n          }\r\n        }\r\n        // 小分裂\r\n        if (polygon.HP.small) {\r\n          const polyaxisRotateAngle = polygon.axisRotateAngle.small;\r\n          const polyRotate = polygon.rotate.small;\r\n          // 取得兩側射中最大角度\r\n          const sideA = polygon.axisRotateR.small;\r\n          const sideB1 = 22;\r\n          const sideB2 = 23;\r\n          /**\r\n           * 兩側點（70°、255°）愈靠近軸心，夾角便愈大\r\n           * 相同軸半徑下，當多邊形　axisRotateAngle 0°，rotate 17.5° 時，兩側點離軸心（幾乎）最近，angleB 相同\r\n           * 270 - 255 = 15\r\n           * 90 - 70 = 20\r\n           * (15 + 20) / 2 = 17.5\r\n           */\r\n          const sideC1 = cosineFormula(sideA, sideB1, ((255 + 17.5) - 180));\r\n          const sideC2 = cosineFormula(sideA, sideB2, (180 - (70 + 17.5)));\r\n          const angleB1 = getAngleB(sideA, sideB1, sideC1);\r\n          const angleB2 = getAngleB(sideA, sideB2, sideC2);\r\n          /**\r\n           * 射中角度範圍\r\n           * 當多邊形的 axisRotateAngle、rotate 不同，要加上與減去的角度也不一樣\r\n           * 多邊形不會繞軸旋轉， axisRotateAngle 固定，不用 % 360\r\n           */\r\n          let shotAngleRange;\r\n          const bottomJudge = (polyaxisRotateAngle <= 180) && ((polyRotate % 360) < 17.5 || (polyRotate % 360) >= 197.5);\r\n          const topJudge = (polyaxisRotateAngle > 180) && ((polyRotate % 360) >= 17.5 || (polyRotate % 360) < 197.5);\r\n          if (bottomJudge || topJudge) {\r\n            shotAngleRange = (this.rotateAngle >= (polyaxisRotateAngle * degToPi - angleB2)) && (this.rotateAngle <= (polyaxisRotateAngle * degToPi + angleB1));\r\n          } else {\r\n            shotAngleRange = (this.rotateAngle >= (polyaxisRotateAngle * degToPi - angleB1)) && (this.rotateAngle <= (polyaxisRotateAngle * degToPi + angleB2));\r\n          }\r\n          // 設中距離範圍\r\n          const shotRRange = ((this.axisRotateR + this.bodyLength) >= sideA + 8) && ((this.axisRotateR + this.bodyLength) <= (sideA + 16));\r\n          // 判斷子彈有無射中小分裂\r\n          if (shotAngleRange && shotRRange) {\r\n            // 移除子彈\r\n            shooterBullets.splice(bulletIdx, 1);\r\n            // 扣 1 生命值\r\n            polygon.HP.small -= 1;\r\n          }\r\n        }\r\n        // 如果大小分裂都被擊斃了，那就移除此多邊形\r\n        if (!polygon.HP.big && !polygon.HP.small) {\r\n          polygons.splice(polyIdx, 1);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n\r\n\r\n/* Sub Triangle 類別 */\r\nclass TriangleSub {;\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotatePos: {\r\n        x: gameW / 2,\r\n        y: gameH / 2,\r\n      },\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      // r: 26 * 0.4,\r\n      r: 10.4,\r\n      rotate: 0,\r\n      rotateV: 4,\r\n      color: globalColor.blue,\r\n      HP: 2,\r\n      isReproduceMoving: false,\r\n      order: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  get originalPos() {\r\n    return {\r\n      x: this.axisRotatePos.x + this.axisRotateR * Math.cos(this.axisRotateAngle * degToPi),\r\n      y: this.axisRotatePos.y + this.axisRotateR * Math.sin(this.axisRotateAngle * degToPi),\r\n    };\r\n  }\r\n  draw() {\r\n    // const scale = 0.4;\r\n    const triangleOuterBigR = this.r + 1.6;\r\n    const triangleInnerBigR = this.r - 6.4;\r\n    const triangleInnerSmallR = this.r - 8.8;\r\n    ctx.save();\r\n      // 淡三角\r\n      ctx.translate(this.originalPos.x, this.originalPos.y);\r\n      // ctx.scale(0.4, 0.4);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      ctx.save();\r\n        ctx.translate(0.8, -Math.sqrt(1.92));\r\n        ctx.beginPath();\r\n        ctx.moveTo(triangleOuterBigR * Math.cos(0), triangleOuterBigR * Math.sin(0));\r\n        ctx.lineTo(triangleOuterBigR * Math.cos(120 * degToPi), triangleOuterBigR * Math.sin(120 * degToPi));\r\n        ctx.lineTo(triangleOuterBigR * Math.cos(240 * degToPi), triangleOuterBigR * Math.sin(240 * degToPi));\r\n        ctx.closePath();\r\n        ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n        ctx.fill();\r\n      ctx.restore();\r\n      // 主體三角\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.r * Math.cos(0), this.r * Math.sin(0));\r\n      ctx.lineTo(this.r * Math.cos(120 * degToPi), this.r * Math.sin(120 * degToPi));\r\n      ctx.lineTo(this.r * Math.cos(240 * degToPi), this.r * Math.sin(240 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n      // 大白三角\r\n      ctx.translate(-1.28, -0.64);\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(triangleInnerBigR * Math.cos(30 * degToPi), triangleInnerBigR * Math.sin(30 * degToPi));\r\n      ctx.lineTo(triangleInnerBigR * Math.cos(90 * degToPi), triangleInnerBigR * Math.sin(90 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 小白三角\r\n      ctx.translate(0, -3.52);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(triangleInnerSmallR * Math.cos(30 * degToPi), triangleInnerSmallR * Math.sin(30 * degToPi));\r\n      ctx.lineTo(triangleInnerSmallR * Math.cos(90 * degToPi), triangleInnerSmallR * Math.sin(90 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx) {\r\n    this.rotate += this.rotateV;\r\n    if (!this.isReproduceMoving) {\r\n      TweenLite.to(this, 0.8, {\r\n        axisRotateAngle: `${this.order === 1 ? '+=' : '-='}10`,\r\n        ease: Power2.easeOut,\r\n        onComplete: () => {\r\n          TweenLite.to(this, 1.6, {\r\n            axisRotateR: 0,\r\n            ease: Power1.easeIn,\r\n          });\r\n        }\r\n      });\r\n      this.isReproduceMoving = true;\r\n    }\r\n    // 當小三角形撞上 shooter\r\n    enemyHitShooter(subTriangles, idx, this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n}\r\n\r\n\r\n/* Circle 子彈 */\r\nclass CircleBullet {;\r\n  constructor(args) {\r\n    const def = {\r\n      originalPos: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      axisRotateR: 0,\r\n      color: globalColor.orange,\r\n      moveX: 0,\r\n      moveXV: -3,\r\n      // v: 4,\r\n      rotateAngle: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.originalPos.x, this.originalPos.y);\r\n      ctx.rotate(this.rotateAngle * degToPi); \r\n      // ctx.scale(1.6, 0.68);\r\n      // ctx.scale(1, 0.9);\r\n      ctx.beginPath();\r\n      // ctx.arc(this.moveX + 22 + 10, 0, 4, 0, Math.PI * 2);\r\n      ctx.arc(this.moveX, 0, 4, 0, Math.PI * 2);\r\n      // ctx.arc(this.axisRotateR + 16, 0, 4, 0, Math.PI * 2);\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    const shooterR = 34;\r\n    const shieldR = shooterR + 36;\r\n    const shooterInnerCirLineW = 6;\r\n    const shieldLineW = 4;\r\n    // 圓形子彈移動\r\n    this.moveX += this.moveXV;\r\n    // 當圓形子彈射中 shooter 主體\r\n    if (-this.moveX >= (this.axisRotateR - shooterR - (shooterInnerCirLineW / 2))) {\r\n      // shooter 命減 1\r\n      game.shooter.HP -= 1;\r\n      // 移除子彈\r\n      arr.splice(idx, 1);\r\n    }\r\n    // 當圓形子彈射中 shooter 的護盾\r\n    const shieldAngleRange = Math.abs(mouseMoveAngle - this.rotateAngle * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - this.rotateAngle * degToPi) <= (225 * degToPi);  \r\n    if (shieldAngleRange && (-this.moveX >= (this.axisRotateR - shieldR - (shieldLineW / 2)))) {\r\n      // 移除子彈\r\n      arr.splice(idx, 1);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/* Triangle 子彈 */\r\nclass TriangleBullet {;\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      moveX: 0,\r\n      moveXV: -4,\r\n      rotateAngle: 0,\r\n      color: globalColor.blue,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.p.x, this.p.y);\r\n      ctx.rotate(this.rotateAngle * degToPi);\r\n      ctx.translate(this.moveX, 0);\r\n      // 主體三角子彈\r\n      ctx.fillStyle = this.color;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-16, 0);\r\n      ctx.$triLineTo(38, 174);\r\n      ctx.$triLineTo(16.8, 200);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 淡三角子彈\r\n      ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(-16.4, 0);\r\n      ctx.$triLineTo(38, 174);\r\n      ctx.$triLineTo(15.6, 168);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    const shooterR = 34;\r\n    const shieldR = shooterR + 36;\r\n    const shooterInnerCirLineW = 6;\r\n    const shieldLineW = 4;\r\n    const triBulletLength = 37.8;\r\n    // 三角子彈移動\r\n    this.moveX += this.moveXV;\r\n    // 當三角子彈射中 shooter 主體\r\n    if (-this.moveX >= (this.axisRotateR - (triBulletLength + shooterR + (shooterInnerCirLineW / 2)))) {\r\n      // shooter 命減 1\r\n      game.shooter.HP -= 1;\r\n      // 移除三角子彈\r\n      arr.splice(idx, 1);\r\n    }\r\n    // 當三角子彈射中 shooter 的護盾\r\n    const shieldAngleRange = Math.abs(mouseMoveAngle - (this.rotateAngle % 360) * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - (this.rotateAngle % 360) * degToPi) <= (225 * degToPi);\r\n    if (shieldAngleRange && (-this.moveX >= (this.axisRotateR - (triBulletLength + shieldR + (shieldLineW / 2))))) {\r\n      // 移除三角子彈\r\n      arr.splice(idx, 1);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n// 繪製電池\r\nfunction drawBattery(p) {\r\n  ctx.save();\r\n    ctx.translate(p.x, p.y);\r\n    ctx.fillStyle = globalColor.orange;\r\n    // 瓶身\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(-24, 0);\r\n    ctx.lineTo(-24, 42);\r\n    ctx.lineTo(0, 42);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // 瓶底\r\n    ctx.save();\r\n      ctx.translate(0, 44);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(-24, 0);\r\n      ctx.lineTo(-24, 3);\r\n      ctx.lineTo(0, 3);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 瓶蓋\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.save();\r\n      ctx.translate(-6.75, 0);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, -3);\r\n      ctx.lineTo(-10.5, -3);\r\n      ctx.lineTo(-10.5, -0);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 閃電\r\n    // ctx.strokeStyle = globalColor.white;\r\n    drawLightning({ x: -11, y: -9 });\r\n    // ctx.translate(-11, 9);\r\n    // ctx.beginPath();\r\n    // ctx.moveTo(0, 0);\r\n    // ctx.rotate(18 * degToPi);\r\n    // ctx.lineTo(0, 10);\r\n    // ctx.translate(0, 10);\r\n    // ctx.rotate(-18 * degToPi);\r\n\r\n    // ctx.lineTo(10, 0);\r\n    // ctx.translate(10, 0);\r\n\r\n    // ctx.rotate(28 * degToPi);\r\n    // ctx.lineTo(0, 16);\r\n    // ctx.translate(0, 16);\r\n    // ctx.rotate(-28 * degToPi);\r\n\r\n    // ctx.rotate(3.6 * degToPi);\r\n    // ctx.lineTo(0, -10);\r\n    // ctx.translate(0, -10);\r\n    // ctx.rotate(-3.6 * degToPi);\r\n\r\n    // ctx.lineTo(-8, 0);\r\n    // ctx.closePath();\r\n    // ctx.fill();\r\n  ctx.restore();\r\n}\r\n\r\n// 餘弦定理\r\nfunction cosineFormula(a, b, angle) {\r\n  return Math.sqrt(a * a + b * b - 2 * a * b * Math.cos(angle * degToPi));\r\n}\r\n\r\nfunction getAngleB(a, b, c) {\r\n  return Math.acos((a * a + c * c - b * b) / (2 * a * c));\r\n}\r\n\r\n// 繪製閃電\r\nfunction drawLightning(translate =  { x: 0, y: 0 }, scale = 1 ) {\r\n  ctx.fillStyle = globalColor.white;\r\n  ctx.translate(translate.x, translate.y);\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, 0);\r\n  ctx.rotate(18 * degToPi);\r\n  ctx.lineTo(0, 10 * scale);\r\n  ctx.translate(0, 10 * scale);\r\n  ctx.rotate(-18 * degToPi);\r\n\r\n  ctx.lineTo(10 * scale, 0);\r\n  ctx.translate(10 * scale, 0);\r\n\r\n  ctx.rotate(28 * degToPi);\r\n  ctx.lineTo(0, 16 * scale);\r\n  ctx.translate(0, 16 * scale);\r\n  ctx.rotate(-28 * degToPi);\r\n\r\n  ctx.rotate(3.6 * degToPi);\r\n  ctx.lineTo(0, -10 * scale);\r\n  ctx.translate(0, -10 * scale);\r\n  ctx.rotate(-3.6 * degToPi);\r\n\r\n  ctx.lineTo(-8 * scale, 0);\r\n  ctx.closePath();\r\n  ctx.fill();\r\n}\r\n\r\n/* Initialize Game Logic */\r\n// function init() {\r\n\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n/* Update Game Logic */\r\n// function update() {\r\n//   time += 1;\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n/* Update Picture */\r\n// function draw() {\r\n  // clear background\r\n  // ctx.fillStyle = globalColor.blueDark;\r\n  // ctx.fillRect(0, 0, gameW, gameH);\r\n\r\n  // draw here\r\n  // ...\r\n\r\n  // draw mouse\r\n  // ctx.fillStyle = 'red';\r\n  // ctx.beginPath();\r\n  // ctx.circle(mouseMovePos, 3);\r\n  // ctx.fill();\r\n\r\n  // ctx.save();\r\n  // ctx.translate(mouseMovePos.x, mouseMovePos.y);\r\n  // ctx.strokeStyle = 'red';\r\n  // const length = 20;\r\n  // ctx.beginPath();\r\n  // ctx.fillText(mouseMovePos, 10, -10);\r\n  // ctx.line(new Vec2(-length, 0), new Vec2(length, 0));\r\n  // ctx.line(new Vec2(0, -length), new Vec2(0, length));\r\n  // ctx.stroke();\r\n  // ctx.restore();\r\n\r\n  // requestAnimationFrame(draw);\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n/* Page Loaded */\r\nfunction handleLoad() {\r\n  game = new Game();\r\n  initCanvas();\r\n  game.init();\r\n  // init();\r\n  // requestAnimationFrame(draw);\r\n  // setInterval(update, 1000 / updateFPS);\r\n}\r\n\r\n// load & resize event\r\nwindow.addEventListener('load', handleLoad);\r\nwindow.addEventListener('resize', initCanvas);\r\n\r\n\r\n\r\n\r\n\r\n/* Mouse Events & Recording */\r\n// const mouseMovePos = new Vec2(0, 0);\r\nlet mouseMovePos = {};\r\nlet mouseMoveAngle = 0;\r\n// let mouseUpPos = new Vec2(0, 0);\r\n// let mouseDownPos = new Vec2(0, 0);\r\n\r\n// window.addEventListener('mousemove', handleMouseMove);\r\n// window.addEventListener('mouseup', handleMouseUp);\r\n// window.addEventListener('mousedown', handleMouseDown);\r\ncanvas.addEventListener('mousemove', handleMouseMove);\r\n\r\nfunction handleMouseMove(evt) {\r\n  mouseMovePos.x = evt.x - ww / 2;\r\n  mouseMovePos.y = evt.y - wh / 2;\r\n  const angle = Math.atan2(mouseMovePos.y, mouseMovePos.x);\r\n  mouseMoveAngle = angle < 0 ? (angle + 2 * Math.PI) : angle;\r\n  // mouseMoveAngle = Math.atan2(mouseMovePos.y, mouseMovePos.x);\r\n};\r\n\r\ncanvas.addEventListener('click', handleClick);\r\n\r\nlet beforeShootTime = new Date();\r\nfunction handleClick() {\r\n  const shootTime = new Date();\r\n  if (shootTime - beforeShootTime > 400) {\r\n    shooterBullets.push(new ShooterBullet({\r\n      // 34 + 12 + 16\r\n      // p: new Vec2(62, 0),\r\n      axisRotateR: 62,\r\n      rotateAngle: mouseMoveAngle,\r\n    }));\r\n    beforeShootTime = shootTime;\r\n  }\r\n};\r\n\r\n\r\n// function handleMouseUp(evt) {\r\n//   mouseUpPos = mouseMovePos.clone();\r\n// }\r\n\r\n// function handleMouseDown(evt) {\r\n//   mouseDownPos = mouseMovePos.clone();\r\n// }"]}