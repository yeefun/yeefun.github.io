{"version":3,"sources":["index.js"],"names":["updateFPS","time","globalColor","red","orange","yellow","blue","blueDark","white","startBtn","document","getElementById","cover","gamePanel","batteryInfo","addEventListener","game","startGame","once","controls","gui","dat","GUI","shooterHpBar","prop","propImg","propLastTime","batteryNum","Vec2","x","y","v","s","Math","sqrt","newVal","newLength","unit","mul","set","atan2","length","canvas","ctx","getContext","ww","wh","gameW","gameH","$triLineTo","r","angle","angleAdd","lineTo","cos","degToPi","sin","initCanvas","width","height","documentElement","clientWidth","clientHeight","Prop","args","def","img","Image","src","axisRotateR","axisRotateAngle","Object","assign","complete","save","translate","originalPos","drawImage","beginPath","strokeStyle","arc","naturalWidth","naturalHeight","PI","stroke","restore","idx","shooter","cirSolidLineW","props","splice","propName","slice","split","getProp","coverCircle","coverTriangle","coverPolygon","circles","triangles","subTriangles","polygons","Game","isGameStart","isGameEnd","currentLevel","isInLevel1","render","update","fillStyle","fillRect","drawPanel","draw","forEach","circle","triangle","polygon","subTriangle","drawCover","requestAnimationFrame","HP","endGame","setLevelOne","generateProp","setTimeout","style","display","Shooter","cursor","opacity","push","Circle","rotate","axisRotateRV","axisRotateAngleV","rotateV","color","bullets","beforeRotateTime","Date","isRotating","circleBigR","circleSmallR","subaxisRotateR","fill","closePath","bullet","arr","rotateTime","random","TweenLite","to","ease","Power2","easeOut","onComplete","shoot","enemyHitShooter","i","timer","CircleBullet","p","rotateAngle","moveX","clearTimeout","Triangle","beforeRotateAxisAngleTime","beforeShootTime","isReproduce","shootTimer","triangleOuterBigR","triangleInnerBigR","triangleInnerSmallR","moveTo","rotateAxisAngleTime","randomRotateAngle","Power0","easeNone","easeInOut","TriangleSub","order","TriangleBullet","Polygon","whole","big","small","isSplited","isSplitedMove","form","drawLightning","rotateDirection","Circ","Power4","enemies","enemyIdx","enemyAxisRotateR","enemyAxisRotateAngle","splitedPolygonHP","splitedPolygonName","shieldAngleRange","abs","mouseMoveAngle","judgeWhichEnemyHit","enemyAttackShooterResult","shieldR","shieldLineW","statuses","isAttacked","shadowColor","shadowBlur","lineWidth","outerR","x1","y1","x2","y2","judgeStatus","shootTime","bulletNum","ShooterBullet","waveLength","waveFreq","waveAmp","waveFlow","lastTime","recoverOneHeart","drawCrackdownEffect","displayPropInfo","shooterStatus","find","status","crackdownR","effect","baseLog","heartWrapper","heart","createElement","classList","add","insertBefore","firstChild","textContent","minusLastTime","log","bodyLength","drawWaveBullet","bulletIdx","anglePanFn","shotRRangeFn","bulletMoveLength","cirIdx","asin","attackEnemy","triIdx","lengthX","lengthY","polyIdx","sideA","attackPolygon","beyondBoundary","degree","enemy","type","enemyAnglePan","enemyAngleMinus","enemyAngleAdd","shotAngleRange","judgeShotAngleRange","shotRRange","sideB1Len","sideB2Len","angleAB1","angleAB2","rotateAngleJudge","polyAxisRotateAngle","polyRotate","sideB1","sideB2","sideC1","cosineFormula","sideC2","bottomJudge","topJudge","angleB1","angleB2","getAngleB","polyAngleMinus","polyAngleAdd","shooterRotateAngle","shooterAnglePan","shooterAngleMinus","shooterAngleAdd","isReproduceMoving","Power1","easeIn","moveXV","enemyBulletAttackShooter","enemyBulletLen","shooterBodyCore","shooterBodyShield","angleGap","shooterHpBarOriginW","shooterHpBarW","offsetWidth","shooterHeart","querySelectorAll","parentNode","removeChild","drawBattery","a","b","c","acos","scale","handleLoad","init","window","mouseMovePos","handleMouseMove","evt","handleClick","handleKeyup","key"],"mappings":";;;;;;;;AAAA;AACA,IAAMA,SAAS,GAAG,EAAlB,C,CACA;AACA;;AACA,IAAIC,IAAI,GAAG,CAAX;AAEA,IAAMC,WAAW,GAAG;AAClBC,EAAAA,GAAG,EAAE,SADa;AAElBC,EAAAA,MAAM,EAAE,SAFU;AAGlBC,EAAAA,MAAM,EAAE,SAHU;AAIlBC,EAAAA,IAAI,EAAE,SAJY;AAKlBC,EAAAA,QAAQ,EAAE,SALQ;AAMlBC,EAAAA,KAAK,EAAE;AANW,CAApB;AASA,IAAMC,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAjB;AACA,IAAMC,KAAK,GAAGF,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAd;AACA,IAAME,SAAS,GAAGH,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAlB;AACA,IAAMG,WAAW,GAAGJ,QAAQ,CAACC,cAAT,CAAwB,cAAxB,CAApB;AAEAF,QAAQ,CAACM,gBAAT,CAA0B,OAA1B,EACE,YAAW;AACTC,EAAAA,IAAI,CAACC,SAAL;AACD,CAHH,EAIE;AACEC,EAAAA,IAAI,EAAE;AADR,CAJF;AAUA;;AACA,IAAMC,QAAQ,GAAG,CACf;AACA;AACA;AACA;AACA;AALe,CAAjB;AAQA,IAAMC,GAAG,GAAG,IAAIC,GAAG,CAACC,GAAR,EAAZ,C,CACA;AACA;AACA;AACA;AAEA;AACA;;AAEA,IAAMC,YAAY,GAAGb,QAAQ,CAACC,cAAT,CAAwB,IAAxB,CAArB;AACA,IAAMa,IAAI,GAAGd,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAb;AACA,IAAMc,OAAO,GAAGf,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAhB;AACA,IAAMe,YAAY,GAAGhB,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAArB;AACA,IAAMgB,UAAU,GAAGjB,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAnB;AAMA;;IACMiB,I;;;AACJ,gBAAYC,CAAZ,EAAeC,CAAf,EAAkB;AAAA;;AAChB,SAAKD,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AACD;;;;wBAEGD,C,EAAGC,C,EAAG;AACR,WAAKD,CAAL,GAASA,CAAT;AACA,WAAKC,CAAL,GAASA,CAAT;AACD;;;yBACID,C,EAAGC,C,EAAG;AACT,WAAKD,CAAL,IAAUA,CAAV;AACA,WAAKC,CAAL,IAAUA,CAAV;AACD;;;wBACGC,C,EAAG;AACL,aAAO,IAAIH,IAAJ,CAAS,KAAKC,CAAL,GAASE,CAAC,CAACF,CAApB,EAAuB,KAAKC,CAAL,GAASC,CAAC,CAACD,CAAlC,CAAP;AACD;;;wBACGC,C,EAAG;AACL,aAAO,IAAIH,IAAJ,CAAS,KAAKC,CAAL,GAASE,CAAC,CAACF,CAApB,EAAuB,KAAKC,CAAL,GAASC,CAAC,CAACD,CAAlC,CAAP;AACD;;;wBACGE,C,EAAG;AACL,aAAO,IAAIJ,IAAJ,CAAS,KAAKC,CAAL,GAASG,CAAlB,EAAqB,KAAKF,CAAL,GAASE,CAA9B,CAAP;AACD;;;4BACO;AACN,aAAO,IAAIJ,IAAJ,CAAS,KAAKC,CAAd,EAAiB,KAAKC,CAAtB,CAAP;AACD;;;0BACKC,C,EAAG;AACP,aAAO,KAAKF,CAAL,KAAWE,CAAC,CAACF,CAAb,IAAkB,KAAKC,CAAL,KAAWC,CAAC,CAACD,CAAtC;AACD;;;wBACY;AACX,aAAOG,IAAI,CAACC,IAAL,CAAU,KAAKL,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKC,CAAL,GAAS,KAAKA,CAA1C,CAAP;AACD,K;sBACUK,M,EAAQ;AACjB,UAAMC,SAAS,GAAG,KAAKC,IAAL,CAAUC,GAAV,CAAcH,MAAd,CAAlB;AACA,WAAKI,GAAL,CAASH,SAAS,CAACP,CAAnB,EAAsBO,SAAS,CAACN,CAAhC;AACD;;;wBACW;AACV,aAAOG,IAAI,CAACO,KAAL,CAAW,KAAKV,CAAhB,EAAmB,KAAKD,CAAxB,CAAP;AACD;;;wBACU;AACT,aAAO,KAAKS,GAAL,CAAS,IAAI,KAAKG,MAAlB,CAAP;AACD;;;;;AAOH;;;AACA,IAAMC,MAAM,GAAGhC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAf;AACA,IAAMgC,GAAG,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAZ;AACA,IAAIC,EAAJ;AACA,IAAIC,EAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,KAAJ,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAL,GAAG,CAACM,UAAJ,GAAiB,UAASC,CAAT,EAAYC,KAAZ,EAAiC;AAAA,MAAdC,QAAc,uEAAH,CAAG;AAChD,SAAOT,GAAG,CAACU,MAAJ,CAAWH,CAAC,GAAGjB,IAAI,CAACqB,GAAL,CAASH,KAAK,GAAGI,OAAR,GAAkBH,QAA3B,CAAf,EAAqDF,CAAC,GAAGjB,IAAI,CAACuB,GAAL,CAASL,KAAK,GAAGI,OAAR,GAAkBH,QAA3B,CAAzD,CAAP;AACD,CAFD;;AAIA,SAASK,UAAT,GAAsB;AACpBV,EAAAA,KAAK,GAAGL,MAAM,CAACgB,KAAf;AACAV,EAAAA,KAAK,GAAGN,MAAM,CAACiB,MAAf;AACAd,EAAAA,EAAE,GAAGnC,QAAQ,CAACkD,eAAT,CAAyBC,WAA9B;AACAf,EAAAA,EAAE,GAAGpC,QAAQ,CAACkD,eAAT,CAAyBE,YAA9B;AACD,C,CACD;;AAMA;;;IACMC,I;;;AACJ,gBAAYC,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVC,MAAAA,GAAG,EAAE,IAAIC,KAAJ,EADK;AAEVC,MAAAA,GAAG,EAAE,EAFK;AAGVC,MAAAA,WAAW,EAAE,CAHH;AAIVC,MAAAA,eAAe,EAAE,CAJP;AAKVpB,MAAAA,CAAC,EAAE;AALO,KAAZ;AAOAqB,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;2BACM;AACL,UAAI,CAAC,KAAKC,GAAL,CAASE,GAAd,EAAmB;AACjB,aAAKF,GAAL,CAASE,GAAT,GAAe,KAAKA,GAApB,CADiB,CAEjB;AACD;;AACD,UAAI,KAAKF,GAAL,CAASO,QAAb,EAAuB;AACrB9B,QAAAA,GAAG,CAAC+B,IAAJ;AACE/B,QAAAA,GAAG,CAACgC,SAAJ,CAAcC,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDzC,CAAlE,EAAqE+C,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDxC,CAAzH;AACAa,QAAAA,GAAG,CAACkC,SAAJ,CAAc,KAAKX,GAAnB,EAAwB,CAAxB,EAA2B,CAA3B;AACAvB,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACoC,WAAJ,GAAkB,0BAAlB;AACFpC,QAAAA,GAAG,CAACqC,GAAJ,CAAQ,KAAKd,GAAL,CAASe,YAAT,GAAwB,CAAhC,EAAmC,KAAKf,GAAL,CAASgB,aAAT,GAAyB,CAA5D,EAA+D,KAAKhC,CAApE,EAAuE,CAAvE,EAA0EjB,IAAI,CAACkD,EAAL,GAAU,CAApF;AACExC,QAAAA,GAAG,CAACyC,MAAJ,GAPmB,CAQnB;AACA;AACA;AACA;;AACFzC,QAAAA,GAAG,CAAC0C,OAAJ;AACD;AACF;;;2BACMC,G,EAAK;AACV,WAAKjB,WAAL,IAAoB,GAApB,CADU,CAEV;;AACA,UAAMkB,OAAO,GAAGvE,IAAI,CAACuE,OAArB;;AACA,UAAK,KAAKlB,WAAL,GAAmB,KAAKnB,CAAzB,IAAgCqC,OAAO,CAACrC,CAAR,GAAaqC,OAAO,CAACC,aAAR,GAAwB,CAAzE,EAA8E;AAC5ExE,QAAAA,IAAI,CAACyE,KAAL,CAAWC,MAAX,CAAkBJ,GAAlB,EAAuB,CAAvB;AACA,YAAMK,QAAQ,GAAG,KAAKvB,GAAL,CAASwB,KAAT,CAAe,EAAf,EAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAAjB;AACAN,QAAAA,OAAO,CAACO,OAAR,CAAgBH,QAAhB;AACD;AACF;;;;;;AAOH,IAAMpC,OAAO,GAAGtB,IAAI,CAACkD,EAAL,GAAU,GAA1B;AACA,IAAIY,WAAJ;AACA,IAAIC,aAAJ;AACA,IAAIC,YAAJ;AACA,IAAIjF,IAAJ;AAEA,IAAIkF,OAAO,GAAG,EAAd;AACA,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,YAAY,GAAG,EAAnB;AACA,IAAIC,QAAQ,GAAG,EAAf,C,CACA;;IAEMC,I;;;AACJ,gBAAYtC,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVsC,MAAAA,WAAW,EAAE,IADH;AAEVC,MAAAA,SAAS,EAAE,KAFD;AAGV;AACAjB,MAAAA,OAAO,EAAE,IAJC;AAKVkB,MAAAA,YAAY,EAAE,CALJ;AAMVC,MAAAA,UAAU,EAAE,KANF;AAOVjB,MAAAA,KAAK,EAAE,EAPG;AAQV9D,MAAAA,UAAU,EAAE;AARF,KAAZ;AAUA4C,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;2BACM;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAKhD,SAAL;AACA,WAAK0F,MAAL;AACA,WAAKC,MAAL;AACD;;;6BACQ;AAAA;;AACPjE,MAAAA,GAAG,CAACkE,SAAJ,GAAgB3G,WAAW,CAACK,QAA5B;AACAoC,MAAAA,GAAG,CAACmE,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB/D,KAAnB,EAA0BC,KAA1B;;AACA,UAAI,KAAKuD,WAAT,EAAsB;AACpB;AACA,aAAKQ,SAAL,GAFoB,CAGpB;;AACA,aAAKxB,OAAL,CAAayB,IAAb,GAJoB,CAKpB;;AACAd,QAAAA,OAAO,CAACe,OAAR,CAAgB,UAACC,MAAD,EAAY;AAC1BA,UAAAA,MAAM,CAACF,IAAP;AACD,SAFD,EANoB,CASpB;;AACAb,QAAAA,SAAS,CAACc,OAAV,CAAkB,UAACE,QAAD,EAAc;AAC9BA,UAAAA,QAAQ,CAACH,IAAT;AACD,SAFD,EAVoB,CAapB;;AACAX,QAAAA,QAAQ,CAACY,OAAT,CAAiB,UAACG,OAAD,EAAa;AAC5BA,UAAAA,OAAO,CAACJ,IAAR;AACD,SAFD,EAdoB,CAiBpB;;AACAZ,QAAAA,YAAY,CAACa,OAAb,CAAqB,UAACI,WAAD,EAAiB;AACpCA,UAAAA,WAAW,CAACL,IAAZ;AACD,SAFD,EAlBoB,CAqBpB;;AACA,aAAKvB,KAAL,CAAWwB,OAAX,CAAmB,UAACzF,IAAD,EAAU;AAC3BA,UAAAA,IAAI,CAACwF,IAAL;AACD,SAFD;AAGD,OAzBD,MAyBO;AACL;AACA,aAAKM,SAAL;AACD;;AACDC,MAAAA,qBAAqB,CAAC,YAAM;AAAE,QAAA,KAAI,CAACZ,MAAL;AAAe,OAAxB,CAArB;AACD;;;6BACQ;AAAA;;AACP,UAAI,CAAC,KAAKpB,OAAL,CAAaiC,EAAlB,EAAsB;AACpB,aAAKC,OAAL;AACD;;AACDxH,MAAAA,IAAI,IAAI,CAAR;;AACA,UAAI,KAAKsG,WAAT,EAAsB;AACpB;AACA,YAAI,KAAKE,YAAL,KAAsB,CAAtB,IAA2B,CAAC,KAAKC,UAArC,EAAiD;AAC/C,eAAKgB,WAAL;AACA,eAAKhB,UAAL,GAAkB,IAAlB;AACD,SALmB,CAMpB;;;AACA,aAAKnB,OAAL,CAAaqB,MAAb,GAPoB,CAQpB;;AACAV,QAAAA,OAAO,CAACe,OAAR,CAAgB,UAACC,MAAD,EAAS5B,GAAT,EAAiB;AAC/B4B,UAAAA,MAAM,CAACN,MAAP,CAActB,GAAd;AACD,SAFD,EAToB,CAYpB;;AACAa,QAAAA,SAAS,CAACc,OAAV,CAAkB,UAACE,QAAD,EAAW7B,GAAX,EAAmB;AACnC6B,UAAAA,QAAQ,CAACP,MAAT,CAAgBtB,GAAhB;AACD,SAFD,EAboB,CAgBpB;;AACAe,QAAAA,QAAQ,CAACY,OAAT,CAAiB,UAACG,OAAD,EAAU9B,GAAV,EAAkB;AACjC8B,UAAAA,OAAO,CAACR,MAAR,CAAetB,GAAf;AACD,SAFD,EAjBoB,CAoBpB;;AACAc,QAAAA,YAAY,CAACa,OAAb,CAAqB,UAACI,WAAD,EAAc/B,GAAd,EAAsB;AACzC+B,UAAAA,WAAW,CAACT,MAAZ,CAAmBtB,GAAnB;AACD,SAFD,EArBoB,CAwBpB;;AACA,aAAKG,KAAL,CAAWwB,OAAX,CAAmB,UAACzF,IAAD,EAAO8D,GAAP,EAAe;AAChC9D,UAAAA,IAAI,CAACoF,MAAL,CAAYtB,GAAZ;AACD,SAFD,EAzBoB,CA4BpB;;AACA,aAAKqC,YAAL;AACD;;AACD,UAAI,CAAC,KAAKnB,SAAV,EAAqB;AACnBoB,QAAAA,UAAU,CAAC,YAAM;AACf,UAAA,MAAI,CAAChB,MAAL;AACD,SAFS,EAEP,OAAO5G,SAFA,CAAV;AAGD;AACF,K,CACD;;;;gCACY,CA2CX,C,CA1CC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEF;;;;gCACY,CAKX,C,CAJC;AACA;AACA;AACA;AAEF;;;;gCACY;AACV,WAAKuG,WAAL,GAAmB,IAAnB;AACA3F,MAAAA,KAAK,CAACiH,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACAjH,MAAAA,SAAS,CAACgH,KAAV,CAAgBC,OAAhB,GAA0B,OAA1B;AACA,WAAKvC,OAAL,GAAe,IAAIwC,OAAJ,EAAf;AACArF,MAAAA,MAAM,CAACmF,KAAP,CAAaG,MAAb,GAAsB,SAAtB;AACD,K,CACD;;;;8BACU;AACR;AACA,WAAKxB,SAAL,GAAiB,IAAjB;AACA1F,MAAAA,WAAW,CAAC+G,KAAZ,CAAkBI,OAAlB,GAA4B,CAA5B;AACD,K,CACD;;;;mCACe,CAEd,C,CACD;;;;kCACc;AACZ;AACA;AACA;AACA;AACA;AACA/B,MAAAA,OAAO,CAACgC,IAAR,CAAa,IAAIC,MAAJ,CAAW;AACtB9D,QAAAA,WAAW,EAAE,GADS;AAEtBC,QAAAA,eAAe,EAAE;AAFK,OAAX,CAAb,EANY,CAUZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;;;;AAKH;;;IACM6D,M;;;AACJ,kBAAYnE,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACV;AACA;AACA;AACA;AACAI,MAAAA,WAAW,EAAE,CALH;AAMVC,MAAAA,eAAe,EAAE,CANP;AAOVpB,MAAAA,CAAC,EAAE,EAPO;AAQVkF,MAAAA,MAAM,EAAE,CARE;AASVC,MAAAA,YAAY,EAAE,GATJ;AAUVC,MAAAA,gBAAgB,EAAE,GAVR;AAWVC,MAAAA,OAAO,EAAE,GAXC;AAYVC,MAAAA,KAAK,EAAEtI,WAAW,CAACE,MAZT;AAaVoH,MAAAA,EAAE,EAAE,CAbM;AAcViB,MAAAA,OAAO,EAAE,EAdC;AAeVC,MAAAA,gBAAgB,EAAE,IAAIC,IAAJ,EAfR;AAgBVC,MAAAA,UAAU,EAAE;AAhBF,KAAZ;AAkBArE,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;2BACM;AACL,UAAM4E,UAAU,GAAG,KAAK3F,CAAL,GAAS,CAA5B;AACA,UAAM4F,YAAY,GAAG,KAAK5F,CAAL,GAAS,EAA9B;AACA,UAAM6F,cAAc,GAAG,EAAvB;AACApG,MAAAA,GAAG,CAAC+B,IAAJ;AACE/B,MAAAA,GAAG,CAACgC,SAAJ,CAAcC,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDzC,CAAlE,EAAqE+C,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDxC,CAAzH;AACAa,MAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAKA,MAAL,GAAc7E,OAAzB,EANG,CAOH;;AACAZ,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACqC,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc6D,UAAd,EAA0B,CAA1B,EAA6B5G,IAAI,CAACkD,EAAL,GAAU,CAAvC;AACAxC,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,0BAAhB;AACAlE,MAAAA,GAAG,CAACqG,IAAJ,GAXG,CAYH;;AACArG,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACqC,GAAJ,CAAQ,CAAC,EAAT,EAAa,CAAb,EAAgB8D,YAAhB,EAA8B,CAA9B,EAAiC7G,IAAI,CAACkD,EAAL,GAAU,CAA3C;AACAxC,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,0BAAhB;AACAlE,MAAAA,GAAG,CAACqG,IAAJ,GAhBG,CAiBH;;AACArG,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACqC,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAK9B,CAAnB,EAAsB,CAAtB,EAAyBjB,IAAI,CAACkD,EAAL,GAAU,CAAnC;AACAxC,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,MAAAA,GAAG,CAACqG,IAAJ,GArBG,CAsBH;;AACArG,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkE,SAAJ,GAAgB3G,WAAW,CAACM,KAA5B,CAxBG,CAyBH;;AACAmC,MAAAA,GAAG,CAACqC,GAAJ,CAAQ+D,cAAc,GAAG9G,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAAzB,EAAiDwF,cAAc,GAAG9G,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAAlE,EAA0F,GAA1F,EAA+F,CAA/F,EAAkGtB,IAAI,CAACkD,EAAL,GAAU,CAA5G;AACAxC,MAAAA,GAAG,CAACqG,IAAJ;AACArG,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACqC,GAAJ,CAAQ+D,cAAc,GAAG9G,IAAI,CAACqB,GAAL,CAAS,MAAMC,OAAf,CAAzB,EAAkDwF,cAAc,GAAG9G,IAAI,CAACuB,GAAL,CAAS,MAAMD,OAAf,CAAnE,EAA4F,GAA5F,EAAiG,CAAjG,EAAoGtB,IAAI,CAACkD,EAAL,GAAU,CAA9G;AACAxC,MAAAA,GAAG,CAACqG,IAAJ;AACArG,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACqC,GAAJ,CAAQ+D,cAAc,GAAG9G,IAAI,CAACqB,GAAL,CAAS,MAAMC,OAAf,CAAzB,EAAkDwF,cAAc,GAAG9G,IAAI,CAACuB,GAAL,CAAS,MAAMD,OAAf,CAAnE,EAA4F,GAA5F,EAAiG,CAAjG,EAAoGtB,IAAI,CAACkD,EAAL,GAAU,CAA9G;AACAxC,MAAAA,GAAG,CAACqG,IAAJ,GAjCG,CAkCH;;AACArG,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkE,SAAJ,GAAgB3G,WAAW,CAACM,KAA5B;AACAmC,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,CAAZ,EAAe,CAAf;AACAV,MAAAA,GAAG,CAACM,UAAJ,CAAe,CAAC,CAAhB,EAAmB,EAAnB;AACAN,MAAAA,GAAG,CAACM,UAAJ,CAAe,CAAC,EAAhB,EAAoB,GAApB;AACAN,MAAAA,GAAG,CAACM,UAAJ,CAAe,CAAC,GAAhB,EAAqB,GAArB;AACAN,MAAAA,GAAG,CAACM,UAAJ,CAAe,CAAC,CAAhB,EAAmB,GAAnB;AACAN,MAAAA,GAAG,CAACM,UAAJ,CAAe,CAAC,GAAhB,EAAqB,GAArB;AACAN,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACqG,IAAJ;AACFrG,MAAAA,GAAG,CAAC0C,OAAJ,GA7CK,CA8CL;;AACA,WAAKoD,OAAL,CAAaxB,OAAb,CAAqB,UAACiC,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAAClC,IAAP;AACD,OAFD;AAGD;;;2BACM1B,G,EAAK;AAAA;;AACV;AACA;AACA,WAAKmD,OAAL,CAAaxB,OAAb,CAAqB,UAACiC,MAAD,EAAS5D,GAAT,EAAc6D,GAAd,EAAsB;AACzCD,QAAAA,MAAM,CAACtC,MAAP,CAActB,GAAd,EAAmB6D,GAAnB;AACD,OAFD,EAHU,CAMV;AACA;AACA;AACA;AACA;AACA;;AACA,UAAMC,UAAU,GAAG,IAAIT,IAAJ,EAAnB;;AACA,UAAIS,UAAU,GAAG,KAAKV,gBAAlB,GAAqC,OAAOzG,IAAI,CAACoH,MAAL,EAAP,GAAuB,IAAhE,EAAsE;AACpE,aAAKT,UAAL,GAAkB,IAAlB,CADoE,CAEpE;;AACAU,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtB;AACA;AACAnB,UAAAA,MAAM,EAAE,KAAK9D,eAHS;AAItBkF,UAAAA,IAAI,EAAEC,MAAM,CAACC,OAJS;AAKtB;AACAC,UAAAA,UAAU,EAAE,sBAAM;AAChB,YAAA,MAAI,CAACC,KAAL;;AACA,YAAA,MAAI,CAAChB,UAAL,GAAkB,KAAlB;AACD;AATqB,SAAxB;AAWA,aAAKF,gBAAL,GAAwBU,UAAxB;AACD,OA5BS,CA6BV;;;AACAS,MAAAA,eAAe,CAAC3D,OAAD,EAAUZ,GAAV,EAAe,KAAKjB,WAApB,EAAiC,KAAKC,eAAtC,CAAf;AACD;;;4BACO;AAAA;;AAAA,iCAEGwF,CAFH;AAGJ,YAAMC,KAAK,GAAGnC,UAAU,CAAC,YAAM;AAC7B,UAAA,MAAI,CAACa,OAAL,CAAaP,IAAb,CAAkB,IAAI8B,YAAJ,CAAiB;AACjCC,YAAAA,CAAC,EAAE;AACDpI,cAAAA,CAAC,EAAE+C,WAAW,CAAC,MAAI,CAACP,WAAN,EAAmB,MAAI,CAACC,eAAxB,CAAX,CAAoDzC,CADtD;AAEDC,cAAAA,CAAC,EAAE8C,WAAW,CAAC,MAAI,CAACP,WAAN,EAAmB,MAAI,CAACC,eAAxB,CAAX,CAAoDxC;AAFtD,aAD8B;AAKjCoI,YAAAA,WAAW,EAAE,MAAI,CAAC9B,MALe;AAMjC+B,YAAAA,KAAK,EAAE,CAAC,MAAI,CAACjH,CAAN,GAAU,EANgB;AAOjC;AACAmB,YAAAA,WAAW,EAAE,MAAI,CAACA;AARe,WAAjB,CAAlB;;AAUA+F,UAAAA,YAAY,CAACL,KAAD,CAAZ,CAX6B,CAY7B;AACD,SAbuB,EAarBD,CAAC,IAAI,MAAM7H,IAAI,CAACoH,MAAL,EAAN,GAAsB,GAA1B,CAboB,CAAxB;AAHI;;AACN;AACA,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,IAAI7H,IAAI,CAACoH,MAAL,EAAxB,EAAuCS,CAAC,IAAI,CAA5C,EAA+C;AAAA,cAAtCA,CAAsC;AAe9C;AACF;;;;;AAGH;;;IACMO,Q;;;AACJ,oBAAYrG,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAI,MAAAA,WAAW,EAAE,CATH;AAUVC,MAAAA,eAAe,EAAE,CAVP;AAWVpB,MAAAA,CAAC,EAAE,EAXO;AAYVkF,MAAAA,MAAM,EAAE,CAZE;AAaVC,MAAAA,YAAY,EAAE,GAbJ;AAcVC,MAAAA,gBAAgB,EAAE,GAdR;AAeVC,MAAAA,OAAO,EAAE,CAAC,GAfA;AAgBVC,MAAAA,KAAK,EAAEtI,WAAW,CAACI,IAhBT;AAiBVmI,MAAAA,OAAO,EAAE,EAjBC;AAkBV6B,MAAAA,yBAAyB,EAAE,IAAI3B,IAAJ,EAlBjB;AAmBV4B,MAAAA,eAAe,EAAE,IAAI5B,IAAJ,EAnBP;AAoBVnB,MAAAA,EAAE,EAAE,CApBM;AAqBVgD,MAAAA,WAAW,EAAE,KArBH;AAsBVC,MAAAA,UAAU,EAAE;AAtBF,KAAZ;AAwBAlG,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;2BACM;AACL,UAAMyG,iBAAiB,GAAG,KAAKxH,CAAL,GAAS,CAAnC;AACA,UAAMyH,iBAAiB,GAAG,KAAKzH,CAAL,GAAS,EAAnC;AACA,UAAM0H,mBAAmB,GAAG,KAAK1H,CAAL,GAAS,EAArC;AACAP,MAAAA,GAAG,CAAC+B,IAAJ,GAJK,CAKH;;AACA/B,MAAAA,GAAG,CAACgC,SAAJ,CAAcC,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDzC,CAAlE,EAAqE+C,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDxC,CAAzH;AACAa,MAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAKA,MAAL,GAAc7E,OAAzB;AACAZ,MAAAA,GAAG,CAAC+B,IAAJ;AACE/B,MAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAd,EAAiB,CAAjB;AACAhC,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAWH,iBAAiB,GAAGzI,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAA/B,EAAuDmH,iBAAiB,GAAGzI,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAA3E;AACAZ,MAAAA,GAAG,CAACM,UAAJ,CAAeyH,iBAAf,EAAkC,GAAlC;AACA/H,MAAAA,GAAG,CAACM,UAAJ,CAAeyH,iBAAf,EAAkC,GAAlC;AACA/H,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,0BAAhB;AACAlE,MAAAA,GAAG,CAACqG,IAAJ;AACFrG,MAAAA,GAAG,CAAC0C,OAAJ,GAjBG,CAkBH;;AACA1C,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAW,KAAK3H,CAAL,GAASjB,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAApB,EAA4C,KAAKL,CAAL,GAASjB,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAArD;AACAZ,MAAAA,GAAG,CAACM,UAAJ,CAAe,KAAKC,CAApB,EAAuB,GAAvB;AACAP,MAAAA,GAAG,CAACM,UAAJ,CAAe,KAAKC,CAApB,EAAuB,GAAvB;AACAP,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,MAAAA,GAAG,CAACqG,IAAJ,GAzBG,CA0BH;;AACArG,MAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAd,EAAiB,CAAC,GAAlB;AACAhC,MAAAA,GAAG,CAACkE,SAAJ,GAAgB3G,WAAW,CAACM,KAA5B;AACAmC,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,MAAAA,GAAG,CAACM,UAAJ,CAAe0H,iBAAf,EAAkC,EAAlC;AACAhI,MAAAA,GAAG,CAACM,UAAJ,CAAe0H,iBAAf,EAAkC,GAAlC;AACAhI,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACqG,IAAJ,GAlCG,CAmCH;;AACArG,MAAAA,GAAG,CAACgC,SAAJ,CAAc,IAAI1C,IAAI,CAACqB,GAAL,CAAS,CAAC,EAAD,GAAMC,OAAf,CAAlB,EAA2C,IAAItB,IAAI,CAACuB,GAAL,CAAS,CAAC,EAAD,GAAMD,OAAf,CAA/C;AACAZ,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,MAAAA,GAAG,CAACM,UAAJ,CAAe2H,mBAAf,EAAoC,EAApC;AACAjI,MAAAA,GAAG,CAACM,UAAJ,CAAe2H,mBAAf,EAAoC,GAApC;AACAjI,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACqG,IAAJ;AACFrG,MAAAA,GAAG,CAAC0C,OAAJ,GA3CK,CA4CL;;AACA,WAAKoD,OAAL,CAAaxB,OAAb,CAAqB,UAACiC,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAAClC,IAAP;AACD,OAFD;AAGD;;;2BACM1B,G,EAAK;AAAA;;AACV;AACA;AACA,WAAKmD,OAAL,CAAaxB,OAAb,CAAqB,UAACiC,MAAD,EAAS5D,GAAT,EAAc6D,GAAd,EAAsB;AACzCD,QAAAA,MAAM,CAACtC,MAAP,CAActB,GAAd,EAAmB6D,GAAnB;AACD,OAFD,EAHU,CAMV;;AACA,UAAM2B,mBAAmB,GAAG,IAAInC,IAAJ,EAA5B;AACA,UAAIoC,iBAAJ;;AACA,UAAID,mBAAmB,GAAG,KAAKR,yBAA3B,GAAwDrI,IAAI,CAACoH,MAAL,KAAgB,KAAhB,GAAwB,IAApF,EAA2F;AACzF;AACA,YAAI,KAAKoB,UAAT,EAAqBL,YAAY,CAAC,KAAKK,UAAN,CAAZ;AACrBM,QAAAA,iBAAiB,GAAG,CAAC9I,IAAI,CAACoH,MAAL,KAAgB,IAAhB,GAAuB,CAAC,CAAxB,GAA4B,CAA7B,KAAmC,KAAKpH,IAAI,CAACoH,MAAL,EAAL,GAAqB,EAAxD,CAApB,CAHyF,CAIzF;;AACAC,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBjF,UAAAA,eAAe,cAAOyG,iBAAP,CADO;AAEtBvB,UAAAA,IAAI,EAAEwB,MAAM,CAACC;AAFS,SAAxB,EALyF,CASzF;;AACA3B,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBnB,UAAAA,MAAM,cAAO2C,iBAAiB,GAAG,GAA3B,CADgB;AAEtBvB,UAAAA,IAAI,EAAEC,MAAM,CAACyB,SAFS;AAGtBvB,UAAAA,UAAU,EAAE,sBAAM;AAChB;AACA,YAAA,MAAI,CAACC,KAAL,GAFgB,CAGhB;;;AACA,YAAA,MAAI,CAACa,UAAL,GAAkB7C,UAAU,CAAC,YAAM;AACjC,cAAA,MAAI,CAACgC,KAAL;AACD,aAF2B,EAExB3H,IAAI,CAACoH,MAAL,KAAgB,IAAhB,GAAuB,IAFC,CAA5B;AAGD;AAVqB,SAAxB;AAYA,aAAKiB,yBAAL,GAAiCQ,mBAAjC;AACD,OAhCS,CAiCV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,UAAI,KAAKtD,EAAL,KAAY,CAAZ,IAAiB,CAAC,KAAKgD,WAA3B,EAAwC;AACtC,aAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,CAArB,EAAwBA,CAAC,IAAI,CAA7B,EAAgC;AAC9B1D,UAAAA,YAAY,CAAC8B,IAAb,CAAkB,IAAIiD,WAAJ,CAAgB;AAChC;AACA;AACA;AACA;AACA9G,YAAAA,WAAW,EAAE,KAAKA,WALc;AAMhCC,YAAAA,eAAe,EAAE,KAAKA,eANU;AAOhC8D,YAAAA,MAAM,EAAE,KAAKA,MAPmB;AAQhCgD,YAAAA,KAAK,EAAEtB;AARyB,WAAhB,CAAlB;AAUD;;AACD,aAAKU,WAAL,GAAmB,IAAnB;AACD,OAvDS,CAwDV;;;AACAX,MAAAA,eAAe,CAAC1D,SAAD,EAAYb,GAAZ,EAAiB,KAAKjB,WAAtB,EAAmC,KAAKC,eAAxC,CAAf;AACD;;;4BACO;AACN,WAAKmE,OAAL,CAAaP,IAAb,CAAkB,IAAImD,cAAJ,CAAmB;AACnCpB,QAAAA,CAAC,EAAE;AACDpI,UAAAA,CAAC,EAAE+C,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDzC,CADtD;AAEDC,UAAAA,CAAC,EAAE8C,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDxC;AAFtD,SADgC;AAKnCuC,QAAAA,WAAW,EAAE,KAAKA,WALiB;AAMnC6F,QAAAA,WAAW,EAAE,KAAK9B,MANiB,CAOnC;;AAPmC,OAAnB,CAAlB;AASD;;;;;AAKH;;;IACMkD,O;;;AACJ,mBAAYtH,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACV;AACA;AACA;AACA;AACAI,MAAAA,WAAW,EAAE;AACXkH,QAAAA,KAAK,EAAE,CADI;AAEXC,QAAAA,GAAG,EAAE,CAFM;AAGXC,QAAAA,KAAK,EAAE;AAHI,OALH;AAUVnH,MAAAA,eAAe,EAAE;AACfiH,QAAAA,KAAK,EAAE,CADQ;AAEfC,QAAAA,GAAG,EAAE,CAFU;AAGfC,QAAAA,KAAK,EAAE;AAHQ,OAVP;AAeVrD,MAAAA,MAAM,EAAE;AACNmD,QAAAA,KAAK,EAAE,CADD;AAENC,QAAAA,GAAG,EAAE,CAFC;AAGNC,QAAAA,KAAK,EAAE;AAHD,OAfE;AAoBVjE,MAAAA,EAAE,EAAE;AACF+D,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,GAAG,EAAE,CAFH;AAGFC,QAAAA,KAAK,EAAE;AAHL,OApBM;AAyBVpD,MAAAA,YAAY,EAAE;AACZkD,QAAAA,KAAK,EAAE,GADK;AAEZC,QAAAA,GAAG,EAAE,GAFO;AAGZC,QAAAA,KAAK,EAAE;AAHK,OAzBJ;AA8BVnD,MAAAA,gBAAgB,EAAE;AAChBiD,QAAAA,KAAK,EAAE,GADS;AAEhBC,QAAAA,GAAG,EAAE,GAFW;AAGhBC,QAAAA,KAAK,EAAE;AAHS,OA9BR;AAmCVlD,MAAAA,OAAO,EAAE;AACPgD,QAAAA,KAAK,EAAE,GADA;AAEPC,QAAAA,GAAG,EAAE,GAFE;AAGPC,QAAAA,KAAK,EAAE;AAHA,OAnCC;AAwCVjD,MAAAA,KAAK,EAAEtI,WAAW,CAACC,GAxCT;AAyCVuL,MAAAA,SAAS,EAAE,KAzCD;AA0CVC,MAAAA,aAAa,EAAE;AA1CL,KAAZ;AA4CApH,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;gCACW2H,I,EAAM;AAChB,aAAO;AACL/J,QAAAA,CAAC,EAAGkB,KAAK,GAAG,CAAT,GAAc,KAAKsB,WAAL,CAAiBuH,IAAjB,IAAyB3J,IAAI,CAACqB,GAAL,CAAS,KAAKgB,eAAL,CAAqBsH,IAArB,IAA6BrI,OAAtC,CADrC;AAELzB,QAAAA,CAAC,EAAGkB,KAAK,GAAG,CAAT,GAAc,KAAKqB,WAAL,CAAiBuH,IAAjB,IAAyB3J,IAAI,CAACuB,GAAL,CAAS,KAAKc,eAAL,CAAqBsH,IAArB,IAA6BrI,OAAtC;AAFrC,OAAP;AAID;;;2BACM;AACL,UAAI,CAAC,KAAKmI,SAAV,EAAqB;AACnB/I,QAAAA,GAAG,CAAC+B,IAAJ;AACE/B,QAAAA,GAAG,CAACgC,SAAJ,CAAc,KAAKC,WAAL,CAAiB,OAAjB,EAA0B/C,CAAxC,EAA2C,KAAK+C,WAAL,CAAiB,OAAjB,EAA0B9C,CAArE;AACAa,QAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAKA,MAAL,CAAYmD,KAAZ,GAAoBhI,OAA/B,EAHiB,CAIjB;;AACAZ,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,QAAAA,GAAG,CAACkI,MAAJ,CAAW,KAAK5I,IAAI,CAACqB,GAAL,CAAS,IAAIC,OAAb,CAAhB,EAAuC,KAAKtB,IAAI,CAACuB,GAAL,CAAS,IAAID,OAAb,CAA5C;AACAZ,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAN,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,QAAAA,GAAG,CAACsG,SAAJ;AACAtG,QAAAA,GAAG,CAACqG,IAAJ,GAdiB,CAejB;;AACArG,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACkE,SAAJ,GAAgB,2BAAhB;AACAlE,QAAAA,GAAG,CAACkI,MAAJ,CAAW,GAAX,EAAgB,CAAC,CAAjB;AACAlI,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,CAAnB;AACAN,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAN,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAN,QAAAA,GAAG,CAACsG,SAAJ;AACAtG,QAAAA,GAAG,CAACqG,IAAJ,GAxBiB,CAyBjB;;AACArG,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACkE,SAAJ,GAAgB,2BAAhB;AACAlE,QAAAA,GAAG,CAACkI,MAAJ,CAAW,KAAK5I,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAAhB,EAAwC,KAAKtB,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAA7C;AACAZ,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAN,QAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,QAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,GAAZ,EAAiB,CAAjB;AACAV,QAAAA,GAAG,CAACsG,SAAJ;AACAtG,QAAAA,GAAG,CAACqG,IAAJ,GAjCiB,CAkCjB;;AACA6C,QAAAA,aAAa,CAAC;AACZhK,UAAAA,CAAC,EAAE,CAAC,GADQ;AAEZC,UAAAA,CAAC,EAAE,CAAC;AAFQ,SAAD,CAAb;AAIFa,QAAAA,GAAG,CAAC0C,OAAJ;AACD,OAxCD,MAwCO;AACL;AACA,YAAI,KAAKmC,EAAL,CAAQgE,GAAZ,EAAiB;AACf7I,UAAAA,GAAG,CAAC+B,IAAJ;AACE/B,UAAAA,GAAG,CAACgC,SAAJ,CAAc,KAAKC,WAAL,CAAiB,KAAjB,EAAwB/C,CAAtC,EAAyC,KAAK+C,WAAL,CAAiB,KAAjB,EAAwB9C,CAAjE;AACAa,UAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAKA,MAAL,CAAYoD,GAAZ,GAAkBjI,OAA7B,EAHa,CAIb;;AACAZ,UAAAA,GAAG,CAACmC,SAAJ;AACAnC,UAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,UAAAA,GAAG,CAACkI,MAAJ,CAAW,KAAK5I,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAAhB,EAAwC,KAAKtB,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAA7C;AACAZ,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,UAAAA,GAAG,CAACsG,SAAJ;AACAtG,UAAAA,GAAG,CAACqG,IAAJ,GAZa,CAab;;AACArG,UAAAA,GAAG,CAACkE,SAAJ,GAAgB,2BAAhB;AACAlE,UAAAA,GAAG,CAACmC,SAAJ;AACAnC,UAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAC,GAAZ,EAAiB,CAAjB;AACAlI,UAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf,EAAoB,EAApB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,UAAAA,GAAG,CAACsG,SAAJ;AACAtG,UAAAA,GAAG,CAACqG,IAAJ,GArBa,CAsBb;;AACA6C,UAAAA,aAAa,CAAC;AACZhK,YAAAA,CAAC,EAAE,CAAC,EADQ;AAEZC,YAAAA,CAAC,EAAE,CAAC;AAFQ,WAAD,EAGV,GAHU,CAAb;AAIFa,UAAAA,GAAG,CAAC0C,OAAJ;AACD,SA9BI,CA+BL;;;AACA,YAAI,KAAKmC,EAAL,CAAQiE,KAAZ,EAAmB;AACjB9I,UAAAA,GAAG,CAAC+B,IAAJ;AACE/B,UAAAA,GAAG,CAACgC,SAAJ,CAAc,KAAKC,WAAL,CAAiB,OAAjB,EAA0B/C,CAAxC,EAA2C,KAAK+C,WAAL,CAAiB,OAAjB,EAA0B9C,CAArE;AACAa,UAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAKA,MAAL,CAAYqD,KAAZ,GAAoBlI,OAA/B,EAHe,CAIf;;AACAZ,UAAAA,GAAG,CAACmC,SAAJ;AACAnC,UAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,UAAAA,GAAG,CAACkI,MAAJ,CAAW,KAAK5I,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAAhB,EAAwC,KAAKtB,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAA7C;AACAZ,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,CAAnB;AACAN,UAAAA,GAAG,CAACsG,SAAJ;AACAtG,UAAAA,GAAG,CAACqG,IAAJ,GAZe,CAaf;;AACArG,UAAAA,GAAG,CAACmC,SAAJ;AACAnC,UAAAA,GAAG,CAACkE,SAAJ,GAAgB,2BAAhB;AACAlE,UAAAA,GAAG,CAACkI,MAAJ,CAAW,KAAK5I,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAAhB,EAAwC,KAAKtB,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAA7C;AACAZ,UAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf,EAAoB,EAApB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAN,UAAAA,GAAG,CAACsG,SAAJ;AACAtG,UAAAA,GAAG,CAACqG,IAAJ,GApBe,CAqBf;;AACArG,UAAAA,GAAG,CAACmC,SAAJ;AACAnC,UAAAA,GAAG,CAACkE,SAAJ,GAAgB,2BAAhB;AACAlE,UAAAA,GAAG,CAACkI,MAAJ,CAAW,GAAX,EAAgB,CAAC,CAAjB;AACAlI,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,CAAnB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAN,UAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAN,UAAAA,GAAG,CAACsG,SAAJ;AACAtG,UAAAA,GAAG,CAACqG,IAAJ,GA9Be,CA+Bf;AACA;AACA;AACA;AACA;;AACA6C,UAAAA,aAAa,CAAC;AACZhK,YAAAA,CAAC,EAAE,EADS;AAEZC,YAAAA,CAAC,EAAE,CAAC;AAFQ,WAAD,EAGV,GAHU,CAAb;AAIFa,UAAAA,GAAG,CAAC0C,OAAJ;AACD;AACF;AACF;;;2BACMC,G,EAAK;AACV,UAAI,CAAC,KAAKkC,EAAL,CAAQ+D,KAAb,EAAoB;AAClB,aAAKG,SAAL,GAAiB,IAAjB;AACD;;AACD,UAAI,CAAC,KAAKA,SAAV,EAAqB;AACnB,aAAKrH,WAAL,CAAiBkH,KAAjB,GAAyB,KAAKlH,WAAL,CAAiBmH,GAAjB,GAAuB,KAAKnH,WAAL,CAAiBoH,KAAjB,IAA0B,KAAKpD,YAAL,CAAkBkD,KAA5F;AACA,aAAKnD,MAAL,CAAYmD,KAAZ,GAAoB,KAAKnD,MAAL,CAAYoD,GAAZ,GAAkB,KAAKpD,MAAL,CAAYqD,KAAZ,IAAqB,KAAKlD,OAAL,CAAagD,KAAxE,CAFmB,CAGnB;;AACA1B,QAAAA,eAAe,CAACxD,QAAD,EAAWf,GAAX,EAAgB,KAAKjB,WAAL,CAAiBkH,KAAjC,EAAwC,KAAKjH,eAAL,CAAqBiH,KAA7D,CAAf;AACD,OALD,MAKO;AACL,YAAI,CAAC,KAAKI,aAAV,EAAyB;AACvB;AACA;AACA,cAAMG,eAAe,GAAG7J,IAAI,CAACoH,MAAL,KAAgB,GAAhB,GAAsB,CAAtB,GAA0B,CAAC,CAAnD;AACAC,UAAAA,SAAS,CAACC,EAAV,CAAa,KAAKjF,eAAlB,EAAmC,GAAnC,EAAwC;AACtCkH,YAAAA,GAAG,cAAO,CAACvJ,IAAI,CAACoH,MAAL,KAAgB,EAAhB,GAAqB,EAAtB,IAA4ByC,eAAnC,CADmC;AAEtCL,YAAAA,KAAK,cAAO,CAACxJ,IAAI,CAACoH,MAAL,KAAgB,EAAhB,GAAqB,EAAtB,IAA4ByC,eAAnC,CAFiC;AAGtCtC,YAAAA,IAAI,EAAEuC,IAAI,CAACrC;AAH2B,WAAxC;AAKAJ,UAAAA,SAAS,CAACC,EAAV,CAAa,KAAKnB,MAAlB,EAA0B,GAA1B,EAA+B;AAC7BoD,YAAAA,GAAG,cAAOvJ,IAAI,CAACoH,MAAL,KAAgB,EAAhB,GAAqB,GAA5B,CAD0B;AAE7BoC,YAAAA,KAAK,cAAOxJ,IAAI,CAACoH,MAAL,KAAgB,EAAhB,GAAqB,GAA5B,CAFwB;AAG7BG,YAAAA,IAAI,EAAEwC,MAAM,CAACtC;AAHgB,WAA/B;AAKA,eAAKiC,aAAL,GAAqB,IAArB;AACD,SAhBI,CAiBL;;;AACA,YAAI,KAAKnE,EAAL,CAAQgE,GAAZ,EAAiB;AACf,eAAKnH,WAAL,CAAiBmH,GAAjB,IAAwB,KAAKnD,YAAL,CAAkBmD,GAA1C;AACA3B,UAAAA,eAAe,CAACxD,QAAD,EAAWf,GAAX,EAAgB,KAAKjB,WAAL,CAAiBmH,GAAjC,EAAsC,KAAKlH,eAAL,CAAqBkH,GAA3D,EAAgE,KAAKhE,EAArE,EAAyE,KAAzE,CAAf;AACD,SArBI,CAsBL;;;AACA,YAAI,KAAKA,EAAL,CAAQiE,KAAZ,EAAmB;AACjB,eAAKpH,WAAL,CAAiBoH,KAAjB,IAA0B,KAAKpD,YAAL,CAAkBoD,KAA5C;AACA5B,UAAAA,eAAe,CAACxD,QAAD,EAAWf,GAAX,EAAgB,KAAKjB,WAAL,CAAiBoH,KAAjC,EAAwC,KAAKnH,eAAL,CAAqBmH,KAA7D,EAAoE,KAAKjE,EAAzE,EAA6E,OAA7E,CAAf;AACD;AACF,OApCS,CAqCV;AACA;AACA;AACA;AACA;AACA;;AACD,K,CACD;AACA;AACA;AACA;AACA;;;;;KAKF;;;AACA,SAASqC,eAAT,CAAyBoC,OAAzB,EAAkCC,QAAlC,EAA4CC,gBAA5C,EAA8DC,oBAA9D,EAAoFC,gBAApF,EAAsGC,kBAAtG,EAA0H;AACxH;AACA;AACA;AACA;AACA,MAAM/G,OAAO,GAAGvE,IAAI,CAACuE,OAArB;AACA,MAAMgH,gBAAgB,GAAGtK,IAAI,CAACuK,GAAL,CAASC,cAAc,GAAGL,oBAAoB,GAAG7I,OAAjD,KAA8D,MAAMA,OAApE,IAAgFtB,IAAI,CAACuK,GAAL,CAASC,cAAc,GAAGL,oBAAoB,GAAG7I,OAAjD,KAA8D,MAAMA,OAA7K,CANwH,CAOxH;;AACA,MAAMmJ,kBAAkB,GAAG,SAArBA,kBAAqB,GAAW;AACpC,QAAI,CAACJ,kBAAL,EAAyB;AACvBL,MAAAA,OAAO,CAACvG,MAAR,CAAewG,QAAf,EAAyB,CAAzB;AACD,KAFD,MAEO;AACLI,MAAAA,kBAAkB,KAAK,KAAvB,GAA+BD,gBAAgB,CAACb,GAAjB,IAAwB,CAAvD,GAA2Da,gBAAgB,CAACZ,KAAjB,IAA0B,CAArF;;AACA,UAAI,CAACY,gBAAgB,CAACb,GAAlB,IAAyB,CAACa,gBAAgB,CAACZ,KAA/C,EAAsD;AACpDQ,QAAAA,OAAO,CAACvG,MAAR,CAAewG,QAAf,EAAyB,CAAzB;AACD;AACF;AACF,GATD,CARwH,CAkBxH;;;AACA,MAAIC,gBAAgB,IAAK5G,OAAO,CAACrC,CAAR,GAAaqC,OAAO,CAACC,aAAR,GAAwB,CAA9D,EAAmE;AACjED,IAAAA,OAAO,CAACiC,EAAR,IAAc,CAAd;AACAkF,IAAAA,kBAAkB;AAClBC,IAAAA,wBAAwB,GAHyC,CAIjE;AACD,GALD,MAKO,IAAIJ,gBAAgB,IAAKJ,gBAAgB,IAAK5G,OAAO,CAACqH,OAAR,GAAmBrH,OAAO,CAACsH,WAAR,GAAsB,CAAvF,EAA6F;AAClGH,IAAAA,kBAAkB;AACnB;AACF;AAID;AACA;;;IACM3E,O;;;AACJ,mBAAY/D,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACV;AACA;AACA;AACA;AACAuE,MAAAA,KAAK,EAAEtI,WAAW,CAACM,KALT;AAMV0C,MAAAA,CAAC,EAAE,EANO;AAOV0J,MAAAA,OAAO,EAAE,KAAK,EAPJ;AAQVpH,MAAAA,aAAa,EAAE,CARL;AASVqH,MAAAA,WAAW,EAAE,CATH;AAUV3C,MAAAA,WAAW,EAAE,CAVH;AAWVzB,MAAAA,OAAO,EAAE,EAXC;AAYV;AACAjB,MAAAA,EAAE,EAAE,CAbM;AAcVsF,MAAAA,QAAQ,EAAE,EAdA;AAeVC,MAAAA,UAAU,EAAE,KAfF;AAgBVxC,MAAAA,eAAe,EAAE,IAAI5B,IAAJ;AAhBP,KAAZ;AAkBApE,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;2BACM;AACLtB,MAAAA,GAAG,CAAC+B,IAAJ,GADK,CAEH;;AACA/B,MAAAA,GAAG,CAACgC,SAAJ,CAAc5B,KAAK,GAAG,CAAtB,EAAyBC,KAAK,GAAG,CAAjC,EAHG,CAIH;;AACAL,MAAAA,GAAG,CAAC+B,IAAJ;AACE/B,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACqK,WAAJ,GAAkB,0BAAlB;AACArK,MAAAA,GAAG,CAACsK,UAAJ,GAAiB,EAAjB;AACAtK,MAAAA,GAAG,CAACqC,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAK9B,CAAnB,EAAsB,CAAtB,EAAyBjB,IAAI,CAACkD,EAAL,GAAU,CAAnC;;AACA,UAAI,CAAC,KAAK4H,UAAV,EAAsB;AACpBpK,QAAAA,GAAG,CAACoC,WAAJ,GAAkB,KAAKyD,KAAvB;AACD,OAFD,MAEO;AACL7F,QAAAA,GAAG,CAACoC,WAAJ,GAAkB7E,WAAW,CAACC,GAA9B;AACA,aAAK4M,UAAL,GAAkB,KAAlB;AACD,OAfA,CAgBD;;;AACApK,MAAAA,GAAG,CAACuK,SAAJ,GAAgB,KAAK1H,aAArB;AACA7C,MAAAA,GAAG,CAACyC,MAAJ,GAlBC,CAmBD;;AACAzC,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,MAAAA,GAAG,CAACM,UAAJ,CAAe,KAAKC,CAApB,EAAuB,CAAvB,EAA0B,KAAKgH,WAA/B;AACAvH,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,MAAAA,GAAG,CAACM,UAAJ,CAAe,KAAKC,CAApB,EAAuB,GAAvB,EAA4B,KAAKgH,WAAjC;AACAvH,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,MAAAA,GAAG,CAACM,UAAJ,CAAe,KAAKC,CAApB,EAAuB,GAAvB,EAA4B,KAAKgH,WAAjC;AACAvH,MAAAA,GAAG,CAACuK,SAAJ,GAAgB,CAAhB;AACAvK,MAAAA,GAAG,CAACyC,MAAJ;AACFzC,MAAAA,GAAG,CAAC0C,OAAJ,GA7BG,CA8BH;;AACA1C,MAAAA,GAAG,CAACoC,WAAJ,GAAkB,KAAKyD,KAAvB;AACA,UAAM2E,MAAM,GAAG,KAAKjK,CAAL,GAAS,EAAxB;;AACA,WAAK,IAAI4G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,IAAI,CAA9B,EAAiC;AAC/B,YAAMsD,EAAE,GAAGD,MAAM,GAAGlL,IAAI,CAACqB,GAAL,CAASwG,CAAC,GAAGvG,OAAJ,GAAc,KAAK2G,WAA5B,CAApB;AACA,YAAMmD,EAAE,GAAGF,MAAM,GAAGlL,IAAI,CAACuB,GAAL,CAASsG,CAAC,GAAGvG,OAAJ,GAAc,KAAK2G,WAA5B,CAApB;AACA,YAAMoD,EAAE,GAAGH,MAAM,GAAGlL,IAAI,CAACqB,GAAL,CAAS,CAACwG,CAAC,GAAG,CAAL,IAAUvG,OAAV,GAAoB,KAAK2G,WAAlC,CAApB;AACA,YAAMqD,EAAE,GAAGJ,MAAM,GAAGlL,IAAI,CAACuB,GAAL,CAAS,CAACsG,CAAC,GAAG,CAAL,IAAUvG,OAAV,GAAoB,KAAK2G,WAAlC,CAApB;;AACA,YAAIJ,CAAC,GAAG,EAAJ,GAAS,CAAb,EAAgB;AACdnH,UAAAA,GAAG,CAACmC,SAAJ;AACAnC,UAAAA,GAAG,CAACkI,MAAJ,CAAWuC,EAAX,EAAeC,EAAf;AACA1K,UAAAA,GAAG,CAACU,MAAJ,CAAWiK,EAAX,EAAeC,EAAf;AACA5K,UAAAA,GAAG,CAACuK,SAAJ,GAAgB,CAAhB;AACAvK,UAAAA,GAAG,CAACyC,MAAJ;AACD;AACF,OA7CE,CA8CH;AACA;;;AACAzC,MAAAA,GAAG,CAACmC,SAAJ,GAhDG,CAiDH;;AACF,UAAI,CAAC,KAAK0I,WAAL,CAAiB,QAAjB,CAAL,EAAiC;AAC7B7K,QAAAA,GAAG,CAACqC,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAK4H,OAAnB,EAA4B,MAAMrJ,OAAN,GAAgB,KAAK2G,WAAjD,EAA8D,MAAM3G,OAAN,GAAgB,KAAK2G,WAAnF;AACD,OAFH,MAES;AACLvH,QAAAA,GAAG,CAACqC,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAK4H,OAAnB,EAA4B,KAAKrJ,OAAL,GAAe,KAAK2G,WAAhD,EAA6D,MAAM3G,OAAN,GAAgB,KAAK2G,WAAlF;AACD;;AACDvH,MAAAA,GAAG,CAACuK,SAAJ,GAAgB,KAAKL,WAArB;AACAlK,MAAAA,GAAG,CAACyC,MAAJ,GAxDG,CAyDH;;AACAzC,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAAC+B,IAAJ;AACE/B,MAAAA,GAAG,CAACqK,WAAJ,GAAkB,0BAAlB;AACArK,MAAAA,GAAG,CAACsK,UAAJ,GAAiB,EAAjB;AACAtK,MAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAK8B,WAAhB;AACAvH,MAAAA,GAAG,CAACgC,SAAJ,CAAc,KAAKzB,CAAL,GAAS,CAAvB,EAA0B,CAA1B;AACAP,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd,EAhEC,CAiED;AACA;;AACAlI,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,CAAf;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,CAAf;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,CAAC,CAAhB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,CAAC,CAAhB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,CAAC,CAAf;AACAV,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,MAAAA,GAAG,CAACqG,IAAJ;AACFrG,MAAAA,GAAG,CAAC0C,OAAJ;AACF1C,MAAAA,GAAG,CAAC0C,OAAJ,GA7EK,CA8EL;;AACA,WAAKoD,OAAL,CAAaxB,OAAb,CAAqB,UAACiC,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAAClC,IAAP;AACD,OAFD;AAGD;;;6BACQ;AACP,WAAKkD,WAAL,GAAmBuC,cAAnB;AACA,WAAKhE,OAAL,CAAaxB,OAAb,CAAqB,UAACiC,MAAD,EAAS5D,GAAT,EAAiB;AACpC4D,QAAAA,MAAM,CAACtC,MAAP,CAActB,GAAd;AACD,OAFD;AAGD;;;4BACO;AAAA;;AACN,UAAMmI,SAAS,GAAG,IAAI9E,IAAJ,EAAlB;;AACA,UAAI8E,SAAS,GAAGlD,eAAZ,GAA8B,GAAlC,EAAuC;AACrC,YAAImD,SAAJ,CADqC,CAErC;;AACA,YAAI,CAAC,KAAKF,WAAL,CAAiB,QAAjB,CAAL,EAAiC;AAC/BE,UAAAA,SAAS,GAAG,CAAZ;AACD,SAFD,MAEO;AACLA,UAAAA,SAAS,GAAG,CAAZ;AACD;;AACD,aAAK,IAAI5D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4D,SAApB,EAA+B5D,CAAC,EAAhC,EAAoC;AAClC,cAAI,CAAC,KAAK0D,WAAL,CAAiB,MAAjB,CAAL,EAA+B;AAC7B5F,YAAAA,UAAU,CAAC,YAAM;AACf,cAAA,MAAI,CAACa,OAAL,CAAaP,IAAb,CAAkB,IAAIyF,aAAJ,CAAkB;AAClC;AACA;AACAtJ,gBAAAA,WAAW,EAAE,EAHqB;AAIlC6F,gBAAAA,WAAW,EAAEuC;AAJqB,eAAlB,CAAlB;AAMD,aAPS,EAOP,MAAM3C,CAPC,CAAV;AAQD,WATD,MASO;AACLlC,YAAAA,UAAU,CAAC,YAAM;AACf,cAAA,MAAI,CAACa,OAAL,CAAaP,IAAb,CAAkB,IAAIyF,aAAJ,CAAkB;AAClCC,gBAAAA,UAAU,EAAE3L,IAAI,CAACoH,MAAL,KAAgB,EAAhB,GAAqB,EADC;AAElCwE,gBAAAA,QAAQ,EAAE5L,IAAI,CAACoH,MAAL,KAAgB,GAAhB,GAAsB,GAFE;AAGlCyE,gBAAAA,OAAO,EAAE7L,IAAI,CAACoH,MAAL,KAAgB,CAAhB,GAAoB,CAHK;AAIlC0E,gBAAAA,QAAQ,EAAE9L,IAAI,CAACoH,MAAL,KAAgB,CAAhB,GAAoB,CAJI;AAKlChF,gBAAAA,WAAW,EAAE,EALqB;AAMlC6F,gBAAAA,WAAW,EAAEuC;AANqB,eAAlB,CAAlB;AAQD,aATS,EASP,MAAM3C,CATC,CAAV;AAUD;AACF;;AACDS,QAAAA,eAAe,GAAGkD,SAAlB;AACD;AACF;;;4BACO9H,Q,EAAU;AAAA;;AAChB;AACA,UAAIqI,QAAJ;;AACA,cAAQrI,QAAR;AACE,aAAK,QAAL;AACEqI,UAAAA,QAAQ,GAAG,KAAX;AACA;;AACF,aAAK,QAAL;AACEA,UAAAA,QAAQ,GAAG,KAAX;AACA;AACF;AACA;AACA;;AACA,aAAK,MAAL;AACEA,UAAAA,QAAQ,GAAG,KAAX;AACA;;AACF;AACEA,UAAAA,QAAQ,GAAG,CAAX;AAdJ,OAHgB,CAmBhB;;;AACA,WAAKlB,QAAL,CAAc5E,IAAd,CAAmBvC,QAAnB,EApBgB,CAqBhB;;AACAiC,MAAAA,UAAU,CAAC,YAAM;AACf,aAAK,IAAIkC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAI,CAACgD,QAAL,CAAcrK,MAAlC,EAA0CqH,CAAC,IAAI,CAA/C,EAAkD;AAChD,cAAI,MAAI,CAACgD,QAAL,CAAchD,CAAd,MAAqBnE,QAAzB,EAAmC;AACjC,YAAA,MAAI,CAACmH,QAAL,CAAcpH,MAAd,CAAqBoE,CAArB,EAAwB,CAAxB;;AACA;AACD;AACF;AACF,OAPS,EAOPkE,QAPO,CAAV,CAtBgB,CA8BhB;;AACA,UAAI,KAAKR,WAAL,CAAiB,OAAjB,CAAJ,EAA+B;AAC7B,aAAKS,eAAL;AACD,OAjCe,CAkChB;;;AACA,UAAI,KAAKT,WAAL,CAAiB,WAAjB,CAAJ,EAAmC;AACjC,aAAKU,mBAAL;AACD,OArCe,CAsChB;;;AACA,WAAKC,eAAL,CAAqBxI,QAArB,EAA+BqI,QAA/B;AACD;;;gCACWI,a,EAAe;AACzB,aAAO,KAAKtB,QAAL,CAAcuB,IAAd,CAAmB,UAACC,MAAD;AAAA,eAAYA,MAAM,KAAKF,aAAvB;AAAA,OAAnB,CAAP;AACD;;;0CACqB;AACpB,UAAIG,UAAU,GAAG,CAAjB;;AACA,UAAMC,MAAM,GAAG,SAATA,MAAS,GAAM;AACnBD,QAAAA,UAAU,IAAI,CAAd;AACA5L,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACqK,WAAJ,GAAkB,2BAAlB;AACArK,QAAAA,GAAG,CAACsK,UAAJ,GAAiB,CAAjB,CAJmB,CAKnB;;AACAtK,QAAAA,GAAG,CAACoC,WAAJ,iCAAyC,CAAC,MAAMwJ,UAAP,IAAqB,EAA9D;AACA5L,QAAAA,GAAG,CAACuK,SAAJ,GAAgB,CAAhB;AACA;;;;;;AAKAvK,QAAAA,GAAG,CAACqC,GAAJ,CAAQjC,KAAK,GAAG,CAAhB,EAAmBC,KAAK,GAAG,CAA3B,EAA8B,MAAMyL,OAAO,CAAC,CAAD,EAAM,CAACF,UAAU,GAAG,CAAd,IAAmB,EAApB,GAA0B,EAA3B,GAAiC,CAArC,CAA3C,EAAoF,CAApF,EAAuFtM,IAAI,CAACkD,EAAL,GAAU,CAAjG;AACAxC,QAAAA,GAAG,CAACyC,MAAJ;;AACA,YAAImJ,UAAU,GAAG,GAAjB,EAAsB;AACpBhH,UAAAA,qBAAqB,CAACiH,MAAD,CAArB;AACD;AACF,OAlBD;;AAmBAjH,MAAAA,qBAAqB,CAACiH,MAAD,CAArB;AACD,K,CACD;;;;sCACkB;AAChB,WAAKhH,EAAL,IAAW,CAAX;AACA,UAAMkH,YAAY,GAAGhO,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAArB;AACA,UAAMgO,KAAK,GAAGjO,QAAQ,CAACkO,aAAT,CAAuB,KAAvB,CAAd;AACAD,MAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,CAAoB,mBAApB;AACAJ,MAAAA,YAAY,CAACK,YAAb,CAA0BJ,KAA1B,EAAiCD,YAAY,CAACM,UAA9C;AACD;;;oCACerJ,Q,EAAUqI,Q,EAAU;AAClC,UAAIrI,QAAQ,KAAK,WAAb,IAA4BA,QAAQ,KAAK,OAA7C,EAAsD;AACpD;AACD;;AACDnE,MAAAA,IAAI,CAACqG,KAAL,CAAWI,OAAX,GAAqB,CAArB;AACAxG,MAAAA,OAAO,CAAC2C,GAAR,8BAAkCuB,QAAlC;AACAqI,MAAAA,QAAQ,GAAGA,QAAQ,GAAG,IAAtB;AACAtM,MAAAA,YAAY,CAACuN,WAAb,GAA2BjB,QAA3B;AACApG,MAAAA,UAAU,CAAC,SAASsH,aAAT,GAAyB;AAClClB,QAAAA,QAAQ,IAAI,CAAZ;AACAtM,QAAAA,YAAY,CAACuN,WAAb,GAA2BjB,QAA3B;;AACA,YAAI,CAACA,QAAL,EAAe;AACbxM,UAAAA,IAAI,CAACqG,KAAL,CAAWI,OAAX,GAAqB,CAArB;AACD;;AACDL,QAAAA,UAAU,CAACsH,aAAD,EAAgB,IAAhB,CAAV;AACD,OAPS,EAOP,IAPO,CAAV;AAQD;;;;KAGH;;;AACA,SAAST,OAAT,CAAiB5M,CAAjB,EAAoBC,CAApB,EAAuB;AACrB,SAAOG,IAAI,CAACkN,GAAL,CAASrN,CAAT,IAAcG,IAAI,CAACkN,GAAL,CAAStN,CAAT,CAArB;AACD;AAGD;;;IACM8L,a;;;AACJ,yBAAY3J,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACV;AACAmL,MAAAA,UAAU,EAAE,EAFF;AAGV/K,MAAAA,WAAW,EAAE,CAHH;AAIVmE,MAAAA,KAAK,EAAEtI,WAAW,CAACM,KAJT;AAKVuB,MAAAA,CAAC,EAAE,CALO;AAMVmI,MAAAA,WAAW,EAAE,CANH;AAOV0D,MAAAA,UAAU,EAAE,EAPF;AAQVC,MAAAA,QAAQ,EAAE,GARA;AASVC,MAAAA,OAAO,EAAE,CATC;AAUVC,MAAAA,QAAQ,EAAE;AAVA,KAAZ;AAYAxJ,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;2BACM;AACLtB,MAAAA,GAAG,CAAC+B,IAAJ;AACE/B,MAAAA,GAAG,CAACgC,SAAJ,CAAc5B,KAAK,GAAG,CAAtB,EAAyBC,KAAK,GAAG,CAAjC;AACAL,MAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAK8B,WAAhB,EAHG,CAIH;;AACA,UAAI,CAAClJ,IAAI,CAACuE,OAAL,CAAaiI,WAAb,CAAyB,MAAzB,CAAL,EAAuC;AACrC;AACA7K,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACkE,SAAJ,GAAgB,0BAAhB;AACAlE,QAAAA,GAAG,CAACqC,GAAJ,CAAQ,CAAC,CAAD,GAAK,KAAKX,WAAlB,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwCpC,IAAI,CAACkD,EAAL,GAAU,CAAlD;AACAxC,QAAAA,GAAG,CAACqG,IAAJ;AACArG,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACkE,SAAJ,GAAgB,0BAAhB;AACAlE,QAAAA,GAAG,CAACqC,GAAJ,CAAQ,CAAC,EAAD,GAAM,KAAKX,WAAnB,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyCpC,IAAI,CAACkD,EAAL,GAAU,CAAnD;AACAxC,QAAAA,GAAG,CAACqG,IAAJ;AACArG,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACkE,SAAJ,GAAgB,0BAAhB;AACAlE,QAAAA,GAAG,CAACqC,GAAJ,CAAQ,CAAC,EAAD,GAAM,KAAKX,WAAnB,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyCpC,IAAI,CAACkD,EAAL,GAAU,CAAnD;AACAxC,QAAAA,GAAG,CAACqG,IAAJ,GAbqC,CAcrC;;AACArG,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,QAAAA,GAAG,CAACqC,GAAJ,CAAQ,IAAI,KAAKX,WAAjB,EAA8B,CAA9B,EAAiC,CAAjC,EAAoC,CAApC,EAAuCpC,IAAI,CAACkD,EAAL,GAAU,CAAjD;AACAxC,QAAAA,GAAG,CAACqG,IAAJ,GAlBqC,CAmBrC;;AACArG,QAAAA,GAAG,CAACmC,SAAJ;AACAnC,QAAAA,GAAG,CAACkI,MAAJ,CAAW,IAAI,KAAKxG,WAApB,EAAiC,CAAjC;AACA1B,QAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK+L,UAAL,GAAkB,KAAK/K,WAAlC,EAA+C,CAA/C;AACA1B,QAAAA,GAAG,CAACU,MAAJ,CAAW,IAAI,KAAKgB,WAApB,EAAiC,CAAC,CAAlC;AACA1B,QAAAA,GAAG,CAACsG,SAAJ;AACAtG,QAAAA,GAAG,CAACqG,IAAJ,GAzBqC,CA0BrC;AACD,OA3BD,MA2BO;AACL,aAAKqG,cAAL;AACD;;AACH1M,MAAAA,GAAG,CAAC0C,OAAJ;AACD;;;2BACMiK,S,EAAW;AAAA;;AAChB;AACA,WAAKjL,WAAL,IAAoB,KAAKtC,CAAzB,CAFgB,CAGhB;;AACA,UAAIwN,UAAJ;AACA,UAAIC,YAAJ,CALgB,CAMhB;;AACA,UAAI,CAACxO,IAAI,CAACuE,OAAL,CAAaiI,WAAb,CAAyB,MAAzB,CAAL,EAAuC;AACrC,YAAMiC,gBAAgB,GAAG,KAAKpL,WAAL,GAAmB,KAAK+K,UAAjD,CADqC,CAErC;;AACAlJ,QAAAA,OAAO,CAACe,OAAR,CAAgB,UAACC,MAAD,EAASwI,MAAT,EAAoB;AAClCH,UAAAA,UAAU,GAAG,sBAAM;AACjB,mBAAOtN,IAAI,CAAC0N,IAAL,CAAUzI,MAAM,CAAChE,CAAP,GAAWgE,MAAM,CAAC7C,WAA5B,CAAP;AACD,WAFD;;AAGAmL,UAAAA,YAAY,GAAG,wBAAM;AACnB;AACA,mBAAQC,gBAAgB,IAAKvI,MAAM,CAAC7C,WAAP,GAAsB6C,MAAM,CAAChE,CAAP,GAAW,CAAvD,IAAgEuM,gBAAgB,IAAKvI,MAAM,CAAC7C,WAAP,GAAsB6C,MAAM,CAAChE,CAAP,GAAW,CAA7H;AACD,WAHD;;AAIA,UAAA,MAAI,CAAC0M,WAAL,CAAiB1I,MAAjB,EAAyBwI,MAAzB,EAAiCxJ,OAAjC,EAA0CoJ,SAA1C,EAAqDC,UAArD,EAAiEC,YAAjE;AACD,SATD,EAHqC,CAarC;;AACArJ,QAAAA,SAAS,CAACc,OAAV,CAAkB,UAACE,QAAD,EAAW0I,MAAX,EAAsB;AACtC;AACA;AACA;AACAN,UAAAA,UAAU,GAAG,sBAAM;AACjB,gBAAMO,OAAO,GAAG3I,QAAQ,CAAC9C,WAAT,GAAwB8C,QAAQ,CAACjE,CAAT,GAAa,CAArD;AACA,gBAAM6M,OAAO,GAAI5I,QAAQ,CAACjE,CAAT,GAAa,CAAd,GAAmBjB,IAAI,CAACC,IAAL,CAAU,CAAV,CAAnC;AACA,mBAAOD,IAAI,CAACO,KAAL,CAAWuN,OAAX,EAAoBD,OAApB,CAAP;AACD,WAJD;;AAKAN,UAAAA,YAAY,GAAG,wBAAM;AACnB;AACA,mBAAQC,gBAAgB,IAAItI,QAAQ,CAAC9C,WAA9B,IAA+CoL,gBAAgB,IAAKtI,QAAQ,CAAC9C,WAAT,GAAwB8C,QAAQ,CAACjE,CAAT,GAAa,CAAhH;AACD,WAHD;;AAIA,UAAA,MAAI,CAAC0M,WAAL,CAAiBzI,QAAjB,EAA2B0I,MAA3B,EAAmC1J,SAAnC,EAA8CmJ,SAA9C,EAAyDC,UAAzD,EAAqEC,YAArE;AACD,SAdD,EAdqC,CA6BrC;;AACAnJ,QAAAA,QAAQ,CAACY,OAAT,CAAiB,UAACG,OAAD,EAAU4I,OAAV,EAAsB;AACrC;AACA,cAAI5I,OAAO,CAACI,EAAR,CAAW+D,KAAf,EAAsB;AACpBiE,YAAAA,YAAY,GAAG,wBAAM;AACnB;AACA,kBAAMS,KAAK,GAAG7I,OAAO,CAAC/C,WAAR,CAAoBkH,KAAlC;AACA,qBAAQkE,gBAAgB,IAAIQ,KAArB,IAAgCR,gBAAgB,IAAKQ,KAAK,GAAG,CAApE;AACD,aAJD;;AAKA,YAAA,MAAI,CAACC,aAAL,CAAmB9I,OAAnB,EAA4B,OAA5B,EAAqC,EAArC,EAAyC,EAAzC,EAA8C,OAAO,MAAM,EAAb,CAA9C,EAAkE,IAAI,EAAtE,EAA2E,EAA3E,EAA+EkI,SAA/E,EAA0FE,YAA1F;AACD,WAPD,MAOO;AACL;AACA;AACA,gBAAIpI,OAAO,CAACI,EAAR,CAAWgE,GAAf,EAAoB;AAClBgE,cAAAA,YAAY,GAAG,wBAAM;AACnB;AACA,oBAAMS,KAAK,GAAG7I,OAAO,CAAC/C,WAAR,CAAoBmH,GAAlC;AACA,uBAAQiE,gBAAgB,IAAIQ,KAAK,GAAG,CAA7B,IAAoCR,gBAAgB,IAAKQ,KAAK,GAAG,EAAxE;AACD,eAJD;;AAKA,cAAA,MAAI,CAACC,aAAL,CAAmB9I,OAAnB,EAA4B,KAA5B,EAAmC,EAAnC,EAAuC,EAAvC,EAA6C,MAAM,EAAP,GAAa,GAAzD,EAAgE,OAAO,KAAK,EAAZ,CAAhE,EAAkF,EAAlF,EAAsFkI,SAAtF,EAAiGE,YAAjG;AACD,aAVI,CAWL;;;AACA,gBAAIpI,OAAO,CAACI,EAAR,CAAWiE,KAAf,EAAsB;AACpB+D,cAAAA,YAAY,GAAG,wBAAM;AACnB;AACA,oBAAMS,KAAK,GAAG7I,OAAO,CAAC/C,WAAR,CAAoBoH,KAAlC;AACA,uBAAQgE,gBAAgB,IAAIQ,KAAK,GAAG,CAA7B,IAAoCR,gBAAgB,IAAKQ,KAAK,GAAG,EAAxE;AACD,eAJD;;AAKA,cAAA,MAAI,CAACC,aAAL,CAAmB9I,OAAnB,EAA4B,OAA5B,EAAqC,EAArC,EAAyC,EAAzC,EAA+C,MAAM,IAAP,GAAe,GAA7D,EAAoE,OAAO,KAAK,IAAZ,CAApE,EAAwF,IAAxF,EAA8FkI,SAA9F,EAAyGE,YAAzG;AACD,aAnBI,CAoBL;;;AACA,gBAAI,CAACpI,OAAO,CAACI,EAAR,CAAWgE,GAAZ,IAAmB,CAACpE,OAAO,CAACI,EAAR,CAAWiE,KAAnC,EAA0C;AACxCpF,cAAAA,QAAQ,CAACX,MAAT,CAAgBsK,OAAhB,EAAyB,CAAzB,EADwC,CAExC;;AACAhP,cAAAA,IAAI,CAACW,UAAL,IAAmB,CAAnB;AACAA,cAAAA,UAAU,CAACsN,WAAX,GAAyBjO,IAAI,CAACW,UAA9B;AACD;AACF;AACF,SArCD;AAsCD,OApED,MAoEO;AACL;AACA;AACAuE,QAAAA,OAAO,CAACe,OAAR,CAAgB,UAACC,MAAD,EAASwI,MAAT,EAAoB;AAClCH,UAAAA,UAAU,GAAG,sBAAM;AACjB,mBAAOtN,IAAI,CAAC0N,IAAL,CAAUzI,MAAM,CAAChE,CAAP,GAAWgE,MAAM,CAAC7C,WAA5B,CAAP;AACD,WAFD;;AAGAmL,UAAAA,YAAY,GAAG,wBAAM;AACnB,mBAAQ,MAAI,CAACnL,WAAL,IAAqB6C,MAAM,CAAC7C,WAAP,GAAsB6C,MAAM,CAAChE,CAAP,GAAW,CAAvD,IAAgE,MAAI,CAACmB,WAAL,IAAqB6C,MAAM,CAAC7C,WAAP,GAAsB6C,MAAM,CAAChE,CAAP,GAAW,CAA7H;AACD,WAFD;;AAGA,UAAA,MAAI,CAAC0M,WAAL,CAAiB1I,MAAjB,EAAyBwI,MAAzB,EAAiCxJ,OAAjC,EAA0CoJ,SAA1C,EAAqDC,UAArD,EAAiEC,YAAjE,EAA+E,MAA/E;AACD,SARD,EAHK,CAYL;;AACArJ,QAAAA,SAAS,CAACc,OAAV,CAAkB,UAACE,QAAD,EAAW0I,MAAX,EAAsB;AACtCN,UAAAA,UAAU,GAAG,sBAAM;AACjB,gBAAMO,OAAO,GAAG3I,QAAQ,CAAC9C,WAAT,GAAwB8C,QAAQ,CAACjE,CAAT,GAAa,CAArD;AACA,gBAAM6M,OAAO,GAAI5I,QAAQ,CAACjE,CAAT,GAAa,CAAd,GAAmBjB,IAAI,CAACC,IAAL,CAAU,CAAV,CAAnC;AACA,mBAAOD,IAAI,CAACO,KAAL,CAAWuN,OAAX,EAAoBD,OAApB,CAAP;AACD,WAJD;;AAKAN,UAAAA,YAAY,GAAG,wBAAM;AACnB,mBAAQ,MAAI,CAACnL,WAAL,IAAoB8C,QAAQ,CAAC9C,WAA9B,IAA+C,MAAI,CAACA,WAAL,IAAqB8C,QAAQ,CAAC9C,WAAT,GAAwB8C,QAAQ,CAACjE,CAAT,GAAa,CAAhH;AACD,WAFD;;AAGA,UAAA,MAAI,CAAC0M,WAAL,CAAiBzI,QAAjB,EAA2B0I,MAA3B,EAAmC1J,SAAnC,EAA8CmJ,SAA9C,EAAyDC,UAAzD,EAAqEC,YAArE,EAAmF,MAAnF;AACD,SAVD,EAbK,CAwBL;;AACAnJ,QAAAA,QAAQ,CAACY,OAAT,CAAiB,UAACG,OAAD,EAAU4I,OAAV,EAAsB;AACrC;AACA,cAAI5I,OAAO,CAACI,EAAR,CAAW+D,KAAf,EAAsB;AACpBiE,YAAAA,YAAY,GAAG,wBAAM;AACnB,kBAAMS,KAAK,GAAG7I,OAAO,CAAC/C,WAAR,CAAoBkH,KAAlC;AACA,qBAAQ,MAAI,CAAClH,WAAL,IAAoB4L,KAArB,IAAgC,MAAI,CAAC5L,WAAL,IAAqB4L,KAAK,GAAG,CAApE;AACD,aAHD;;AAIA,YAAA,MAAI,CAACC,aAAL,CAAmB9I,OAAnB,EAA4B,OAA5B,EAAqC,EAArC,EAAyC,EAAzC,EAA8C,OAAO,MAAM,EAAb,CAA9C,EAAkE,IAAI,EAAtE,EAA2E,EAA3E,EAA+EkI,SAA/E,EAA0FE,YAA1F,EAAwG,MAAxG;AACD,WAND,MAMO;AACL;AACA;AACA,gBAAIpI,OAAO,CAACI,EAAR,CAAWgE,GAAf,EAAoB;AAClBgE,cAAAA,YAAY,GAAG,wBAAM;AACnB,oBAAMS,KAAK,GAAG7I,OAAO,CAAC/C,WAAR,CAAoBmH,GAAlC;AACA,uBAAQ,MAAI,CAACnH,WAAL,IAAoB4L,KAAK,GAAG,CAA7B,IAAoC,MAAI,CAAC5L,WAAL,IAAqB4L,KAAK,GAAG,EAAxE;AACD,eAHD;;AAIA,cAAA,MAAI,CAACC,aAAL,CAAmB9I,OAAnB,EAA4B,KAA5B,EAAmC,EAAnC,EAAuC,EAAvC,EAA6C,MAAM,EAAP,GAAa,GAAzD,EAAgE,OAAO,KAAK,EAAZ,CAAhE,EAAkF,EAAlF,EAAsFkI,SAAtF,EAAiGE,YAAjG,EAA+G,MAA/G;AACD,aATI,CAUL;;;AACA,gBAAIpI,OAAO,CAACI,EAAR,CAAWiE,KAAf,EAAsB;AACpB+D,cAAAA,YAAY,GAAG,wBAAM;AACnB,oBAAMS,KAAK,GAAG7I,OAAO,CAAC/C,WAAR,CAAoBoH,KAAlC;AACA,uBAAQ,MAAI,CAACpH,WAAL,IAAoB4L,KAAK,GAAG,CAA7B,IAAoC,MAAI,CAAC5L,WAAL,IAAqB4L,KAAK,GAAG,EAAxE;AACD,eAHD;;AAIA,cAAA,MAAI,CAACC,aAAL,CAAmB9I,OAAnB,EAA4B,OAA5B,EAAqC,EAArC,EAAyC,EAAzC,EAA+C,MAAM,IAAP,GAAe,GAA7D,EAAoE,OAAO,KAAK,IAAZ,CAApE,EAAwF,IAAxF,EAA8FkI,SAA9F,EAAyGE,YAAzG,EAAuH,MAAvH;AACD,aAjBI,CAkBL;;;AACA,gBAAI,CAACpI,OAAO,CAACI,EAAR,CAAWgE,GAAZ,IAAmB,CAACpE,OAAO,CAACI,EAAR,CAAWiE,KAAnC,EAA0C;AACxCpF,cAAAA,QAAQ,CAACX,MAAT,CAAgBsK,OAAhB,EAAyB,CAAzB,EADwC,CAExC;;AACAhP,cAAAA,IAAI,CAACW,UAAL,IAAmB,CAAnB;AACAA,cAAAA,UAAU,CAACsN,WAAX,GAAyBjO,IAAI,CAACW,UAA9B;AACD;AACF;AACF,SAlCD;AAmCD,OAvIe,CAwIhB;;;AACA,WAAKwO,cAAL,CAAoBb,SAApB;AACD,K,CACD;;;;qCACiB;AACf3M,MAAAA,GAAG,CAACoC,WAAJ,GAAkB,KAAKyD,KAAvB;AACA7F,MAAAA,GAAG,CAACuK,SAAJ,GAAgB,GAAhB;AACAvK,MAAAA,GAAG,CAACqK,WAAJ,GAAkB,2BAAlB;AACArK,MAAAA,GAAG,CAACsK,UAAJ,GAAiB,CAAjB,CAJe,CAKf;;AACAtK,MAAAA,GAAG,CAACmC,SAAJ;;AACA,WAAK,IAAIgF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK8D,UAAzB,EAAqC9D,CAAC,IAAI,CAA1C,EAA6C;AAC3C,YAAMsG,MAAM,GAAItG,CAAC,GAAG,KAAK+D,QAAV,GAAuB5N,IAAI,GAAG,KAAK8N,QAAlD;AACApL,QAAAA,GAAG,CAACU,MAAJ,CAAW,KAAKgB,WAAL,GAAoB,KAAKyJ,OAAL,GAAe7L,IAAI,CAACuB,GAAL,CAAS4M,MAAT,CAA9C,EAAiEtG,CAAjE;AACD;;AACDnH,MAAAA,GAAG,CAACyC,MAAJ,GAXe,CAYf;;AACAzC,MAAAA,GAAG,CAACmC,SAAJ;;AACA,WAAK,IAAIgF,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,KAAK8D,UAAzB,EAAqC9D,EAAC,IAAI,CAA1C,EAA6C;AAC3C,YAAMsG,OAAM,GAAItG,EAAC,GAAG,KAAK+D,QAAV,GAAuB5N,IAAI,GAAG,KAAK8N,QAAlD;;AACApL,QAAAA,GAAG,CAACU,MAAJ,CAAW,KAAKgB,WAAL,GAAoB,KAAKyJ,OAAL,GAAe7L,IAAI,CAACuB,GAAL,CAAS4M,OAAT,CAA9C,EAAiE,CAACtG,EAAlE;AACD;;AACDnH,MAAAA,GAAG,CAACyC,MAAJ;AACD,K,CACD;;;;gCACYiL,K,EAAOnE,Q,EAAUD,O,EAASqD,S,EAAWC,U,EAAYC,Y,EAAiC;AAAA,UAAnBc,IAAmB,uEAAZ,UAAY;;AAC5F;;;;;AAKA,UAAMC,aAAa,GAAGhB,UAAU,EAAhC;AACA,UAAMiB,eAAe,GAAIH,KAAK,CAAC/L,eAAN,GAAwB,GAAzB,GAAgCf,OAAhC,GAA0CgN,aAAlE;AACA,UAAME,aAAa,GAAIJ,KAAK,CAAC/L,eAAN,GAAwB,GAAzB,GAAgCf,OAAhC,GAA0CgN,aAAhE;AACA,UAAMG,cAAc,GAAG,KAAKC,mBAAL,CAAyBH,eAAzB,EAA0CC,aAA1C,EAAyDH,IAAzD,CAAvB,CAT4F,CAU5F;;AACA,UAAMM,UAAU,GAAGpB,YAAY,EAA/B,CAX4F,CAY5F;;AACA,UAAIkB,cAAc,IAAIE,UAAtB,EAAkC;AAChC;AACA5P,QAAAA,IAAI,CAACuE,OAAL,CAAakD,OAAb,CAAqB/C,MAArB,CAA4B4J,SAA5B,EAAuC,CAAvC,EAFgC,CAGhC;;AACAe,QAAAA,KAAK,CAAC7I,EAAN,IAAY,CAAZ;;AACA,YAAI,CAAC6I,KAAK,CAAC7I,EAAX,EAAe;AACb;AACAyE,UAAAA,OAAO,CAACvG,MAAR,CAAewG,QAAf,EAAyB,CAAzB,EAFa,CAGb;;AACAlL,UAAAA,IAAI,CAACW,UAAL,IAAmB,CAAnB;AACAA,UAAAA,UAAU,CAACsN,WAAX,GAAyBjO,IAAI,CAACW,UAA9B;AACD;AACF;AACF,K,CACD;;;;kCACcyF,O,EAASwE,I,EAAMiF,S,EAAWC,S,EAAWC,Q,EAAUC,Q,EAAUC,gB,EAAkB3B,S,EAAWE,Y,EAAiC;AAAA,UAAnBc,IAAmB,uEAAZ,UAAY;AACnI,UAAMY,mBAAmB,GAAG9J,OAAO,CAAC9C,eAAR,CAAwBsH,IAAxB,CAA5B;AACA,UAAMuF,UAAU,GAAG/J,OAAO,CAACgB,MAAR,CAAewD,IAAf,CAAnB,CAFmI,CAGnI;;AACA,UAAMqE,KAAK,GAAG7I,OAAO,CAAC/C,WAAR,CAAoBuH,IAApB,CAAd;AACA,UAAMwF,MAAM,GAAGP,SAAf;AACA,UAAMQ,MAAM,GAAGP,SAAf;AACA;;;;;;;;;;;;;;;;;;;;;;AAsBA,UAAMQ,MAAM,GAAGC,aAAa,CAACtB,KAAD,EAAQmB,MAAR,EAAgBL,QAAhB,CAA5B;AACA,UAAMS,MAAM,GAAGD,aAAa,CAACtB,KAAD,EAAQoB,MAAR,EAAgBL,QAAhB,CAA5B,CA9BmI,CA+BnI;;AACA,UAAMS,WAAW,GAAIP,mBAAmB,IAAI,GAAxB,KAAkCC,UAAU,GAAG,GAAd,GAAqBF,gBAArB,IAA0CE,UAAU,GAAG,GAAd,IAAuBF,gBAAgB,GAAG,GAApH,CAApB;AACA,UAAMS,QAAQ,GAAIR,mBAAmB,GAAG,GAAvB,KAAiCC,UAAU,GAAG,GAAd,IAAsBF,gBAAtB,IAA2CE,UAAU,GAAG,GAAd,GAAsBF,gBAAgB,GAAG,GAAnH,CAAjB;AACA,UAAIU,OAAJ;AACA,UAAIC,OAAJ;;AACA,UAAIH,WAAW,IAAIC,QAAnB,EAA6B;AAC3BC,QAAAA,OAAO,GAAGE,SAAS,CAAC5B,KAAD,EAAQoB,MAAR,EAAgBG,MAAhB,CAAnB;AACAI,QAAAA,OAAO,GAAGC,SAAS,CAAC5B,KAAD,EAAQmB,MAAR,EAAgBE,MAAhB,CAAnB;AACD,OAHD,MAGO;AACLK,QAAAA,OAAO,GAAGE,SAAS,CAAC5B,KAAD,EAAQmB,MAAR,EAAgBE,MAAhB,CAAnB;AACAM,QAAAA,OAAO,GAAGC,SAAS,CAAC5B,KAAD,EAAQoB,MAAR,EAAgBG,MAAhB,CAAnB;AACD;AACD;;;;;;AAIA,UAAMM,cAAc,GAAGZ,mBAAmB,GAAG3N,OAAtB,GAAgCoO,OAAvD;AACA,UAAMI,YAAY,GAAGb,mBAAmB,GAAG3N,OAAtB,GAAgCqO,OAArD;AACA,UAAMlB,cAAc,GAAG,KAAKC,mBAAL,CAAyBmB,cAAzB,EAAyCC,YAAzC,EAAuDzB,IAAvD,CAAvB,CAjDmI,CAkDnI;;AACA,UAAMM,UAAU,GAAGpB,YAAY,EAA/B,CAnDmI,CAoDnI;;AACA,UAAIkB,cAAc,IAAIE,UAAtB,EAAkC;AAChC;AACA5P,QAAAA,IAAI,CAACuE,OAAL,CAAakD,OAAb,CAAqB/C,MAArB,CAA4B4J,SAA5B,EAAuC,CAAvC,EAFgC,CAGhC;;AACAlI,QAAAA,OAAO,CAACI,EAAR,CAAWoE,IAAX,KAAoB,CAApB;AACD;AACF,K,CACD;;;;wCACoB4E,e,EAAiBC,a,EAAeH,I,EAAM;AACxD,UAAM0B,kBAAkB,GAAIxB,eAAe,GAAG,CAAlB,IAAuB,KAAKtG,WAAL,GAAmBjI,IAAI,CAACkD,EAAhD,GAAuD,KAAK+E,WAAL,GAAmBjI,IAAI,CAACkD,EAAL,GAAU,CAApF,GAAyF,KAAK+E,WAAzH,CADwD,CAExD;AACA;;AACA,UAAIoG,IAAI,KAAK,MAAb,EAAqB;AACnB,eAAO0B,kBAAkB,IAAIxB,eAAtB,IAAyCwB,kBAAkB,IAAIvB,aAAtE;AACD,OAFD,MAEO;AACL;AACA,YAAMwB,eAAe,GAAGhQ,IAAI,CAACO,KAAL,CAAW,KAAKoL,UAAhB,EAA4B,KAAKvJ,WAAjC,CAAxB;AACA,YAAM6N,iBAAiB,GAAGF,kBAAkB,GAAGC,eAA/C;AACA,YAAME,eAAe,GAAGH,kBAAkB,GAAGC,eAA7C;AACA,eAAQzB,eAAe,IAAI2B,eAApB,IAAyC1B,aAAa,IAAIyB,iBAAjE;AACD;AACF,K,CACD;;;;mCACe5C,S,EAAW;AACxB;;;;;AAKA,UAAI,KAAKjL,WAAL,IAAoB,GAAxB,EAA6B;AAC3BrD,QAAAA,IAAI,CAACuE,OAAL,CAAakD,OAAb,CAAqB/C,MAArB,CAA4B4J,SAA5B,EAAuC,CAAvC;AACD;AACF;;;;;AAKH;;;IACMnE,W;;;AACJ,uBAAYnH,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACV;AACA;AACA;AACA;AACAI,MAAAA,WAAW,EAAE,CALH;AAMVC,MAAAA,eAAe,EAAE,CANP;AAOV;AACApB,MAAAA,CAAC,EAAE,IARO;AASVkF,MAAAA,MAAM,EAAE,CATE;AAUVG,MAAAA,OAAO,EAAE,CAVC;AAWVC,MAAAA,KAAK,EAAEtI,WAAW,CAACI,IAXT;AAYVkH,MAAAA,EAAE,EAAE,CAZM;AAaV4K,MAAAA,iBAAiB,EAAE,KAbT;AAcVhH,MAAAA,KAAK,EAAE;AAdG,KAAZ;AAgBA7G,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;2BACM;AACL;AACA,UAAMyG,iBAAiB,GAAG,KAAKxH,CAAL,GAAS,GAAnC;AACA,UAAMyH,iBAAiB,GAAG,KAAKzH,CAAL,GAAS,GAAnC;AACA,UAAM0H,mBAAmB,GAAG,KAAK1H,CAAL,GAAS,GAArC;AACAP,MAAAA,GAAG,CAAC+B,IAAJ,GALK,CAMH;;AACA/B,MAAAA,GAAG,CAACgC,SAAJ,CAAcC,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDzC,CAAlE,EAAqE+C,WAAW,CAAC,KAAKP,WAAN,EAAmB,KAAKC,eAAxB,CAAX,CAAoDxC,CAAzH,EAPG,CAQH;;AACAa,MAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAKA,MAAL,GAAc7E,OAAzB;AACAZ,MAAAA,GAAG,CAAC+B,IAAJ;AACE/B,MAAAA,GAAG,CAACgC,SAAJ,CAAc,GAAd,EAAmB,CAAC1C,IAAI,CAACC,IAAL,CAAU,IAAV,CAApB;AACAS,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAWH,iBAAiB,GAAGzI,IAAI,CAACqB,GAAL,CAAS,CAAT,CAA/B,EAA4CoH,iBAAiB,GAAGzI,IAAI,CAACuB,GAAL,CAAS,CAAT,CAAhE;AACAb,MAAAA,GAAG,CAACU,MAAJ,CAAWqH,iBAAiB,GAAGzI,IAAI,CAACqB,GAAL,CAAS,MAAMC,OAAf,CAA/B,EAAwDmH,iBAAiB,GAAGzI,IAAI,CAACuB,GAAL,CAAS,MAAMD,OAAf,CAA5E;AACAZ,MAAAA,GAAG,CAACU,MAAJ,CAAWqH,iBAAiB,GAAGzI,IAAI,CAACqB,GAAL,CAAS,MAAMC,OAAf,CAA/B,EAAwDmH,iBAAiB,GAAGzI,IAAI,CAACuB,GAAL,CAAS,MAAMD,OAAf,CAA5E;AACAZ,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,0BAAhB;AACAlE,MAAAA,GAAG,CAACqG,IAAJ;AACFrG,MAAAA,GAAG,CAAC0C,OAAJ,GAnBG,CAoBH;;AACA1C,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAW,KAAK3H,CAAL,GAASjB,IAAI,CAACqB,GAAL,CAAS,CAAT,CAApB,EAAiC,KAAKJ,CAAL,GAASjB,IAAI,CAACuB,GAAL,CAAS,CAAT,CAA1C;AACAb,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAKH,CAAL,GAASjB,IAAI,CAACqB,GAAL,CAAS,MAAMC,OAAf,CAApB,EAA6C,KAAKL,CAAL,GAASjB,IAAI,CAACuB,GAAL,CAAS,MAAMD,OAAf,CAAtD;AACAZ,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAKH,CAAL,GAASjB,IAAI,CAACqB,GAAL,CAAS,MAAMC,OAAf,CAApB,EAA6C,KAAKL,CAAL,GAASjB,IAAI,CAACuB,GAAL,CAAS,MAAMD,OAAf,CAAtD;AACAZ,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,MAAAA,GAAG,CAACqG,IAAJ,GA3BG,CA4BH;;AACArG,MAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAC,IAAf,EAAqB,CAAC,IAAtB;AACAhC,MAAAA,GAAG,CAACkE,SAAJ,GAAgB3G,WAAW,CAACM,KAA5B;AACAmC,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,MAAAA,GAAG,CAACU,MAAJ,CAAWsH,iBAAiB,GAAG1I,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAA/B,EAAuDoH,iBAAiB,GAAG1I,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAA3E;AACAZ,MAAAA,GAAG,CAACU,MAAJ,CAAWsH,iBAAiB,GAAG1I,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAA/B,EAAuDoH,iBAAiB,GAAG1I,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAA3E;AACAZ,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACqG,IAAJ,GApCG,CAqCH;;AACArG,MAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAd,EAAiB,CAAC,IAAlB;AACAhC,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,MAAAA,GAAG,CAACU,MAAJ,CAAWuH,mBAAmB,GAAG3I,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAAjC,EAAyDqH,mBAAmB,GAAG3I,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAA/E;AACAZ,MAAAA,GAAG,CAACU,MAAJ,CAAWuH,mBAAmB,GAAG3I,IAAI,CAACqB,GAAL,CAAS,KAAKC,OAAd,CAAjC,EAAyDqH,mBAAmB,GAAG3I,IAAI,CAACuB,GAAL,CAAS,KAAKD,OAAd,CAA/E;AACAZ,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACqG,IAAJ;AACFrG,MAAAA,GAAG,CAAC0C,OAAJ;AACD;;;2BACMC,G,EAAK;AAAA;;AACV,WAAK8C,MAAL,IAAe,KAAKG,OAApB;;AACA,UAAI,CAAC,KAAK6J,iBAAV,EAA6B;AAC3B9I,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBjF,UAAAA,eAAe,YAAK,KAAK8G,KAAL,KAAe,CAAf,GAAmB,IAAnB,GAA0B,IAA/B,OADO;AAEtB5B,UAAAA,IAAI,EAAEC,MAAM,CAACC,OAFS;AAGtBC,UAAAA,UAAU,EAAE,sBAAM;AAChBL,YAAAA,SAAS,CAACC,EAAV,CAAa,MAAb,EAAmB,GAAnB,EAAwB;AACtBlF,cAAAA,WAAW,EAAE,CADS;AAEtBmF,cAAAA,IAAI,EAAE6I,MAAM,CAACC;AAFS,aAAxB;AAID;AARqB,SAAxB;AAUA,aAAKF,iBAAL,GAAyB,IAAzB;AACD,OAdS,CAeV;;;AACAvI,MAAAA,eAAe,CAACzD,YAAD,EAAed,GAAf,EAAoB,KAAKjB,WAAzB,EAAsC,KAAKC,eAA3C,CAAf;AACD;;;;;AAIH;;;IACM0F,Y;;;AACJ,wBAAYhG,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVgG,MAAAA,CAAC,EAAE;AACDpI,QAAAA,CAAC,EAAE,CADF;AAEDC,QAAAA,CAAC,EAAE;AAFF,OADO;AAKVuC,MAAAA,WAAW,EAAE,CALH;AAMVmE,MAAAA,KAAK,EAAEtI,WAAW,CAACE,MANT;AAOV+J,MAAAA,KAAK,EAAE,CAPG;AAQVoI,MAAAA,MAAM,EAAE,CAAC,CARC;AASV;AACArI,MAAAA,WAAW,EAAE;AAVH,KAAZ;AAYA3F,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;2BACM;AACLtB,MAAAA,GAAG,CAAC+B,IAAJ;AACE/B,MAAAA,GAAG,CAACgC,SAAJ,CAAc,KAAKsF,CAAL,CAAOpI,CAArB,EAAwB,KAAKoI,CAAL,CAAOnI,CAA/B;AACAa,MAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAK8B,WAAL,GAAmB3G,OAA9B,EAHG,CAIH;AACA;;AACAZ,MAAAA,GAAG,CAACmC,SAAJ,GANG,CAOH;;AACAnC,MAAAA,GAAG,CAACqC,GAAJ,CAAQ,KAAKmF,KAAb,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6BlI,IAAI,CAACkD,EAAL,GAAU,CAAvC,EARG,CASH;;AACAxC,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,MAAAA,GAAG,CAACqG,IAAJ;AACFrG,MAAAA,GAAG,CAAC0C,OAAJ;AACD;;;2BACMC,G,EAAK6D,G,EAAK;AACf;AACA,WAAKgB,KAAL,IAAc,KAAKoI,MAAnB,CAFe,CAGf;;AACAC,MAAAA,wBAAwB,CAAC,IAAD,EAAOlN,GAAP,EAAY6D,GAAZ,CAAxB;AACD;;;;;AAIH;;;IACMkC,c;;;AACJ,0BAAYrH,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVgG,MAAAA,CAAC,EAAE;AACDpI,QAAAA,CAAC,EAAE,CADF;AAEDC,QAAAA,CAAC,EAAE;AAFF,OADO;AAKVqI,MAAAA,KAAK,EAAE,CALG;AAMVoI,MAAAA,MAAM,EAAE,CAAC,CANC;AAOVrI,MAAAA,WAAW,EAAE,CAPH;AAQV1B,MAAAA,KAAK,EAAEtI,WAAW,CAACI;AART,KAAZ;AAUAiE,IAAAA,MAAM,CAACC,MAAP,CAAcP,GAAd,EAAmBD,IAAnB;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBP,GAApB;AACD;;;;2BACM;AACLtB,MAAAA,GAAG,CAAC+B,IAAJ;AACE/B,MAAAA,GAAG,CAACgC,SAAJ,CAAc,KAAKsF,CAAL,CAAOpI,CAArB,EAAwB,KAAKoI,CAAL,CAAOnI,CAA/B;AACAa,MAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAK8B,WAAL,GAAmB3G,OAA9B;AACAZ,MAAAA,GAAG,CAACgC,SAAJ,CAAc,KAAKwF,KAAnB,EAA0B,CAA1B,EAJG,CAKH;;AACAxH,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,KAAK2B,KAArB;AACA7F,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAlI,MAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,MAAAA,GAAG,CAACM,UAAJ,CAAe,IAAf,EAAqB,GAArB;AACAN,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACqG,IAAJ,GAZG,CAaH;;AACArG,MAAAA,GAAG,CAACkE,SAAJ,GAAgB,0BAAhB;AACAlE,MAAAA,GAAG,CAACmC,SAAJ;AACAnC,MAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAC,IAAZ,EAAkB,CAAlB;AACAlI,MAAAA,GAAG,CAACM,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAN,MAAAA,GAAG,CAACM,UAAJ,CAAe,IAAf,EAAqB,GAArB;AACAN,MAAAA,GAAG,CAACsG,SAAJ;AACAtG,MAAAA,GAAG,CAACqG,IAAJ;AACFrG,MAAAA,GAAG,CAAC0C,OAAJ;AACD;;;2BACMC,G,EAAK6D,G,EAAK;AACf;AACA,WAAKgB,KAAL,IAAc,KAAKoI,MAAnB,CAFe,CAGf;;AACAC,MAAAA,wBAAwB,CAAC,IAAD,EAAOlN,GAAP,EAAY6D,GAAZ,EAAiB,IAAjB,CAAxB,CAJe,CAKf;;AACA,WAAKgH,cAAL,CAAoB7K,GAApB,EAAyB6D,GAAzB;AACD,K,CACD;;;;mCACe7D,G,EAAK6D,G,EAAK;AACtB;AACD,UAAI,KAAKgB,KAAL,IAAc,CAAC,IAAnB,EAAyB;AACvBhB,QAAAA,GAAG,CAACzD,MAAJ,CAAWJ,GAAX,EAAgB,CAAhB;AACD;AACF;;;;KAIH;;;AACA,SAASkN,wBAAT,CAAkCnC,KAAlC,EAAyCnE,QAAzC,EAAmDD,OAAnD,EAAgF;AAAA,MAApBwG,cAAoB,uEAAH,CAAG;AAC9E,MAAMlN,OAAO,GAAGvE,IAAI,CAACuE,OAArB;AACA,MAAMmN,eAAe,GAAGnN,OAAO,CAACrC,CAAR,GAAaqC,OAAO,CAACC,aAAR,GAAwB,CAA7D;AACA,MAAMmN,iBAAiB,GAAGpN,OAAO,CAACqH,OAAR,GAAmBrH,OAAO,CAACsH,WAAR,GAAsB,CAAnE,CAH8E,CAI9E;;AACA,MAAI,CAACwD,KAAK,CAAClG,KAAP,IAAiBkG,KAAK,CAAChM,WAAN,IAAqBqO,eAAe,GAAGD,cAAvC,CAArB,EAA8E;AAC5E;AACA9F,IAAAA,wBAAwB,GAFoD,CAG5E;;AACAV,IAAAA,OAAO,CAACvG,MAAR,CAAewG,QAAf,EAAyB,CAAzB;AACD,GAV6E,CAW9E;;;AACA,MAAM0G,QAAQ,GAAG3Q,IAAI,CAACuK,GAAL,CAASC,cAAc,GAAI4D,KAAK,CAACnG,WAAN,GAAoB,GAArB,GAA4B3G,OAAtD,CAAjB;AACA,MAAMgJ,gBAAgB,GAAGqG,QAAQ,IAAK,MAAMrP,OAAnB,IAA+BqP,QAAQ,IAAK,MAAMrP,OAA3E;;AACA,MAAIgJ,gBAAgB,IAAK,CAAC8D,KAAK,CAAClG,KAAP,IAAiBkG,KAAK,CAAChM,WAAN,IAAqBsO,iBAAiB,GAAGF,cAAzC,CAA1C,EAAsG;AACpG;AACAxG,IAAAA,OAAO,CAACvG,MAAR,CAAewG,QAAf,EAAyB,CAAzB;AACD;AACF,C,CAGD;;;AACA,SAASS,wBAAT,GAAoC;AAClC,MAAMpH,OAAO,GAAGvE,IAAI,CAACuE,OAArB;AACA,MAAMsN,mBAAmB,GAAG,GAA5B;AACA,MAAMC,aAAa,GAAGvR,YAAY,CAACwR,WAAb,GAA4BF,mBAAmB,GAAG,CAAxE;AACAtN,EAAAA,OAAO,CAACwH,UAAR,GAAqB,IAArB,CAJkC,CAKlC;;AACAxH,EAAAA,OAAO,CAACiC,EAAR,IAAc,CAAd;AACAjG,EAAAA,YAAY,CAACsG,KAAb,CAAmBnE,KAAnB,aAA8BoP,aAA9B;;AACA,MAAI,CAACA,aAAL,EAAoB;AAClB,QAAME,YAAY,GAAGtS,QAAQ,CAACuS,gBAAT,CAA0B,oBAA1B,CAArB,CADkB,CAElB;;AACA,QAAID,YAAY,CAACvQ,MAAjB,EAAyB;AACvB;AACAuQ,MAAAA,YAAY,CAAC,CAAD,CAAZ,CAAgBE,UAAhB,CAA2BC,WAA3B,CAAuCH,YAAY,CAAC,CAAD,CAAnD,EAFuB,CAGvB;;AACAzR,MAAAA,YAAY,CAACsG,KAAb,CAAmBnE,KAAnB,aAA8BmP,mBAA9B;AACD;AACF;AACF,C,CAKD;;;AACA,SAASO,WAAT,CAAqBnJ,CAArB,EAAwB;AACtBtH,EAAAA,GAAG,CAAC+B,IAAJ;AACE/B,EAAAA,GAAG,CAACgC,SAAJ,CAAcsF,CAAC,CAACpI,CAAhB,EAAmBoI,CAAC,CAACnI,CAArB;AACAa,EAAAA,GAAG,CAACkE,SAAJ,GAAgB3G,WAAW,CAACE,MAA5B,CAHoB,CAIpB;;AACAuC,EAAAA,GAAG,CAACmC,SAAJ;AACAnC,EAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,EAAhB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,EAAd;AACAV,EAAAA,GAAG,CAACsG,SAAJ;AACAtG,EAAAA,GAAG,CAACqG,IAAJ,GAXoB,CAYpB;;AACArG,EAAAA,GAAG,CAAC+B,IAAJ;AACE/B,EAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAd,EAAiB,EAAjB;AACAhC,EAAAA,GAAG,CAACmC,SAAJ;AACAnC,EAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAV,EAAAA,GAAG,CAACsG,SAAJ;AACAtG,EAAAA,GAAG,CAACqG,IAAJ;AACFrG,EAAAA,GAAG,CAAC0C,OAAJ,GAtBoB,CAuBpB;;AACA1C,EAAAA,GAAG,CAACkE,SAAJ,GAAgB3G,WAAW,CAACM,KAA5B;AACAmC,EAAAA,GAAG,CAAC+B,IAAJ;AACE/B,EAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAC,IAAf,EAAqB,CAArB;AACAhC,EAAAA,GAAG,CAACmC,SAAJ;AACAnC,EAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,CAAC,CAAf;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,IAAZ,EAAkB,CAAC,CAAnB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,IAAZ,EAAkB,CAAC,CAAnB;AACAV,EAAAA,GAAG,CAACsG,SAAJ;AACAtG,EAAAA,GAAG,CAACqG,IAAJ;AACFrG,EAAAA,GAAG,CAAC0C,OAAJ,GAlCoB,CAmCpB;AACA;;AACAwG,EAAAA,aAAa,CAAC;AAAEhK,IAAAA,CAAC,EAAE,CAAC,EAAN;AAAUC,IAAAA,CAAC,EAAE;AAAb,GAAD,CAAb,CArCoB,CAsCpB;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;;AACFa,EAAAA,GAAG,CAAC0C,OAAJ;AACD;;AAGD,SAAST,WAAT,CAAqBP,WAArB,EAAkCC,eAAlC,EAAmD;AACjD,SAAO;AACLzC,IAAAA,CAAC,EAAGkB,KAAK,GAAG,CAAT,GAAcsB,WAAW,GAAGpC,IAAI,CAACqB,GAAL,CAASgB,eAAe,GAAGf,OAA3B,CAD1B;AAELzB,IAAAA,CAAC,EAAGkB,KAAK,GAAG,CAAT,GAAcqB,WAAW,GAAGpC,IAAI,CAACuB,GAAL,CAASc,eAAe,GAAGf,OAA3B;AAF1B,GAAP;AAID,C,CAED;;;AACA,SAASgO,aAAT,CAAuB8B,CAAvB,EAA0BC,CAA1B,EAA6BnQ,KAA7B,EAAoC;AAClC,SAAOlB,IAAI,CAACC,IAAL,CAAUmR,CAAC,GAAGA,CAAJ,GAAQC,CAAC,GAAGA,CAAZ,GAAgB,IAAID,CAAJ,GAAQC,CAAR,GAAYrR,IAAI,CAACqB,GAAL,CAASH,KAAK,GAAGI,OAAjB,CAAtC,CAAP;AACD;;AAED,SAASsO,SAAT,CAAmBwB,CAAnB,EAAsBC,CAAtB,EAAyBC,CAAzB,EAA4B;AAC1B,SAAOtR,IAAI,CAACuR,IAAL,CAAU,CAACH,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgBD,CAAC,GAAGA,CAArB,KAA2B,IAAID,CAAJ,GAAQE,CAAnC,CAAV,CAAP;AACD,C,CAED;;;AACA,SAAS1H,aAAT,GAAgE;AAAA,MAAzClH,SAAyC,uEAA5B;AAAE9C,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE;AAAX,GAA4B;AAAA,MAAZ2R,KAAY,uEAAJ,CAAI;AAC9D9Q,EAAAA,GAAG,CAACkE,SAAJ,GAAgB3G,WAAW,CAACM,KAA5B;AACAmC,EAAAA,GAAG,CAACgC,SAAJ,CAAcA,SAAS,CAAC9C,CAAxB,EAA2B8C,SAAS,CAAC7C,CAArC;AACAa,EAAAA,GAAG,CAACmC,SAAJ;AACAnC,EAAAA,GAAG,CAACkI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAlI,EAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAK7E,OAAhB;AACAZ,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,KAAKoQ,KAAnB;AACA9Q,EAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAd,EAAiB,KAAK8O,KAAtB;AACA9Q,EAAAA,GAAG,CAACyF,MAAJ,CAAW,CAAC,EAAD,GAAM7E,OAAjB;AAEAZ,EAAAA,GAAG,CAACU,MAAJ,CAAW,KAAKoQ,KAAhB,EAAuB,CAAvB;AACA9Q,EAAAA,GAAG,CAACgC,SAAJ,CAAc,KAAK8O,KAAnB,EAA0B,CAA1B;AAEA9Q,EAAAA,GAAG,CAACyF,MAAJ,CAAW,KAAK7E,OAAhB;AACAZ,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,KAAKoQ,KAAnB;AACA9Q,EAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAd,EAAiB,KAAK8O,KAAtB;AACA9Q,EAAAA,GAAG,CAACyF,MAAJ,CAAW,CAAC,EAAD,GAAM7E,OAAjB;AAEAZ,EAAAA,GAAG,CAACyF,MAAJ,CAAW,MAAM7E,OAAjB;AACAZ,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,CAAC,EAAD,GAAMoQ,KAApB;AACA9Q,EAAAA,GAAG,CAACgC,SAAJ,CAAc,CAAd,EAAiB,CAAC,EAAD,GAAM8O,KAAvB;AACA9Q,EAAAA,GAAG,CAACyF,MAAJ,CAAW,CAAC,GAAD,GAAO7E,OAAlB;AAEAZ,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,CAAD,GAAKoQ,KAAhB,EAAuB,CAAvB;AACA9Q,EAAAA,GAAG,CAACsG,SAAJ;AACAtG,EAAAA,GAAG,CAACqG,IAAJ;AACD;AAED;AACA;AAEA;;AAMA;AACA;AACA;AACA;;AAMA;AACA;AACE;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACF;;AAMA;;;AACA,SAAS0K,UAAT,GAAsB;AACpB1S,EAAAA,IAAI,GAAG,IAAIsF,IAAJ,EAAP;AACA7C,EAAAA,UAAU;AACVzC,EAAAA,IAAI,CAAC2S,IAAL,GAHoB,CAIpB;AACA;AACA;AACD,C,CAED;;;AACAC,MAAM,CAAC7S,gBAAP,CAAwB,MAAxB,EAAgC2S,UAAhC;AACAE,MAAM,CAAC7S,gBAAP,CAAwB,QAAxB,EAAkC0C,UAAlC;AAMA;AACA;;AACA,IAAIoQ,YAAY,GAAG,EAAnB;AACA,IAAIpH,cAAc,GAAG,CAArB,C,CACA;AACA;AAEA;AACA;AACA;;AACA/J,MAAM,CAAC3B,gBAAP,CAAwB,WAAxB,EAAqC+S,eAArC;;AAEA,SAASA,eAAT,CAAyBC,GAAzB,EAA8B;AAC5BF,EAAAA,YAAY,CAAChS,CAAb,GAAiBkS,GAAG,CAAClS,CAAJ,GAAQgB,EAAE,GAAG,CAA9B;AACAgR,EAAAA,YAAY,CAAC/R,CAAb,GAAiBiS,GAAG,CAACjS,CAAJ,GAAQgB,EAAE,GAAG,CAA9B;AACA,MAAMK,KAAK,GAAGlB,IAAI,CAACO,KAAL,CAAWqR,YAAY,CAAC/R,CAAxB,EAA2B+R,YAAY,CAAChS,CAAxC,CAAd;AACA4K,EAAAA,cAAc,GAAGtJ,KAAK,GAAG,CAAR,GAAaA,KAAK,GAAG,IAAIlB,IAAI,CAACkD,EAA9B,GAAoChC,KAArD,CAJ4B,CAK5B;AACD;;AAAA;AAEDT,MAAM,CAAC3B,gBAAP,CAAwB,OAAxB,EAAiCiT,WAAjC;AACAJ,MAAM,CAAC7S,gBAAP,CAAwB,OAAxB,EAAiCkT,WAAjC;AAEA,IAAI1J,eAAe,GAAG,IAAI5B,IAAJ,EAAtB;;AACA,SAASqL,WAAT,GAAuB;AACrBhT,EAAAA,IAAI,CAACuE,OAAL,CAAaqE,KAAb;AACD;;AAAA;;AAED,SAASqK,WAAT,CAAqBF,GAArB,EAA0B;AACxB,MAAIA,GAAG,CAACG,GAAJ,KAAY,GAAhB,EAAqB;AACnBlT,IAAAA,IAAI,CAACuE,OAAL,CAAaqE,KAAb;AACD;AACF,C,CAED;AACA;AACA;AAEA;AACA;AACA","file":"index.js","sourcesContent":["/* Environment Variable */\r\nconst updateFPS = 30;\r\n// const showMouse = true;\r\n// const bgColor = 'black';\r\nlet time = 0;\r\n\r\nconst globalColor = {\r\n  red: '#e7465d',\r\n  orange: '#f5af5f',\r\n  yellow: '#f7b52c',\r\n  blue: '#3676bb',\r\n  blueDark: '#001d2e',\r\n  white: '#fff',\r\n};\r\n\r\nconst startBtn = document.getElementById('start-btn');\r\nconst cover = document.getElementById('cover');\r\nconst gamePanel = document.getElementById('game-panel');\r\nconst batteryInfo = document.getElementById('battery-info');\r\n\r\nstartBtn.addEventListener('click',\r\n  function() {\r\n    game.startGame();\r\n  },\r\n  {\r\n    once: true,\r\n  },\r\n);\r\n\r\n\r\n/* GUI Controls */\r\nconst controls = {\r\n  // splited: false,\r\n  // length: 120,\r\n  // amp: 8,\r\n  // freq: 0.3,\r\n  // divide: 1,\r\n}\r\n\r\nconst gui = new dat.GUI();\r\n// gui.add(controls, 'length', 0, 200).step(1).onChange((value) => {});\r\n// gui.add(controls, 'amp', 0, 30).step(1).onChange((value) => {});\r\n// gui.add(controls, 'freq', 0, 1).step(0.1).onChange((value) => {});\r\n// gui.add(controls, 'divide', 1, 100).step(1).onChange((value) => {});\r\n\r\n// gui.add(controls, 'splited');\r\n// gui.add(controls, 'value', -2, 2).step(0.01).onChange((value) => {});\r\n\r\nconst shooterHpBar = document.getElementById('hp');\r\nconst prop = document.getElementById('prop');\r\nconst propImg = document.getElementById('prop__img');\r\nconst propLastTime = document.getElementById('prop__last-time');\r\nconst batteryNum = document.getElementById('battery-num');\r\n\r\n\r\n\r\n\r\n\r\n/* 2D Vector Class */\r\nclass Vec2 {\r\n  constructor(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  set(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n  move(x, y) {\r\n    this.x += x;\r\n    this.y += y;\r\n  }\r\n  add(v) {\r\n    return new Vec2(this.x + v.x, this.y + v.y);\r\n  }\r\n  sub(v) {\r\n    return new Vec2(this.x - v.x, this.y - v.y);\r\n  }\r\n  mul(s) {\r\n    return new Vec2(this.x * s, this.y * s);\r\n  }\r\n  clone() {\r\n    return new Vec2(this.x, this.y);\r\n  }\r\n  equal(v) {\r\n    return this.x === v.x && this.y === v.y;\r\n  }\r\n  get length() {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y);\r\n  }\r\n  set length(newVal) {\r\n    const newLength = this.unit.mul(newVal);\r\n    this.set(newLength.x, newLength.y);\r\n  }\r\n  get angle() {\r\n    return Math.atan2(this.y, this.x);\r\n  }\r\n  get unit() {\r\n    return this.mul(1 / this.length);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/* Initialize Canvas Settings */\r\nconst canvas = document.getElementById('game');\r\nconst ctx = canvas.getContext('2d');\r\nlet ww;\r\nlet wh;\r\nlet gameW;\r\nlet gameH;\r\n\r\n// ctx.circle = function (v, r) {\r\n//   this.arc(v.x, v.y, r, 0, Math.PI * 2);\r\n// }\r\n// ctx.line = function (v1, v2) {\r\n//   this.moveTo(v1.x, v1.y);\r\n//   this.lineTo(v2.x, v2.y);\r\n// }\r\n\r\nctx.$triLineTo = function(r, angle, angleAdd = 0) {\r\n  return ctx.lineTo(r * Math.cos(angle * degToPi + angleAdd), r * Math.sin(angle * degToPi + angleAdd));\r\n}\r\n\r\nfunction initCanvas() {\r\n  gameW = canvas.width;\r\n  gameH = canvas.height;\r\n  ww = document.documentElement.clientWidth;\r\n  wh = document.documentElement.clientHeight;\r\n}\r\n// initCanvas();\r\n\r\n\r\n\r\n\r\n\r\n/*  class */\r\nclass Prop {\r\n  constructor(args) {\r\n    const def = {\r\n      img: new Image(),\r\n      src: '',\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      r: 32,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    if (!this.img.src) {\r\n      this.img.src = this.src;\r\n      // ctx.mozImageSmoothingEnabled = ctx.webkitImageSmoothingEnabled = ctx.msImageSmoothingEnabled = ctx.imageSmoothingEnabled = false;\r\n    }\r\n    if (this.img.complete) {\r\n      ctx.save();\r\n        ctx.translate(originalPos(this.axisRotateR, this.axisRotateAngle).x, originalPos(this.axisRotateR, this.axisRotateAngle).y);\r\n        ctx.drawImage(this.img, 0, 0);\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';\r\n      ctx.arc(this.img.naturalWidth / 2, this.img.naturalHeight / 2, this.r, 0, Math.PI * 2);\r\n        ctx.stroke();\r\n        // ctx.beginPath();\r\n        // ctx.fillStyle = 'red';\r\n        // ctx.arc(0, 0, 4, 0, Math.PI * 2);\r\n        // ctx.fill();\r\n      ctx.restore();\r\n    }\r\n  }\r\n  update(idx) {\r\n    this.axisRotateR -= 3.2;\r\n    //  shooter \r\n    const shooter = game.shooter;\r\n    if ((this.axisRotateR + this.r) <= (shooter.r + (shooter.cirSolidLineW / 2))) {\r\n      game.props.splice(idx, 1);\r\n      const propName = this.src.slice(17).split('.')[0];\r\n      shooter.getProp(propName);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst degToPi = Math.PI / 180;\r\nlet coverCircle;\r\nlet coverTriangle;\r\nlet coverPolygon;\r\nlet game;\r\n\r\nlet circles = [];\r\nlet triangles = [];\r\nlet subTriangles = [];\r\nlet polygons = [];\r\n// let props = [];\r\n\r\nclass Game {\r\n  constructor(args) {\r\n    const def = {\r\n      isGameStart: true,\r\n      isGameEnd: false,\r\n      // isGameStart: false,\r\n      shooter: null,\r\n      currentLevel: 1,\r\n      isInLevel1: false,\r\n      props: [],\r\n      batteryNum: 0,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  init() {\r\n    // coverCircle = new Circle({\r\n    //   axisRotateR: 380,\r\n    //   axisRotateAngle: -36,\r\n    //   r: 39,\r\n    // });\r\n    // coverTriangle = new Triangle({\r\n    //   axisRotateR: {\r\n    //     x: 320,\r\n    //     y: 320,\r\n    //   },\r\n    //   axisRotateAngle: 40,\r\n    //   rotate: 32,\r\n    //   r: 44,\r\n    // });\r\n    // coverPolygon = new Polygon({\r\n    //   p: {\r\n    //     x: 72,\r\n    //     y: 96,\r\n    //   },\r\n    //   scale: 1.25,\r\n    // });\r\n    this.startGame();\r\n    this.render();\r\n    this.update();\r\n  }\r\n  render() {\r\n    ctx.fillStyle = globalColor.blueDark;\r\n    ctx.fillRect(0, 0, gameW, gameH);\r\n    if (this.isGameStart) {\r\n      // \r\n      this.drawPanel();\r\n      //  shooter\r\n      this.shooter.draw();\r\n      //  circle\r\n      circles.forEach((circle) => {\r\n        circle.draw();\r\n      });\r\n      //  triangle\r\n      triangles.forEach((triangle) => {\r\n        triangle.draw();\r\n      });\r\n      //  polygon\r\n      polygons.forEach((polygon) => {\r\n        polygon.draw();\r\n      });\r\n      //  sub triangle\r\n      subTriangles.forEach((subTriangle) => {\r\n        subTriangle.draw();\r\n      });\r\n      //  prop\r\n      this.props.forEach((prop) => {\r\n        prop.draw();\r\n      })\r\n    } else {\r\n      // this.startGame();\r\n      this.drawCover();\r\n    }\r\n    requestAnimationFrame(() => { this.render() });\r\n  }\r\n  update() {\r\n    if (!this.shooter.HP) {\r\n      this.endGame();\r\n    }\r\n    time += 1;\r\n    if (this.isGameStart) {\r\n      // \r\n      if (this.currentLevel === 1 && !this.isInLevel1) {\r\n        this.setLevelOne();\r\n        this.isInLevel1 = true;\r\n      }\r\n      //  shooter\r\n      this.shooter.update();\r\n      //  circle\r\n      circles.forEach((circle, idx) => {\r\n        circle.update(idx);\r\n      });\r\n      //  triangle\r\n      triangles.forEach((triangle, idx) => {\r\n        triangle.update(idx);\r\n      });\r\n      //  polygon\r\n      polygons.forEach((polygon, idx) => {\r\n        polygon.update(idx);\r\n      });\r\n      //  sub triangle\r\n      subTriangles.forEach((subTriangle, idx) => {\r\n        subTriangle.update(idx);\r\n      });\r\n      //  prop\r\n      this.props.forEach((prop, idx) => {\r\n        prop.update(idx);\r\n      });\r\n      // \r\n      this.generateProp();\r\n    }\r\n    if (!this.isGameEnd) {\r\n      setTimeout(() => {\r\n        this.update();\r\n      }, 1000 / updateFPS);\r\n    }\r\n  }\r\n  // \r\n  drawCover() {\r\n    // if (this.rLogo.complete) {\r\n    //   ctx.drawImage(this.rLogo, gameW / 2 - 12, gameH / 2 - 70, 31 * 1.7, 38 * 1.7);\r\n    // }\r\n    // \r\n    // ctx.save();\r\n    //   ctx.translate(gameW / 2, gameH / 2);\r\n    //   ctx.beginPath();\r\n    //   ctx.arc(0, 0, 180, 0, Math.PI * 2);\r\n    //   ctx.strokeStyle = globalColor.white;\r\n    //   ctx.stroke();\r\n    //   ctx.beginPath();\r\n    //   ctx.arc(0, 0, 264, 0, Math.PI * 2);\r\n    //   ctx.globalAlpha = 0.3;\r\n    //   ctx.stroke();\r\n    // ctx.restore();\r\n    // \r\n    // coverCircle.draw();\r\n    // coverCircle.update();\r\n    // \r\n    // coverTriangle.draw();\r\n    // coverTriangle.update();\r\n    // \r\n    // coverPolygon.draw();\r\n    // coverPolygon.update();\r\n    // \r\n    // drawBattery({\r\n    //   x: gameW / 2 - 24,\r\n    //   y: gameH / 2 - 52,\r\n    // });\r\n    // R \r\n    // ctx.save();\r\n    //   ctx.translate(gameW / 2 + 24, gameH / 2 - 30);\r\n    //   ctx.rotate(-132 * degToPi);\r\n    //   ctx.beginPath();\r\n    //   ctx.moveTo(0, 0);\r\n    //   ctx.lineTo(4, 0);\r\n    //   ctx.lineTo(0, -8.4);\r\n    //   ctx.lineTo(-4.2, 0);\r\n    //   ctx.closePath();\r\n    //   ctx.fillStyle = globalColor.white;\r\n    //   ctx.fill();\r\n    // ctx.restore();\r\n  }\r\n  // \r\n  drawPanel() {\r\n    // drawBattery({\r\n    //   x: gameW - 152,\r\n    //   y: gameH - 62,\r\n    // });\r\n  }\r\n  //  'Start Play' \r\n  startGame() {\r\n    this.isGameStart = true;\r\n    cover.style.display = 'none';\r\n    gamePanel.style.display = 'block';\r\n    this.shooter = new Shooter();\r\n    canvas.style.cursor = 'pointer';\r\n  }\r\n  // \r\n  endGame() {\r\n    // console.log(batteryNum);\r\n    this.isGameEnd = true;\r\n    batteryInfo.style.opacity = 0;\r\n  }\r\n  // \r\n  generateProp() {\r\n\r\n  }\r\n  // \r\n  setLevelOne() {\r\n    // this.props.push(new Prop({\r\n    //   src: '../../src/assets/shield.png',\r\n    //   axisRotateR: 200,\r\n    //   axisRotateAngle: 40,\r\n    // }));\r\n    circles.push(new Circle({\r\n      axisRotateR: 240,\r\n      axisRotateAngle: 0,\r\n    }));\r\n    // triangles.push(new Triangle({\r\n    //   axisRotateR: 280,\r\n    //   // axisRotateAngle  rotate \r\n    //   axisRotateAngle: 0,\r\n    //   // rotate: 160,\r\n    // }));\r\n    // polygons.push(new Polygon({\r\n    //   axisRotateR: {\r\n    //     whole: 280,\r\n    //     big: 280,\r\n    //     small: 280,\r\n    //   },\r\n    //   axisRotateAngle: {\r\n    //     whole: 0,\r\n    //     big: 0,\r\n    //     small: 0,\r\n    //   },\r\n    //   // rotate: {\r\n    //   //   whole: 40,\r\n    //   //   big: 40,\r\n    //   //   small: 40,\r\n    //   // },\r\n    // }));\r\n  }\r\n}\r\n\r\n\r\n\r\n/* Circle Class */\r\nclass Circle {\r\n  constructor(args) {\r\n    const def = {\r\n      // axisRotatePos: {\r\n      //   x: gameW / 2,\r\n      //   y: gameH / 2,\r\n      // },\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      r: 22,\r\n      rotate: 0,\r\n      axisRotateRV: 0.1,\r\n      axisRotateAngleV: 0.4,\r\n      rotateV: 0.4,\r\n      color: globalColor.orange,\r\n      HP: 2,\r\n      bullets: [],\r\n      beforeRotateTime: new Date(),\r\n      isRotating: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    const circleBigR = this.r + 5;\r\n    const circleSmallR = this.r - 10;\r\n    const subaxisRotateR = 14;\r\n    ctx.save();\r\n      ctx.translate(originalPos(this.axisRotateR, this.axisRotateAngle).x, originalPos(this.axisRotateR, this.axisRotateAngle).y);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      // \r\n      ctx.beginPath();\r\n      ctx.arc(4, 0, circleBigR, 0, Math.PI * 2);\r\n      ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n      ctx.fill();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.arc(-20, 0, circleSmallR, 0, Math.PI * 2);\r\n      ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n      ctx.fill();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.fillStyle = globalColor.white;\r\n      // ctx.arc(subaxisRotateR, 0, 2.4, 0, Math.PI * 2);\r\n      ctx.arc(subaxisRotateR * Math.cos(60 * degToPi), subaxisRotateR * Math.sin(60 * degToPi), 2.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.arc(subaxisRotateR * Math.cos(180 * degToPi), subaxisRotateR * Math.sin(180 * degToPi), 2.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.arc(subaxisRotateR * Math.cos(300 * degToPi), subaxisRotateR * Math.sin(300 * degToPi), 2.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.lineTo(-8, 0);\r\n      ctx.$triLineTo(-2, 32);\r\n      ctx.$triLineTo(-12, 120);\r\n      ctx.$triLineTo(-2.4, 176);\r\n      ctx.$triLineTo(-8, 240);\r\n      ctx.$triLineTo(-1.6, 320);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update(idx) {\r\n    // this.axisRotateR -= 3.2;\r\n    // \r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n    // \r\n    // if (!this.isRotating) {\r\n    //   this.axisRotateAngle += this.axisRotateAngleV;\r\n    //   // this.axisRotateAngle += 2;\r\n    // }\r\n    //  2-4 \r\n    const rotateTime = new Date();\r\n    if (rotateTime - this.beforeRotateTime > 2000 * Math.random() + 2000) {\r\n      this.isRotating = true;\r\n      // console.log(this.axisRotateAngle);\r\n      TweenLite.to(this, 0.4, {\r\n        // rotate: this.axisRotateAngle - 180,\r\n        // rotate: this.axisRotateAngle % 360,\r\n        rotate: this.axisRotateAngle,\r\n        ease: Power2.easeOut,\r\n        // \r\n        onComplete: () => {\r\n          this.shoot();\r\n          this.isRotating = false;\r\n        },\r\n      });\r\n      this.beforeRotateTime = rotateTime;\r\n    }\r\n    //  shooter\r\n    enemyHitShooter(circles, idx, this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n  shoot() {\r\n    //  1-2 \r\n    for (let i = 0; i < 2 * Math.random(); i += 1) {\r\n      const timer = setTimeout(() => {\r\n        this.bullets.push(new CircleBullet({\r\n          p: {\r\n            x: originalPos(this.axisRotateR, this.axisRotateAngle).x,\r\n            y: originalPos(this.axisRotateR, this.axisRotateAngle).y,\r\n          },\r\n          rotateAngle: this.rotate,\r\n          moveX: -this.r - 10,\r\n          // rotateAngle: Math.sin(this.rotate * degToPi),\r\n          axisRotateR: this.axisRotateR,\r\n        }));\r\n        clearTimeout(timer);\r\n        //  0.2-0.4 \r\n      }, i * (200 * Math.random() + 200));\r\n    }\r\n  }\r\n}\r\n\r\n/* Triangle Class */\r\nclass Triangle {\r\n  constructor(args) {\r\n    const def = {\r\n      // axisRotatePos: {\r\n      //   x: gameW / 2,\r\n      //   y: gameH / 2,\r\n      // },\r\n      // axisRotateR: {\r\n      //   x: 0,\r\n      //   y: 0,\r\n      // },\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      r: 26,\r\n      rotate: 0,\r\n      axisRotateRV: 0.1,\r\n      axisRotateAngleV: 0.4,\r\n      rotateV: -2.4,\r\n      color: globalColor.blue,\r\n      bullets: [],\r\n      beforeRotateAxisAngleTime: new Date(),\r\n      beforeShootTime: new Date(),\r\n      HP: 4,\r\n      isReproduce: false,\r\n      shootTimer: null,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    const triangleOuterBigR = this.r + 4;\r\n    const triangleInnerBigR = this.r - 16;\r\n    const triangleInnerSmallR = this.r - 22;\r\n    ctx.save();\r\n      // \r\n      ctx.translate(originalPos(this.axisRotateR, this.axisRotateAngle).x, originalPos(this.axisRotateR, this.axisRotateAngle).y);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      ctx.save();\r\n        ctx.translate(4, 0);\r\n        ctx.beginPath();\r\n        ctx.moveTo(triangleOuterBigR * Math.cos(60 * degToPi), triangleOuterBigR * Math.sin(60 * degToPi));\r\n        ctx.$triLineTo(triangleOuterBigR, 180);\r\n        ctx.$triLineTo(triangleOuterBigR, 300);\r\n        ctx.closePath();\r\n        ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n        ctx.fill();\r\n      ctx.restore();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.moveTo(this.r * Math.cos(60 * degToPi), this.r * Math.sin(60 * degToPi));\r\n      ctx.$triLineTo(this.r, 180);\r\n      ctx.$triLineTo(this.r, 300);\r\n      ctx.closePath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n      // \r\n      ctx.translate(0, -2.8);\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.$triLineTo(triangleInnerBigR, 90);\r\n      ctx.$triLineTo(triangleInnerBigR, 150);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.translate(8 * Math.cos(-40 * degToPi), 8 * Math.sin(-40 * degToPi))\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.$triLineTo(triangleInnerSmallR, 90);\r\n      ctx.$triLineTo(triangleInnerSmallR, 150);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update(idx) {\r\n    // this.axisRotateR -= 2.4;\r\n    // \r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n    //  8-16  + \r\n    const rotateAxisAngleTime = new Date();\r\n    let randomRotateAngle;\r\n    if (rotateAxisAngleTime - this.beforeRotateAxisAngleTime > (Math.random() * 16000 + 8000)) {\r\n      // \r\n      if (this.shootTimer) clearTimeout(this.shootTimer);\r\n      randomRotateAngle = (Math.random() > 0.25 ? -1 : 1) * (30 * Math.random() + 45);\r\n      //  0.8 \r\n      TweenLite.to(this, 0.8, {\r\n        axisRotateAngle: `+=${randomRotateAngle}`,\r\n        ease: Power0.easeNone,\r\n      });\r\n      //  1.2 \r\n      TweenLite.to(this, 1.2, {\r\n        rotate: `+=${randomRotateAngle + 360}`,\r\n        ease: Power2.easeInOut,\r\n        onComplete: () => {\r\n          // \r\n          this.shoot();\r\n          //  2.4 - 10.4 \r\n          this.shootTimer = setTimeout(() => {\r\n            this.shoot();\r\n          }, (Math.random() * 8000 + 2400));\r\n        }\r\n      });\r\n      this.beforeRotateAxisAngleTime = rotateAxisAngleTime;\r\n    }\r\n    //  2.4-3.6  1 \r\n    // const shootTime = new Date();\r\n    // if (shootTime - this.beforeShootTime > (Math.random() * 1200 + 2400)) {\r\n    //   if (!this.bullets.length) {\r\n    //     this.shoot();\r\n    //   }\r\n    // }\r\n    //  2\r\n    if (this.HP === 2 && !this.isReproduce) {\r\n      for (let i = 1; i <= 2; i += 1) {\r\n        subTriangles.push(new TriangleSub({\r\n          // axisRotateR: {\r\n          //   x: this.axisRotateR.x,\r\n          //   y: this.axisRotateR.y,\r\n          // },\r\n          axisRotateR: this.axisRotateR,\r\n          axisRotateAngle: this.axisRotateAngle,\r\n          rotate: this.rotate,\r\n          order: i,\r\n        }));\r\n      }\r\n      this.isReproduce = true;\r\n    }\r\n    //  shooter\r\n    enemyHitShooter(triangles, idx, this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n  shoot() {\r\n    this.bullets.push(new TriangleBullet({\r\n      p: {\r\n        x: originalPos(this.axisRotateR, this.axisRotateAngle).x,\r\n        y: originalPos(this.axisRotateR, this.axisRotateAngle).y,\r\n      },\r\n      axisRotateR: this.axisRotateR,\r\n      rotateAngle: this.rotate,\r\n      // rotate: this.rotate,\r\n    }));\r\n  }\r\n}\r\n\r\n\r\n\r\n/* Polygon  */\r\nclass Polygon {\r\n  constructor(args) {\r\n    const def = {\r\n      // axisRotatePos: {\r\n      //   x: gameW / 2,\r\n      //   y: gameH / 2,\r\n      // },\r\n      axisRotateR: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      axisRotateAngle: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      rotate: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      HP: {\r\n        whole: 1,\r\n        big: 1,\r\n        small: 1,\r\n      },\r\n      axisRotateRV: {\r\n        whole: 0.8,\r\n        big: 0.8,\r\n        small: 0.8,\r\n      },\r\n      axisRotateAngleV: {\r\n        whole: 0.4,\r\n        big: 0.4,\r\n        small: 0.4,\r\n      },\r\n      rotateV: {\r\n        whole: 0.4,\r\n        big: 0.4,\r\n        small: 0.4,\r\n      },\r\n      color: globalColor.red,\r\n      isSplited: false,\r\n      isSplitedMove: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  originalPos(form) {\r\n    return {\r\n      x: (gameW / 2) + this.axisRotateR[form] * Math.cos(this.axisRotateAngle[form] * degToPi),\r\n      y: (gameH / 2) + this.axisRotateR[form] * Math.sin(this.axisRotateAngle[form] * degToPi),\r\n    };\r\n  }\r\n  draw() {\r\n    if (!this.isSplited) {\r\n      ctx.save();\r\n        ctx.translate(this.originalPos('whole').x, this.originalPos('whole').y);\r\n        ctx.rotate(this.rotate.whole * degToPi);\r\n        // \r\n        ctx.beginPath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.moveTo(21 * Math.cos(8 * degToPi), 21 * Math.sin(8 * degToPi));\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.$triLineTo(34, 202);\r\n        ctx.$triLineTo(22, 255);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // \r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n        ctx.moveTo(9.6, -2);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.$triLineTo(21, 8);\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(10, 36);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // \r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n        ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.lineTo(-8.8, 0);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // \r\n        drawLightning({\r\n          x: -0.8,\r\n          y: -16\r\n        });\r\n      ctx.restore();\r\n    } else {\r\n      // \r\n      if (this.HP.big) {\r\n        ctx.save();\r\n          ctx.translate(this.originalPos('big').x, this.originalPos('big').y);\r\n          ctx.rotate(this.rotate.big * degToPi);\r\n          // \r\n          ctx.beginPath();\r\n          ctx.fillStyle = this.color;\r\n          ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\r\n          ctx.$triLineTo(23, 150);\r\n          ctx.$triLineTo(34, 202);\r\n          ctx.$triLineTo(22, 255);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // \r\n          ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n          ctx.beginPath();\r\n          ctx.moveTo(-8.8, 0);\r\n          ctx.$triLineTo(4.8, 64);\r\n          ctx.$triLineTo(23, 70);\r\n          ctx.$triLineTo(23, 150);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // \r\n          drawLightning({\r\n            x: -12,\r\n            y: -8\r\n          }, 0.6);\r\n        ctx.restore();\r\n      }\r\n      // \r\n      if (this.HP.small) {\r\n        ctx.save();\r\n          ctx.translate(this.originalPos('small').x, this.originalPos('small').y);\r\n          ctx.rotate(this.rotate.small * degToPi);\r\n          // \r\n          ctx.beginPath();\r\n          ctx.fillStyle = this.color;\r\n          ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\r\n          ctx.$triLineTo(22, 255);\r\n          ctx.$triLineTo(22, 324);\r\n          ctx.$triLineTo(21, 8);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // \r\n          ctx.beginPath();\r\n          ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n          ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\r\n          ctx.$triLineTo(4.8, 64);\r\n          ctx.$triLineTo(23, 70);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // \r\n          ctx.beginPath();\r\n          ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n          ctx.moveTo(9.6, -2);\r\n          ctx.$triLineTo(22, 324);\r\n          ctx.$triLineTo(21, 8);\r\n          ctx.$triLineTo(23, 70);\r\n          ctx.$triLineTo(10, 36);\r\n          ctx.closePath();\r\n          ctx.fill();\r\n          // ctx.fillStyle = 'yellow';\r\n          // ctx.beginPath();\r\n          // ctx.arc(0, 0, 2, 0, Math.PI * 2)\r\n          // ctx.fill();\r\n          // \r\n          drawLightning({\r\n            x: 10,\r\n            y: -8\r\n          }, 0.5);\r\n        ctx.restore();\r\n      }\r\n    }\r\n  }\r\n  update(idx) {\r\n    if (!this.HP.whole) {\r\n      this.isSplited = true;\r\n    }\r\n    if (!this.isSplited) {\r\n      this.axisRotateR.whole = this.axisRotateR.big = this.axisRotateR.small -= this.axisRotateRV.whole;\r\n      this.rotate.whole = this.rotate.big = this.rotate.small += this.rotateV.whole;\r\n      //  shooter\r\n      enemyHitShooter(polygons, idx, this.axisRotateR.whole, this.axisRotateAngle.whole);\r\n    } else {\r\n      if (!this.isSplitedMove) {\r\n        // const rotateOriginPos = 90 - 70;\r\n        // const rotateDirection = (((this.rotate.whole % 360) >= rotateOriginPos) && ((this.rotate.whole % 360) < (180 + rotateOriginPos))) ? -1 : 1;\r\n        const rotateDirection = Math.random() > 0.5 ? 1 : -1;\r\n        TweenLite.to(this.axisRotateAngle, 2.4, {\r\n          big: `+=${(Math.random() * 15 + 15) * rotateDirection}`,\r\n          small: `-=${(Math.random() * 15 + 15) * rotateDirection}`,\r\n          ease: Circ.easeOut,\r\n        });\r\n        TweenLite.to(this.rotate, 3.2, {\r\n          big: `-=${Math.random() * 90 + 180}`,\r\n          small: `+=${Math.random() * 90 + 180}`,\r\n          ease: Power4.easeOut,\r\n        });\r\n        this.isSplitedMove = true;\r\n      }\r\n      //  shooter\r\n      if (this.HP.big) {\r\n        this.axisRotateR.big -= this.axisRotateRV.big;\r\n        enemyHitShooter(polygons, idx, this.axisRotateR.big, this.axisRotateAngle.big, this.HP, 'big');\r\n      }\r\n      //  shooter\r\n      if (this.HP.small) {\r\n        this.axisRotateR.small -= this.axisRotateRV.small;\r\n        enemyHitShooter(polygons, idx, this.axisRotateR.small, this.axisRotateAngle.small, this.HP, 'small');\r\n      }\r\n    }\r\n    // if (!this.isInBoundary) {\r\n    //   this.p.x = -48;\r\n    //   this.p.y = -32;\r\n    //   this.v.x = 0.5 * Math.random() + 0.5;\r\n    //   this.v.y = 0.5 * Math.random() + 0.5;\r\n    // }\r\n  }\r\n  // get isInBoundary() {\r\n  //   const xInRange = -48 <= this.p.x && this.p.x <= gameW + 48;\r\n  //   const yInRange = -48 <= this.p.y && this.p.y <= gameH + 48;\r\n  //   return xInRange && yInRange;\r\n  // }\r\n}\r\n\r\n\r\n\r\n//  shooter \r\nfunction enemyHitShooter(enemies, enemyIdx, enemyAxisRotateR, enemyAxisRotateAngle, splitedPolygonHP, splitedPolygonName) {\r\n  // const shooterR = 34;\r\n  // const shieldR = shooterR + 36;\r\n  // const shooterInnerCirLineW = 6;\r\n  // const shieldLineW = 4;\r\n  const shooter = game.shooter;\r\n  const shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (225 * degToPi);\r\n  //  shooter\r\n  const judgeWhichEnemyHit = function() {\r\n    if (!splitedPolygonName) {\r\n      enemies.splice(enemyIdx, 1);\r\n    } else {\r\n      splitedPolygonName === 'big' ? splitedPolygonHP.big -= 1 : splitedPolygonHP.small -= 1;\r\n      if (!splitedPolygonHP.big && !splitedPolygonHP.small) {\r\n        enemies.splice(enemyIdx, 1);\r\n      }\r\n    }\r\n  }\r\n  //  shooter \r\n  if (enemyAxisRotateR <= (shooter.r + (shooter.cirSolidLineW / 2))) {\r\n    shooter.HP -= 1;\r\n    judgeWhichEnemyHit();\r\n    enemyAttackShooterResult();\r\n    //  shooter \r\n  } else if (shieldAngleRange && (enemyAxisRotateR <= (shooter.shieldR + (shooter.shieldLineW / 2)))) {\r\n    judgeWhichEnemyHit();\r\n  }\r\n}\r\n\r\n\r\n\r\n/* Shooter  */\r\n// let shooterBullets = [];\r\nclass Shooter {\r\n  constructor(args) {\r\n    const def = {\r\n      // p: {\r\n      //   x: gameW / 2,\r\n      //   y: gameH / 2,\r\n      // },\r\n      color: globalColor.white,\r\n      r: 34,\r\n      shieldR: 34 + 36,\r\n      cirSolidLineW: 6,\r\n      shieldLineW: 4,\r\n      rotateAngle: 0,\r\n      bullets: [],\r\n      // HP: 9,\r\n      HP: 1,\r\n      statuses: [],\r\n      isAttacked: false,\r\n      beforeShootTime: new Date(),\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save(); \r\n      // \r\n      ctx.translate(gameW / 2, gameH / 2);\r\n      // ctx.rotate(this.rotateAngle);\r\n      ctx.save();\r\n        ctx.beginPath();\r\n        ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n        ctx.shadowBlur = 16;\r\n        ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n        if (!this.isAttacked) {\r\n          ctx.strokeStyle = this.color;\r\n        } else {\r\n          ctx.strokeStyle = globalColor.red;\r\n          this.isAttacked = false;\r\n        }\r\n        // ctx.strokeStyle = this.color;\r\n        ctx.lineWidth = this.cirSolidLineW;\r\n        ctx.stroke();\r\n        // \r\n        ctx.beginPath();\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(this.r, 0, this.rotateAngle);\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(this.r, 120, this.rotateAngle);\r\n        ctx.moveTo(0, 0);\r\n        ctx.$triLineTo(this.r, 240, this.rotateAngle);\r\n        ctx.lineWidth = 3;\r\n        ctx.stroke();\r\n      ctx.restore();\r\n      // \r\n      ctx.strokeStyle = this.color;\r\n      const outerR = this.r + 22;\r\n      for (let i = 0; i < 360; i += 1) {\r\n        const x1 = outerR * Math.cos(i * degToPi + this.rotateAngle);\r\n        const y1 = outerR * Math.sin(i * degToPi + this.rotateAngle);\r\n        const x2 = outerR * Math.cos((i + 1) * degToPi + this.rotateAngle);\r\n        const y2 = outerR * Math.sin((i + 1) * degToPi + this.rotateAngle);\r\n        if (i % 10 < 5) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(x1, y1);\r\n          ctx.lineTo(x2, y2);\r\n          ctx.lineWidth = 1;\r\n          ctx.stroke();\r\n        }\r\n      }\r\n      // \r\n      // const shieldR = this.r + 36;\r\n      ctx.beginPath();\r\n      //  shooter  shield 180\r\n    if (!this.judgeStatus('shield')) {\r\n        ctx.arc(0, 0, this.shieldR, 135 * degToPi + this.rotateAngle, 225 * degToPi + this.rotateAngle);\r\n      } else {\r\n        ctx.arc(0, 0, this.shieldR, 90 * degToPi + this.rotateAngle, 270 * degToPi + this.rotateAngle);\r\n      }\r\n      ctx.lineWidth = this.shieldLineW;\r\n      ctx.stroke();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.save();\r\n        ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n        ctx.shadowBlur = 16;\r\n        ctx.rotate(this.rotateAngle);\r\n        ctx.translate(this.r + 8, 0);\r\n        ctx.moveTo(0, 0);\r\n        //  16 12\r\n        //  14 8\r\n        ctx.lineTo(0, 8);\r\n        ctx.lineTo(12, 8);\r\n        ctx.lineTo(26, 4);\r\n        ctx.lineTo(26, -4);\r\n        ctx.lineTo(12, -8);\r\n        ctx.lineTo(0, -8);\r\n        ctx.closePath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.fill();\r\n      ctx.restore();\r\n    ctx.restore();\r\n    // \r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update() {\r\n    this.rotateAngle = mouseMoveAngle;\r\n    this.bullets.forEach((bullet, idx) => {\r\n      bullet.update(idx);\r\n    });\r\n  }\r\n  shoot() {\r\n    const shootTime = new Date();\r\n    if (shootTime - beforeShootTime > 400) {\r\n      let bulletNum;\r\n      //  shooter  double 0.16 \r\n      if (!this.judgeStatus('double')) {\r\n        bulletNum = 1;\r\n      } else {\r\n        bulletNum = 2;\r\n      }\r\n      for (let i = 0; i < bulletNum; i++) {\r\n        if (!this.judgeStatus('wave')) {\r\n          setTimeout(() => {\r\n            this.bullets.push(new ShooterBullet({\r\n              // 34 + 12 + 16\r\n              // p: new Vec2(62, 0),\r\n              axisRotateR: 62,\r\n              rotateAngle: mouseMoveAngle,\r\n            }));\r\n          }, 160 * i);\r\n        } else {\r\n          setTimeout(() => {\r\n            this.bullets.push(new ShooterBullet({\r\n              waveLength: Math.random() * 40 + 40,\r\n              waveFreq: Math.random() * 0.2 + 0.2,\r\n              waveAmp: Math.random() * 4 + 4,\r\n              waveFlow: Math.random() * 4 + 4,\r\n              axisRotateR: 70,\r\n              rotateAngle: mouseMoveAngle,\r\n            }));\r\n          }, 160 * i);\r\n        }\r\n      }\r\n      beforeShootTime = shootTime;\r\n    }\r\n  }\r\n  getProp(propName) {\r\n    // \r\n    let lastTime;\r\n    switch (propName) {\r\n      case 'shield':\r\n        lastTime = 10000;\r\n        break;\r\n      case 'double':\r\n        lastTime = 20000;\r\n        break;\r\n      // case 'crackdown':\r\n      //   lastTime = 1600;\r\n      //   break;\r\n      case 'wave':\r\n        lastTime = 30000;\r\n        break;\r\n      default:\r\n        lastTime = 0;\r\n    }\r\n    //  shooter \r\n    this.statuses.push(propName);\r\n    // \r\n    setTimeout(() => {\r\n      for (let i = 0; i < this.statuses.length; i += 1) {\r\n        if (this.statuses[i] === propName) {\r\n          this.statuses.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n    }, lastTime);\r\n    //  shooter  heart\r\n    if (this.judgeStatus('heart')) {\r\n      this.recoverOneHeart();\r\n    }\r\n    //  shooter  crackdown\r\n    if (this.judgeStatus('crackdown')) {\r\n      this.drawCrackdownEffect();\r\n    }\r\n    // \r\n    this.displayPropInfo(propName, lastTime);\r\n  }\r\n  judgeStatus(shooterStatus) {\r\n    return this.statuses.find((status) => status === shooterStatus);\r\n  }\r\n  drawCrackdownEffect() {\r\n    let crackdownR = 1;\r\n    const effect = () => {\r\n      crackdownR += 1;\r\n      ctx.beginPath();\r\n      ctx.shadowColor = 'rgba(255, 255, 255, 0.72)';\r\n      ctx.shadowBlur = 2;\r\n      //  1  0\r\n      ctx.strokeStyle = `rgba(255, 255, 255, ${(100 - crackdownR) / 98})`;\r\n      ctx.lineWidth = 5;\r\n      /**\r\n       * baseLog()  0  3\r\n       *  (((crackdownR - 2) / 98) * 26) + 1  1  27\r\n       *  0  528\r\n       */\r\n      ctx.arc(gameW / 2, gameH / 2, 176 * baseLog(3, (((crackdownR - 2) / 98) * 26) + 1), 0, Math.PI * 2);\r\n      ctx.stroke();\r\n      if (crackdownR < 100) {\r\n        requestAnimationFrame(effect);\r\n      }\r\n    }\r\n    requestAnimationFrame(effect);\r\n  }\r\n  // \r\n  recoverOneHeart() {\r\n    this.HP += 3;\r\n    const heartWrapper = document.getElementById('heart-wrapper');\r\n    const heart = document.createElement('DIV');\r\n    heart.classList.add('panel__game-heart');\r\n    heartWrapper.insertBefore(heart, heartWrapper.firstChild);\r\n  }\r\n  displayPropInfo(propName, lastTime) {\r\n    if (propName === 'crackdown' || propName === 'heart') {\r\n      return;\r\n    }\r\n    prop.style.opacity = 1;\r\n    propImg.src = `../../src/assets/${propName}.svg`;\r\n    lastTime = lastTime / 1000;\r\n    propLastTime.textContent = lastTime;\r\n    setTimeout(function minusLastTime() {\r\n      lastTime -= 1;\r\n      propLastTime.textContent = lastTime;\r\n      if (!lastTime) {\r\n        prop.style.opacity = 0;\r\n      }\r\n      setTimeout(minusLastTime, 1000);\r\n    }, 1000);\r\n  }\r\n}\r\n\r\n//  x  y logxy\r\nfunction baseLog(x, y) {\r\n  return Math.log(y) / Math.log(x);\r\n}\r\n\r\n\r\n/* Shooter  */\r\nclass ShooterBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      // p: new Vec2(0, 0),\r\n      bodyLength: 15,\r\n      axisRotateR: 0,\r\n      color: globalColor.white,\r\n      v: 8,\r\n      rotateAngle: 0,\r\n      waveLength: 40,\r\n      waveFreq: 0.2,\r\n      waveAmp: 4,\r\n      waveFlow: 4,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(gameW / 2, gameH / 2);\r\n      ctx.rotate(this.rotateAngle);\r\n      // ctx.translate(this.p.x, this.p.y);\r\n      if (!game.shooter.judgeStatus('wave')) {\r\n        // \r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\r\n        ctx.arc(-7 + this.axisRotateR, 0, 3, 0, Math.PI * 2);\r\n        ctx.fill();\r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\r\n        ctx.arc(-12 + this.axisRotateR, 0, 2, 0, Math.PI * 2);\r\n        ctx.fill();\r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\r\n        ctx.arc(-15 + this.axisRotateR, 0, 1, 0, Math.PI * 2);\r\n        ctx.fill();\r\n        // \r\n        ctx.beginPath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.arc(0 + this.axisRotateR, 0, 4, 0, Math.PI * 2);\r\n        ctx.fill();\r\n        // \r\n        ctx.beginPath();\r\n        ctx.moveTo(3 + this.axisRotateR, 3);\r\n        ctx.lineTo(this.bodyLength + this.axisRotateR, 0);\r\n        ctx.lineTo(3 + this.axisRotateR, -3);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        //  shooter  wave\r\n      } else {\r\n        this.drawWaveBullet();\r\n      }\r\n    ctx.restore();\r\n  }\r\n  update(bulletIdx) {\r\n    // \r\n    this.axisRotateR += this.v;\r\n    // \r\n    let anglePanFn;\r\n    let shotRRangeFn;\r\n    // \r\n    if (!game.shooter.judgeStatus('wave')) {\r\n      const bulletMoveLength = this.axisRotateR + this.bodyLength;\r\n      // \r\n      circles.forEach((circle, cirIdx) => {\r\n        anglePanFn = () => {\r\n          return Math.asin(circle.r / circle.axisRotateR);\r\n        }\r\n        shotRRangeFn = () => {\r\n          // const bulletMoveLength = this.axisRotateR + this.bodyLength;\r\n          return (bulletMoveLength >= (circle.axisRotateR - (circle.r / 2))) && (bulletMoveLength <= (circle.axisRotateR + (circle.r / 2)));\r\n        }\r\n        this.attackEnemy(circle, cirIdx, circles, bulletIdx, anglePanFn, shotRRangeFn);\r\n      });\r\n      // \r\n      triangles.forEach((triangle, triIdx) => {\r\n        // const lengthX = triangle.axisRotateR.x * Math.cos(triangle.axisRotateAngle * degToPi);\r\n        // const lengthY = triangle.axisRotateR.y * Math.sin(triangle.axisRotateAngle * degToPi);\r\n        // const length = Math.sqrt(lengthX * lengthX + lengthY * lengthY);\r\n        anglePanFn = () => {\r\n          const lengthX = triangle.axisRotateR + (triangle.r / 2);\r\n          const lengthY = (triangle.r / 2) * Math.sqrt(3);\r\n          return Math.atan2(lengthY, lengthX);\r\n        }\r\n        shotRRangeFn = () => {\r\n          // const bulletMoveLength = this.axisRotateR + this.bodyLength;\r\n          return (bulletMoveLength >= triangle.axisRotateR) && (bulletMoveLength <= (triangle.axisRotateR + (triangle.r / 2)));\r\n        }\r\n        this.attackEnemy(triangle, triIdx, triangles, bulletIdx, anglePanFn, shotRRangeFn);\r\n      });\r\n      // \r\n      polygons.forEach((polygon, polyIdx) => {\r\n        // \r\n        if (polygon.HP.whole) {\r\n          shotRRangeFn = () => {\r\n            // const bulletMoveLength = this.axisRotateR + this.bodyLength;\r\n            const sideA = polygon.axisRotateR.whole;\r\n            return (bulletMoveLength >= sideA) && (bulletMoveLength <= (sideA + 9));\r\n          }\r\n          this.attackPolygon(polygon, 'whole', 34, 21, (360 - (202 + 75)), (8 + 75), 75, bulletIdx, shotRRangeFn);\r\n        } else {\r\n          // \r\n          // \r\n          if (polygon.HP.big) {\r\n            shotRRangeFn = () => {\r\n              // const bulletMoveLength = this.axisRotateR + this.bodyLength;\r\n              const sideA = polygon.axisRotateR.big;\r\n              return (bulletMoveLength >= sideA + 8) && (bulletMoveLength <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, 'big', 34, 23, ((202 + 44) - 180), (180 - (70 + 44)), 44, bulletIdx, shotRRangeFn);\r\n          }\r\n          // \r\n          if (polygon.HP.small) {\r\n            shotRRangeFn = () => {\r\n              // const bulletMoveLength = this.axisRotateR + this.bodyLength;\r\n              const sideA = polygon.axisRotateR.small;\r\n              return (bulletMoveLength >= sideA + 8) && (bulletMoveLength <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, 'small', 22, 23, ((255 + 17.5) - 180), (180 - (70 + 17.5)), 17.5, bulletIdx, shotRRangeFn);\r\n          }\r\n          // \r\n          if (!polygon.HP.big && !polygon.HP.small) {\r\n            polygons.splice(polyIdx, 1);\r\n            // \r\n            game.batteryNum += 1;\r\n            batteryNum.textContent = game.batteryNum;\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      // \r\n      // \r\n      circles.forEach((circle, cirIdx) => {\r\n        anglePanFn = () => {\r\n          return Math.asin(circle.r / circle.axisRotateR);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (this.axisRotateR >= (circle.axisRotateR - (circle.r / 2))) && (this.axisRotateR <= (circle.axisRotateR + (circle.r / 2)));\r\n        }\r\n        this.attackEnemy(circle, cirIdx, circles, bulletIdx, anglePanFn, shotRRangeFn, 'wave');\r\n      });\r\n      // \r\n      triangles.forEach((triangle, triIdx) => {\r\n        anglePanFn = () => {\r\n          const lengthX = triangle.axisRotateR + (triangle.r / 2);\r\n          const lengthY = (triangle.r / 2) * Math.sqrt(3);\r\n          return Math.atan2(lengthY, lengthX);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (this.axisRotateR >= triangle.axisRotateR) && (this.axisRotateR <= (triangle.axisRotateR + (triangle.r / 2)));\r\n        }\r\n        this.attackEnemy(triangle, triIdx, triangles, bulletIdx, anglePanFn, shotRRangeFn, 'wave');\r\n      });\r\n      // \r\n      polygons.forEach((polygon, polyIdx) => {\r\n        // \r\n        if (polygon.HP.whole) {\r\n          shotRRangeFn = () => {\r\n            const sideA = polygon.axisRotateR.whole;\r\n            return (this.axisRotateR >= sideA) && (this.axisRotateR <= (sideA + 9));\r\n          }\r\n          this.attackPolygon(polygon, 'whole', 34, 21, (360 - (202 + 75)), (8 + 75), 75, bulletIdx, shotRRangeFn, 'wave');\r\n        } else {\r\n          // \r\n          // \r\n          if (polygon.HP.big) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.big;\r\n              return (this.axisRotateR >= sideA + 8) && (this.axisRotateR <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, 'big', 34, 23, ((202 + 44) - 180), (180 - (70 + 44)), 44, bulletIdx, shotRRangeFn, 'wave');\r\n          }\r\n          // \r\n          if (polygon.HP.small) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.small;\r\n              return (this.axisRotateR >= sideA + 8) && (this.axisRotateR <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, 'small', 22, 23, ((255 + 17.5) - 180), (180 - (70 + 17.5)), 17.5, bulletIdx, shotRRangeFn, 'wave');\r\n          }\r\n          // \r\n          if (!polygon.HP.big && !polygon.HP.small) {\r\n            polygons.splice(polyIdx, 1);\r\n            // \r\n            game.batteryNum += 1;\r\n            batteryNum.textContent = game.batteryNum;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    // \r\n    this.beyondBoundary(bulletIdx);\r\n  }\r\n  // \r\n  drawWaveBullet() {\r\n    ctx.strokeStyle = this.color;\r\n    ctx.lineWidth = 1.6;\r\n    ctx.shadowColor = 'rgba(255, 255, 255, 0.72)';\r\n    ctx.shadowBlur = 2;\r\n    // \r\n    ctx.beginPath();\r\n    for (let i = 0; i < this.waveLength; i += 1) {\r\n      const degree = (i * this.waveFreq) + (time / this.waveFlow);\r\n      ctx.lineTo(this.axisRotateR + (this.waveAmp * Math.sin(degree)), i);\r\n    }\r\n    ctx.stroke();\r\n    // \r\n    ctx.beginPath();\r\n    for (let i = 0; i < this.waveLength; i += 1) {\r\n      const degree = (i * this.waveFreq) + (time / this.waveFlow);\r\n      ctx.lineTo(this.axisRotateR + (this.waveAmp * Math.sin(degree)), -i);\r\n    }\r\n    ctx.stroke();\r\n  }\r\n  // \r\n  attackEnemy(enemy, enemyIdx, enemies, bulletIdx, anglePanFn, shotRRangeFn, type = 'ordinary') {\r\n    /**\r\n     * \r\n     * \r\n     * \r\n     */\r\n    const enemyAnglePan = anglePanFn();\r\n    const enemyAngleMinus = (enemy.axisRotateAngle % 360) * degToPi - enemyAnglePan;\r\n    const enemyAngleAdd = (enemy.axisRotateAngle % 360) * degToPi + enemyAnglePan;\r\n    const shotAngleRange = this.judgeShotAngleRange(enemyAngleMinus, enemyAngleAdd, type);\r\n    // \r\n    const shotRRange = shotRRangeFn();\r\n    // \r\n    if (shotAngleRange && shotRRange) {\r\n      // \r\n      game.shooter.bullets.splice(bulletIdx, 1);\r\n      //  1 \r\n      enemy.HP -= 1;\r\n      if (!enemy.HP) {\r\n        //  0\r\n        enemies.splice(enemyIdx, 1);\r\n        // \r\n        game.batteryNum += 1;\r\n        batteryNum.textContent = game.batteryNum;\r\n      }\r\n    }\r\n  }\r\n  // \r\n  attackPolygon(polygon, form, sideB1Len, sideB2Len, angleAB1, angleAB2, rotateAngleJudge, bulletIdx, shotRRangeFn, type = 'ordinary') {\r\n    const polyAxisRotateAngle = polygon.axisRotateAngle[form];\r\n    const polyRotate = polygon.rotate[form];\r\n    // \r\n    const sideA = polygon.axisRotateR[form];\r\n    const sideB1 = sideB1Len;\r\n    const sideB2 = sideB2Len;\r\n    /**\r\n     * \r\n     *   whole: 8, 202\r\n     *   big: 70, 202\r\n     *   small: 70, 255\r\n\r\n     * angleB \r\n     *   whole: axisRotateAngle 180, rotate 75\r\n     *     270 - 202 = 68\r\n     *     90 - 8 = 82\r\n     *     (68 + 82) / 2 = 75\r\n     * \r\n     *   big: axisRotateAngle 0, rotate 44\r\n     *     270 - 202 = 68\r\n     *     90 - 70 = 20\r\n     *     (68 + 20) / 2 = 44\r\n     * \r\n     *   small: axisRotateAngle 0, rotate 17.5\r\n     *     270 - 255 = 15\r\n     *     90 - 70 = 20\r\n     *     (15 + 20) / 2 = 17.5\r\n     */\r\n    const sideC1 = cosineFormula(sideA, sideB1, angleAB1);\r\n    const sideC2 = cosineFormula(sideA, sideB2, angleAB2);\r\n    //  axisRotateAnglerotate \r\n    const bottomJudge = (polyAxisRotateAngle <= 180) && ((polyRotate % 360) < rotateAngleJudge || (polyRotate % 360) >= (rotateAngleJudge + 180));\r\n    const topJudge = (polyAxisRotateAngle > 180) && ((polyRotate % 360) >= rotateAngleJudge || (polyRotate % 360) < (rotateAngleJudge + 180));\r\n    let angleB1;\r\n    let angleB2;\r\n    if (bottomJudge || topJudge) {\r\n      angleB1 = getAngleB(sideA, sideB2, sideC2);\r\n      angleB2 = getAngleB(sideA, sideB1, sideC1);\r\n    } else {\r\n      angleB1 = getAngleB(sideA, sideB1, sideC1);\r\n      angleB2 = getAngleB(sideA, sideB2, sideC2);\r\n    }\r\n    /**\r\n     * \r\n     * axisRotateAngle  % 360\r\n     */\r\n    const polyAngleMinus = polyAxisRotateAngle * degToPi - angleB1;\r\n    const polyAngleAdd = polyAxisRotateAngle * degToPi + angleB2;\r\n    const shotAngleRange = this.judgeShotAngleRange(polyAngleMinus, polyAngleAdd, type);\r\n    // \r\n    const shotRRange = shotRRangeFn();\r\n    // \r\n    if (shotAngleRange && shotRRange) {\r\n      // \r\n      game.shooter.bullets.splice(bulletIdx, 1);\r\n      //  1 \r\n      polygon.HP[form] -= 1;\r\n    }\r\n  }\r\n  // \r\n  judgeShotAngleRange(enemyAngleMinus, enemyAngleAdd, type) {\r\n    const shooterRotateAngle = (enemyAngleMinus < 0 && this.rotateAngle > Math.PI) ? (this.rotateAngle - Math.PI * 2) : this.rotateAngle;\r\n    // \r\n    // \r\n    if (type !== 'wave') {\r\n      return shooterRotateAngle >= enemyAngleMinus && shooterRotateAngle <= enemyAngleAdd;\r\n    } else {\r\n      // \r\n      const shooterAnglePan = Math.atan2(this.waveLength, this.axisRotateR);\r\n      const shooterAngleMinus = shooterRotateAngle - shooterAnglePan;\r\n      const shooterAngleAdd = shooterRotateAngle + shooterAnglePan;\r\n      return (enemyAngleMinus <= shooterAngleAdd) && (enemyAngleAdd >= shooterAngleMinus);\r\n    }\r\n  }\r\n  // \r\n  beyondBoundary(bulletIdx) {\r\n    /**\r\n     * 856 / 2 = 428\r\n     * 624 / 2 = 312\r\n     * Math.sqrt(428 * 428 + 312 * 312) = 529.6\r\n     */\r\n    if (this.axisRotateR >= 530) {\r\n      game.shooter.bullets.splice(bulletIdx, 1);\r\n    }  \r\n  }\r\n}\r\n\r\n\r\n\r\n/* Sub Triangle  */\r\nclass TriangleSub {;\r\n  constructor(args) {\r\n    const def = {\r\n      // axisRotatePos: {\r\n      //   x: gameW / 2,\r\n      //   y: gameH / 2,\r\n      // },\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      // r: 26 * 0.4,\r\n      r: 10.4,\r\n      rotate: 0,\r\n      rotateV: 4,\r\n      color: globalColor.blue,\r\n      HP: 2,\r\n      isReproduceMoving: false,\r\n      order: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    // const scale = 0.4;\r\n    const triangleOuterBigR = this.r + 1.6;\r\n    const triangleInnerBigR = this.r - 6.4;\r\n    const triangleInnerSmallR = this.r - 8.8;\r\n    ctx.save();\r\n      // \r\n      ctx.translate(originalPos(this.axisRotateR, this.axisRotateAngle).x, originalPos(this.axisRotateR, this.axisRotateAngle).y);\r\n      // ctx.scale(0.4, 0.4);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      ctx.save();\r\n        ctx.translate(0.8, -Math.sqrt(1.92));\r\n        ctx.beginPath();\r\n        ctx.moveTo(triangleOuterBigR * Math.cos(0), triangleOuterBigR * Math.sin(0));\r\n        ctx.lineTo(triangleOuterBigR * Math.cos(120 * degToPi), triangleOuterBigR * Math.sin(120 * degToPi));\r\n        ctx.lineTo(triangleOuterBigR * Math.cos(240 * degToPi), triangleOuterBigR * Math.sin(240 * degToPi));\r\n        ctx.closePath();\r\n        ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n        ctx.fill();\r\n      ctx.restore();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.moveTo(this.r * Math.cos(0), this.r * Math.sin(0));\r\n      ctx.lineTo(this.r * Math.cos(120 * degToPi), this.r * Math.sin(120 * degToPi));\r\n      ctx.lineTo(this.r * Math.cos(240 * degToPi), this.r * Math.sin(240 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n      // \r\n      ctx.translate(-1.28, -0.64);\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(triangleInnerBigR * Math.cos(30 * degToPi), triangleInnerBigR * Math.sin(30 * degToPi));\r\n      ctx.lineTo(triangleInnerBigR * Math.cos(90 * degToPi), triangleInnerBigR * Math.sin(90 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.translate(0, -3.52);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(triangleInnerSmallR * Math.cos(30 * degToPi), triangleInnerSmallR * Math.sin(30 * degToPi));\r\n      ctx.lineTo(triangleInnerSmallR * Math.cos(90 * degToPi), triangleInnerSmallR * Math.sin(90 * degToPi));\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx) {\r\n    this.rotate += this.rotateV;\r\n    if (!this.isReproduceMoving) {\r\n      TweenLite.to(this, 0.8, {\r\n        axisRotateAngle: `${this.order === 1 ? '+=' : '-='}10`,\r\n        ease: Power2.easeOut,\r\n        onComplete: () => {\r\n          TweenLite.to(this, 1.6, {\r\n            axisRotateR: 0,\r\n            ease: Power1.easeIn,\r\n          });\r\n        }\r\n      });\r\n      this.isReproduceMoving = true;\r\n    }\r\n    //  shooter\r\n    enemyHitShooter(subTriangles, idx, this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n}\r\n\r\n\r\n/* Circle  */\r\nclass CircleBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      axisRotateR: 0,\r\n      color: globalColor.orange,\r\n      moveX: 0,\r\n      moveXV: -3,\r\n      // v: 4,\r\n      rotateAngle: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.p.x, this.p.y);\r\n      ctx.rotate(this.rotateAngle * degToPi); \r\n      // ctx.scale(1.6, 0.68);\r\n      // ctx.scale(1, 0.9);\r\n      ctx.beginPath();\r\n      // ctx.arc(this.moveX + 22 + 10, 0, 4, 0, Math.PI * 2);\r\n      ctx.arc(this.moveX, 0, 4, 0, Math.PI * 2);\r\n      // ctx.arc(this.axisRotateR + 16, 0, 4, 0, Math.PI * 2);\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    // \r\n    this.moveX += this.moveXV;\r\n    //  shooter\r\n    enemyBulletAttackShooter(this, idx, arr);\r\n  }\r\n}\r\n\r\n\r\n/* Triangle  */\r\nclass TriangleBullet {;\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      moveX: 0,\r\n      moveXV: -4,\r\n      rotateAngle: 0,\r\n      color: globalColor.blue,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.p.x, this.p.y);\r\n      ctx.rotate(this.rotateAngle * degToPi);\r\n      ctx.translate(this.moveX, 0);\r\n      // \r\n      ctx.fillStyle = this.color;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-16, 0);\r\n      ctx.$triLineTo(38, 174);\r\n      ctx.$triLineTo(16.8, 200);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(-16.4, 0);\r\n      ctx.$triLineTo(38, 174);\r\n      ctx.$triLineTo(15.6, 168);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    // \r\n    this.moveX += this.moveXV;\r\n    //  shooter\r\n    enemyBulletAttackShooter(this, idx, arr, 37.8);\r\n    // \r\n    this.beyondBoundary(idx, arr);\r\n  }\r\n  // \r\n  beyondBoundary(idx, arr) {\r\n     // Math.sqrt(856 * 856 + 624 * 624) = 1059.3\r\n    if (this.moveX <= -1060) {\r\n      arr.splice(idx, 1);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n//  shooter \r\nfunction enemyBulletAttackShooter(enemy, enemyIdx, enemies, enemyBulletLen = 0) {\r\n  const shooter = game.shooter;\r\n  const shooterBodyCore = shooter.r + (shooter.cirSolidLineW / 2);\r\n  const shooterBodyShield = shooter.shieldR + (shooter.shieldLineW / 2);\r\n  //  shooter \r\n  if (-enemy.moveX >= (enemy.axisRotateR - (shooterBodyCore + enemyBulletLen))) {\r\n    // \r\n    enemyAttackShooterResult();\r\n    // \r\n    enemies.splice(enemyIdx, 1);\r\n  }\r\n  //  shooter \r\n  const angleGap = Math.abs(mouseMoveAngle - (enemy.rotateAngle % 360) * degToPi);\r\n  const shieldAngleRange = angleGap >= (135 * degToPi) && angleGap <= (225 * degToPi);\r\n  if (shieldAngleRange && (-enemy.moveX >= (enemy.axisRotateR - (shooterBodyShield + enemyBulletLen)))) {\r\n    // \r\n    enemies.splice(enemyIdx, 1);\r\n  }\r\n}\r\n\r\n\r\n//  shooter \r\nfunction enemyAttackShooterResult() {\r\n  const shooter = game.shooter;\r\n  const shooterHpBarOriginW = 216;\r\n  const shooterHpBarW = shooterHpBar.offsetWidth - (shooterHpBarOriginW / 3);\r\n  shooter.isAttacked = true;\r\n  // shooter  1\r\n  shooter.HP -= 1;\r\n  shooterHpBar.style.width = `${shooterHpBarW}px`;\r\n  if (!shooterHpBarW) {\r\n    const shooterHeart = document.querySelectorAll('.panel__game-heart');\r\n    //  shooter \r\n    if (shooterHeart.length) {\r\n      // \r\n      shooterHeart[0].parentNode.removeChild(shooterHeart[0]);\r\n      //  1/3\r\n      shooterHpBar.style.width = `${shooterHpBarOriginW}px`;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n// \r\nfunction drawBattery(p) {\r\n  ctx.save();\r\n    ctx.translate(p.x, p.y);\r\n    ctx.fillStyle = globalColor.orange;\r\n    // \r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(-24, 0);\r\n    ctx.lineTo(-24, 42);\r\n    ctx.lineTo(0, 42);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // \r\n    ctx.save();\r\n      ctx.translate(0, 44);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(-24, 0);\r\n      ctx.lineTo(-24, 3);\r\n      ctx.lineTo(0, 3);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.save();\r\n      ctx.translate(-6.75, 0);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, -3);\r\n      ctx.lineTo(-10.5, -3);\r\n      ctx.lineTo(-10.5, -0);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    // ctx.strokeStyle = globalColor.white;\r\n    drawLightning({ x: -11, y: 9 });\r\n    // ctx.translate(-11, 9);\r\n    // ctx.beginPath();\r\n    // ctx.moveTo(0, 0);\r\n    // ctx.rotate(18 * degToPi);\r\n    // ctx.lineTo(0, 10);\r\n    // ctx.translate(0, 10);\r\n    // ctx.rotate(-18 * degToPi);\r\n\r\n    // ctx.lineTo(10, 0);\r\n    // ctx.translate(10, 0);\r\n\r\n    // ctx.rotate(28 * degToPi);\r\n    // ctx.lineTo(0, 16);\r\n    // ctx.translate(0, 16);\r\n    // ctx.rotate(-28 * degToPi);\r\n\r\n    // ctx.rotate(3.6 * degToPi);\r\n    // ctx.lineTo(0, -10);\r\n    // ctx.translate(0, -10);\r\n    // ctx.rotate(-3.6 * degToPi);\r\n\r\n    // ctx.lineTo(-8, 0);\r\n    // ctx.closePath();\r\n    // ctx.fill();\r\n  ctx.restore();\r\n}\r\n\r\n\r\nfunction originalPos(axisRotateR, axisRotateAngle) {\r\n  return {\r\n    x: (gameW / 2) + axisRotateR * Math.cos(axisRotateAngle * degToPi),\r\n    y: (gameH / 2) + axisRotateR * Math.sin(axisRotateAngle * degToPi),\r\n  };\r\n}\r\n\r\n// \r\nfunction cosineFormula(a, b, angle) {\r\n  return Math.sqrt(a * a + b * b - 2 * a * b * Math.cos(angle * degToPi));\r\n}\r\n\r\nfunction getAngleB(a, b, c) {\r\n  return Math.acos((a * a + c * c - b * b) / (2 * a * c));\r\n}\r\n\r\n// \r\nfunction drawLightning(translate =  { x: 0, y: 0 }, scale = 1 ) {\r\n  ctx.fillStyle = globalColor.white;\r\n  ctx.translate(translate.x, translate.y);\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, 0);\r\n  ctx.rotate(18 * degToPi);\r\n  ctx.lineTo(0, 10 * scale);\r\n  ctx.translate(0, 10 * scale);\r\n  ctx.rotate(-18 * degToPi);\r\n\r\n  ctx.lineTo(10 * scale, 0);\r\n  ctx.translate(10 * scale, 0);\r\n\r\n  ctx.rotate(28 * degToPi);\r\n  ctx.lineTo(0, 16 * scale);\r\n  ctx.translate(0, 16 * scale);\r\n  ctx.rotate(-28 * degToPi);\r\n\r\n  ctx.rotate(3.6 * degToPi);\r\n  ctx.lineTo(0, -10 * scale);\r\n  ctx.translate(0, -10 * scale);\r\n  ctx.rotate(-3.6 * degToPi);\r\n\r\n  ctx.lineTo(-8 * scale, 0);\r\n  ctx.closePath();\r\n  ctx.fill();\r\n}\r\n\r\n/* Initialize Game Logic */\r\n// function init() {\r\n\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n/* Update Game Logic */\r\n// function update() {\r\n//   time += 1;\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n/* Update Picture */\r\n// function draw() {\r\n  // clear background\r\n  // ctx.fillStyle = globalColor.blueDark;\r\n  // ctx.fillRect(0, 0, gameW, gameH);\r\n\r\n  // draw here\r\n  // ...\r\n\r\n  // draw mouse\r\n  // ctx.fillStyle = 'red';\r\n  // ctx.beginPath();\r\n  // ctx.circle(mouseMovePos, 3);\r\n  // ctx.fill();\r\n\r\n  // ctx.save();\r\n  // ctx.translate(mouseMovePos.x, mouseMovePos.y);\r\n  // ctx.strokeStyle = 'red';\r\n  // const length = 20;\r\n  // ctx.beginPath();\r\n  // ctx.fillText(mouseMovePos, 10, -10);\r\n  // ctx.line(new Vec2(-length, 0), new Vec2(length, 0));\r\n  // ctx.line(new Vec2(0, -length), new Vec2(0, length));\r\n  // ctx.stroke();\r\n  // ctx.restore();\r\n\r\n  // requestAnimationFrame(draw);\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n/* Page Loaded */\r\nfunction handleLoad() {\r\n  game = new Game();\r\n  initCanvas();\r\n  game.init();\r\n  // init();\r\n  // requestAnimationFrame(draw);\r\n  // setInterval(update, 1000 / updateFPS);\r\n}\r\n\r\n// load & resize event\r\nwindow.addEventListener('load', handleLoad);\r\nwindow.addEventListener('resize', initCanvas);\r\n\r\n\r\n\r\n\r\n\r\n/* Mouse Events & Recording */\r\n// const mouseMovePos = new Vec2(0, 0);\r\nlet mouseMovePos = {};\r\nlet mouseMoveAngle = 0;\r\n// let mouseUpPos = new Vec2(0, 0);\r\n// let mouseDownPos = new Vec2(0, 0);\r\n\r\n// window.addEventListener('mousemove', handleMouseMove);\r\n// window.addEventListener('mouseup', handleMouseUp);\r\n// window.addEventListener('mousedown', handleMouseDown);\r\ncanvas.addEventListener('mousemove', handleMouseMove);\r\n\r\nfunction handleMouseMove(evt) {\r\n  mouseMovePos.x = evt.x - ww / 2;\r\n  mouseMovePos.y = evt.y - wh / 2;\r\n  const angle = Math.atan2(mouseMovePos.y, mouseMovePos.x);\r\n  mouseMoveAngle = angle < 0 ? (angle + 2 * Math.PI) : angle;\r\n  // mouseMoveAngle = Math.atan2(mouseMovePos.y, mouseMovePos.x);\r\n};\r\n\r\ncanvas.addEventListener('click', handleClick);\r\nwindow.addEventListener('keyup', handleKeyup);\r\n\r\nlet beforeShootTime = new Date();\r\nfunction handleClick() {\r\n  game.shooter.shoot();\r\n};\r\n\r\nfunction handleKeyup(evt) {\r\n  if (evt.key === 's') {\r\n    game.shooter.shoot();\r\n  }\r\n}\r\n\r\n// function handleMouseUp(evt) {\r\n//   mouseUpPos = mouseMovePos.clone();\r\n// }\r\n\r\n// function handleMouseDown(evt) {\r\n//   mouseDownPos = mouseMovePos.clone();\r\n// }"]}