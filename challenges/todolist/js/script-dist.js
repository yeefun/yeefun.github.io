"use strict";var navbar=new Vue({el:"nav",methods:{active:function(t){var e=document.querySelectorAll(".item");Array.from(e).forEach(function(t){t.classList.remove("active")}),t.currentTarget.classList.add("active")},all:function(t){this.active(t),todos.modes.inProgress=!1,todos.modes.completed=!1},inProgress:function(t){this.active(t),todos.modes.inProgress=!0,todos.modes.completed=!1},completed:function(t){this.active(t),todos.modes.inProgress=!1,todos.modes.completed=!0}}}),todos=new Vue({el:"#todos",data:{todoOrderZero:!1,todoModes:function(t){var e=this.todos[t];return{edit:e.open,"edit-zero":e.open&&this.todoOrderZero,"icon-empty":!(e.date||e.time||e.fileName||e.comment)||e.open,hide:this.modes.inProgress&&e.completed||this.modes.completed&&!e.completed}},modes:{completed:!1,inProgress:!1},notAdd:!0,newTodo:{title:"",star:!1,date:"",time:"",fileName:"",fileUploadDate:"",comment:""},todos:[],backupTodos:[],dragged:null,draggedIdx:""},computed:{todoRemain:function(){var t=this.todos.filter(function(t){return!0===t.completed});return this.modes.completed?"完成了 "+t.length+" 件任務":"還剩 "+(this.todos.length-t.length)+" 件任務"}},created:function(){localStorage.todos&&(this.todos=JSON.parse(localStorage.todos),this.backupTodos=JSON.parse(localStorage.todos))},mounted:function(){this.todos.forEach(function(t,e){t.completed&&(document.getElementById("title"+e).readOnly=!0)})},methods:{todoDataTransmit:function(t,e){t.date=e.date,t.time=e.time,t.fileName=e.fileName,t.fileUploadDate=e.fileUploadDate,t.comment=e.comment},todoAddClick:function(){document.querySelector(".menu-body.open")&&document.querySelector(".menu-body.open .save").click(),this.notAdd=!1,document.getElementById("new-title").focus()},todoAdd:function(){this.notAdd=!0;var t={title:this.newTodo.title,order:0,open:!1,star:this.newTodo.star,completed:!1,date:this.newTodo.date,time:this.newTodo.time,fileName:this.newTodo.fileName,fileUploadDate:this.newTodo.fileUploadDate,comment:this.newTodo.comment},e={title:"",date:"",time:"",fileName:"",fileUploadDate:"",comment:""};if(this.todos.length){this.todos.forEach(function(t){t.order+=1}),this.todos.unshift(t),this.backupTodos.unshift(e);var o=JSON.parse(localStorage.todos);o.forEach(function(t){t.order+=1}),o.unshift(t),localStorage.todos=JSON.stringify(o)}else{this.todos.unshift(t),this.backupTodos.unshift(e);var d=[];d.unshift(t),localStorage.todos=JSON.stringify(d)}for(var r in this.newTodo)this.newTodo[r]="star"!==r&&"completed"!==r&&""},newTodoCancel:function(){for(var t in this.notAdd=!0,this.newTodo)this.newTodo[t]="star"!==t&&"completed"!==t&&""},todoEdit:function(t,e){var o=this.todos[e],d=this.backupTodos[e];document.querySelector(".menu-body.open")&&document.querySelector(".menu-body.open .save").click(),o.open=!0;var r=t.currentTarget.parentNode.parentNode.parentNode.style.order;this.todoOrderZero="0"===r,this.todoDataTransmit(d,o)},todoSave:function(t){var e=this.todos[t];e.open=!1;var o=JSON.parse(localStorage.todos);o[t]=e,localStorage.todos=JSON.stringify(o)},todoCancel:function(t){var e=this.todos[t],o=this.backupTodos[t];e.open=!1,this.todoDataTransmit(e,o)},todoTitled:function(t){var e=this.todos[t],o=JSON.parse(localStorage.todos);o[t].title=e.title,localStorage.todos=JSON.stringify(o)},todoStarred:function(t){var e=this.todos[t],o=JSON.parse(localStorage.todos);e.star=!e.star,e.star?o[t].star=!0:o[t].star=!1,localStorage.todos=JSON.stringify(o)},todoCompleted:function(t){var e=this.todos[t],o=document.getElementById("title"+t),d=JSON.parse(localStorage.todos);e.completed?(o.readOnly=!0,d[t].completed=!0):(o.readOnly=!1,d[t].completed=!1),localStorage.todos=JSON.stringify(d)},setCalendar:function(t){var e=this.todos[t];return e.date.replace(/-/g,"/")+" "+e.time},fileClick:function(t){t.currentTarget.previousSibling.click()},fileSelected:function(t,e){var o=this.todos[e],d=t.target.files[0],r=new Date,s=r.getMonth()+1,a=r.getDate(),n=(s<10?"0"+s:s)+"/"+(a<10?"0"+a:a)+" "+r.getHours()+":"+r.getMinutes();void 0!==e?(o.fileName=d.name,o.fileUploadDate="上傳時間 "+n):(this.newTodo.fileName=d.name,this.newTodo.fileUploadDate="上傳時間 "+n)},dragStart:function(t,e){t.dataTransfer.setData("text/plain",null),this.dragged=t.currentTarget,this.draggedIdx=e,t.currentTarget.style.setProperty("transform","perspective(400px) translateY(-4px) rotate(-1.6deg) scale(1.001) rotateX(-4deg)"),t.currentTarget.style.boxShadow="2px 2px 16px rgba(0, 0, 0, 0.2)",t.currentTarget.style.zIndex="99"},dragEnd:function(t){t.currentTarget.style.transform="none",t.currentTarget.style.boxShadow="none",t.currentTarget.style.zIndex="auto"},drop:function(t,e){this.orderExchange(t,e)},orderExchange:function(t,e){var o=t.currentTarget,d=this.dragged,r=o.style.order,s=d.style.order,a=JSON.parse(localStorage.todos);o.style.order=s,d.style.order=r,a[e].order=this.todos[e].order=parseInt(s,10),a[this.draggedIdx].order=this.todos[this.draggedIdx].order=parseInt(r,10),localStorage.todos=JSON.stringify(a)}}});

//# sourceMappingURL=script-dist.js.map